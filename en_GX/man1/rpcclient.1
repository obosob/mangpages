'\" t
.\"     Title: rpcclient
.\"    Author: [see tha "AUTHOR" section]
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 12/11/2014
.\"    Manual: User Commands
.\"    Source: Samba 4.0
.\"  Language: Gangsta
.\"
.TH "RPCCLIENT" "1" "12/11/2014" "Samba 4\&.0" "User Commands"
.\" -----------------------------------------------------------------
.\" * Define some portabilitizzle stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
rpcclient \- tool fo' executin client side MS\-RPC functions
.SH "SYNOPSIS"
.HP \w'\ 'u
rpcclient [\-A\ authfile] [\-c\ <command\ string>] [\-d\ debuglevel] [\-l\ logdir] [\-N] [\-s\ <smb\ config\ file>] [\-U\ username[%password]] [\-W\ workgroup] [\-I\ destinationIP] {server}
.SH "DESCRIPTION"
.PP
This tool is part of the
\fBsamba\fR(7)
suite\&.
.PP
rpcclient
is a utilitizzle initially pimped ta test MS\-RPC functionalitizzle up in Samba itself\&. Well shiiiit, it has undergone nuff muthafuckin stagez of pimpment n' stability\&. Many system administrators have now freestyled scripts round it ta manage Windows NT clients from they UNIX workstation\&.
.SH "OPTIONS"
.PP
server
.RS 4
NetBIOS name of Server ta which ta connect\&. Da server can be any SMB/CIFS server\&. Da name is resolved rockin the
\m[blue]\fBname resolve order\fR\m[]
line from
\fBsmb.conf\fR(5)\&.
.RE
.PP
\-c|\-\-command=<command string>
.RS 4
Execute semicolon separated commandz (listed below)
.RE
.PP
\-I|\-\-dest\-ip IP\-address
.RS 4
\fIIP address\fR
is tha address of tha server ta connect to\&. Well shiiiit, it should be specified up in standard "a\&.b\&.c\&.d" notation\&.
.sp
Normally tha client would attempt ta locate a named SMB/CIFS server by lookin it up via tha NetBIOS name resolution mechanizzle busted lyrics bout above up in the
\fIname resolve order\fR
parameta above\&. Usin dis parameta will force tha client ta assume dat tha server is on tha machine wit tha specified IP address n' tha NetBIOS name component of tha resource bein connected ta is ghon be ignored\&.
.sp
There is no default fo' dis parameter\&. If not supplied, it is ghon be determined automatically by tha client as busted lyrics bout above\&.
.RE
.PP
\-p|\-\-port port
.RS 4
This number is tha TCP port number dat is ghon be used when makin connections ta tha server\&. Da standard (well\-known) TCP port number fo' a SMB/CIFS server is 139, which is tha default\&.
.RE
.PP
\-d|\-\-debuglevel=level
.RS 4
\fIlevel\fR
is a integer from 0 ta 10\&. Da default value if dis parameta aint specified is 0\&.
.sp
Da higher dis value, tha mo' detail is ghon be logged ta tha log filez bout tha activitizzlez of tha server\& fo' realz. At level 0, only critical errors n' straight-up warnings is ghon be logged\&. Level 1 be a reasonable level fo' day\-to\-dizzle hustlin \- it generates a lil' small-ass amount of shiznit bout operations carried out\&.
.sp
Levels above 1 will generate considerable amountz of log data, n' should only be used when investigatin a problem\&. Levels above 3 is designed fo' use only by pimpers n' generate HUGE amountz of log data, most of which is mad cryptic\&.
.sp
Note dat specifyin dis parameta here will override the
\m[blue]\fBlizzay level\fR\m[]
parameta up in the
smb\&.conf
file\&.
.RE
.PP
\-V|\-\-version
.RS 4
Prints tha program version number\&.
.RE
.PP
\-s|\-\-configfile=<configuration file>
.RS 4
Da file specified gotz nuff tha configuration details required by tha server\&. Da shiznit up in dis file includes server\-specific shiznit like fuckin what tha fuck printcap file ta use, as well as descriptionz of all tha skillz dat tha server is ta provide\&. Right back up in yo muthafuckin ass. See
smb\&.conf
for mo' shiznit\&. Da default configuration file name is determined at compile time\&.
.RE
.PP
\-l|\-\-log\-basename=logdirectory
.RS 4
Base directory name fo' log/debug files\&. Da extension
\fB"\&.progname"\fR
will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. Da log file is never removed by tha client\&.
.RE
.PP
\-\-option=<name>=<value>
.RS 4
Set the
\fBsmb.conf\fR(5)
option "<name>" ta value "<value>" from tha command line\&. This overrides compiled\-in defaults n' options read from tha configuration file\&.
.RE
.PP
\-N|\-\-no\-pass
.RS 4
If specified, dis parameta suppresses tha aiiight password prompt from tha client ta tha user\&. This is useful when accessin a steez dat do not require a password\&.
.sp
Unless a password is specified on tha command line or dis parameta is specified, tha client will request a password\&.
.sp
If a password is specified on tha command line n' dis option be also defined tha password on tha command line is ghon be silently ingnored n' no password is ghon be used\&.
.RE
.PP
\-k|\-\-kerberos
.RS 4
Try ta authenticate wit kerberos\&. Only useful up in a Actizzle Directory environment\&.
.RE
.PP
\-C|\-\-use\-ccache
.RS 4
Try ta use tha credentials cached by winbind\&.
.RE
.PP
\-A|\-\-authentication\-file=filename
.RS 4
This option allows you ta specify a gangbangin' file from which ta read tha username n' password used up in tha connection\&. Da format of tha file is
.sp
.if n \{\
.RS 4
.\}
.nf
username = <value>
password = <value>
domain   = <value>
.fi
.if n \{\
.RE
.\}
.sp
Make certain dat tha permissions on tha file restrict access from unwanted users\&.
.RE
.PP
\-U|\-\-user=username[%password]
.RS 4
Sets tha SMB username or username n' password\&.
.sp
If %password aint specified, tha user is ghon be prompted\&. Da client will first check the
\fBUSER\fR
environment variable, then the
\fBLOGNAME\fR
variable n' if either exists, tha strang is uppercased\&. If these environmenstrual variablez is not found, tha username
\fBGUEST\fR
is used\&.
.sp
A third option is ta bust a cold-ass lil credentials file which gotz nuff tha plaintext of tha username n' password\&. This option is mainly provided fo' scripts where tha admin do not wish ta pass tha credentials on tha command line or via environment variables\&. If dis method is used, make certain dat tha permissions on tha file restrict access from unwanted users\&. Right back up in yo muthafuckin ass. See the
\fI\-A\fR
for mo' details\&.
.sp
Be cautious bout includin passwordz up in scripts\& fo' realz. Also, on nuff systems tha command line of a hustlin process may be peeped via the
ps
command\&. To be safe always allow
rpcclient
to prompt fo' a password n' type it up in directly\&.
.RE
.PP
\-S|\-\-signin on|off|required
.RS 4
Set tha client signin state\&.
.RE
.PP
\-P|\-\-machine\-pass
.RS 4
Use stored machine account password\&.
.RE
.PP
\-e|\-\-encrypt
.RS 4
This command line parameta requires tha remote server support tha UNIX extensions or dat tha SMB3 protocol has been selected\&. Requests dat tha connection be encrypted\&. Negotiates SMB encryption rockin either SMB3 or POSIX extensions via GSSAPI\&. Uses tha given credentials fo' tha encryption negotiation (either kerberos or NTLMv1/v2 if given domain/username/password triple\&. Fails tha connection if encryption cannot be negotiated\&.
.RE
.PP
\-\-pw\-nt\-hash
.RS 4
Da supplied password is tha NT hash\&.
.RE
.PP
\-n|\-\-netbiosname <primary NetBIOS name>
.RS 4
This option allows you ta override tha NetBIOS name dat Samba uses fo' itself\&. This is identical ta settin the
\m[blue]\fBnetbios name\fR\m[]
parameta up in the
smb\&.conf
file\&. But fuck dat shiznit yo, tha word on tha street is dat a cold-ass lil command line settin will take precedence over settings in
smb\&.conf\&.
.RE
.PP
\-i|\-\-scope <scope>
.RS 4
This specifies a NetBIOS scope that
nmblookup
will use ta rap wit when generatin NetBIOS names\&. For details on tha use of NetBIOS scopes, peep rfc1001\&.txt n' rfc1002\&.txt\&. NetBIOS scopes are
\fIvery\fR
rarely used, only set dis parameta if yo ass is tha system administrator up in charge of all tha NetBIOS systems you rap with\&.
.RE
.PP
\-W|\-\-workgroup=domain
.RS 4
Set tha SMB domain of tha username\&. This overrides tha default domain which is tha domain defined up in smb\&.conf\&. If tha domain specified is tha same ol' dirty as tha servers NetBIOS name, it causes tha client ta log on rockin tha servers local SAM (as opposed ta tha Domain SAM)\&.
.RE
.PP
\-O|\-\-socket\-options socket options
.RS 4
TCP socket options ta set on tha client socket\&. Right back up in yo muthafuckin ass. See tha socket options parameta up in the
smb\&.conf
manual page fo' tha list of valid options\&.
.RE
.PP
\-?|\-\-help
.RS 4
Print a summary of command line options\&.
.RE
.PP
\-\-usage
.RS 4
Display brief usage message\&.
.RE
.SH "COMMANDS"
.SS "LSARPC"
.PP
lsaquery
.RS 4
Query info policy
.RE
.PP
lookupsids
.RS 4
Resolve a list of SIDs ta usernames\&.
.RE
.PP
lookupnames
.RS 4
Resolve a list of usernames ta SIDs\&.
.RE
.PP
enumtrust
.RS 4
Enumerate trusted domains
.RE
.PP
enumprivs
.RS 4
Enumerate privileges
.RE
.PP
getdispname
.RS 4
Git tha privilege name
.RE
.PP
lsaenumsid
.RS 4
Enumerate tha LSA SIDS
.RE
.PP
lsaenumprivsaccount
.RS 4
Enumerate tha privilegez of a SID
.RE
.PP
lsaenumacctrights
.RS 4
Enumerate tha muthafuckin rightz of a SID
.RE
.PP
lsaenumacctwithright
.RS 4
Enumerate accounts wit a right
.RE
.PP
lsaaddacctrights
.RS 4
Add muthafuckin rights ta a account
.RE
.PP
lsaremoveacctrights
.RS 4
Remove muthafuckin rights from a account
.RE
.PP
lsalookupprivvalue
.RS 4
Git a privilege value given its name
.RE
.PP
lsaquerysecobj
.RS 4
Query LSA securitizzle object
.RE
.SS "LSARPC\-DS"
.PP
dsroledominfo
.RS 4
Git Primary Domain Information
.RE
.PP
.PP
\fIDFS\fR
.PP
dfsexist
.RS 4
Query DFS support
.RE
.PP
dfsadd
.RS 4
Add a DFS share
.RE
.PP
dfsremove
.RS 4
Remove a DFS share
.RE
.PP
dfsgetinfo
.RS 4
Query DFS share info
.RE
.PP
dfsenum
.RS 4
Enumerate dfs shares
.RE
.SS "REG"
.PP
shutdown
.RS 4
Remote Shutdown
.RE
.PP
abortshutdown
.RS 4
Abort Shutdown
.RE
.SS "SRVSVC"
.PP
srvinfo
.RS 4
Server query info
.RE
.PP
netshareenum
.RS 4
Enumerate shares
.RE
.PP
netfileenum
.RS 4
Enumerate open files
.RE
.PP
netremotetod
.RS 4
Fetch remote time of day
.RE
.SS "SAMR"
.PP
queryuser
.RS 4
Query user info
.RE
.PP
querygroup
.RS 4
Query crew info
.RE
.PP
queryusergroups
.RS 4
Query user groups
.RE
.PP
querygroupmem
.RS 4
Query crew membership
.RE
.PP
queryaliasmem
.RS 4
Query alias membership
.RE
.PP
querydispinfo
.RS 4
Query display info
.RE
.PP
querydominfo
.RS 4
Query domain info
.RE
.PP
enumdomusers
.RS 4
Enumerate domain users
.RE
.PP
enumdomgroups
.RS 4
Enumerate domain groups
.RE
.PP
enumalsgroups
.RS 4
Enumerate alias groups
.RE
.PP
createdomuser
.RS 4
Smoke domain user
.RE
.PP
samlookupnames
.RS 4
Look up names
.RE
.PP
samlookuprids
.RS 4
Look up names
.RE
.PP
deletedomuser
.RS 4
Delete domain user
.RE
.PP
samquerysecobj
.RS 4
Query SAMR securitizzle object
.RE
.PP
getdompwinfo
.RS 4
Retrieve domain password info
.RE
.PP
lookupdomain
.RS 4
Look up domain
.RE
.SS "SPOOLSS"
.PP
adddriver <arch> <config> [<version>]
.RS 4
Execute a AddPrinterDriver() RPC ta install tha printa driver shiznit on tha server\&. Note dat tha driver filez should already exist up in tha directory returned by
getdriverdir\&. Possible joints for
\fIarch\fR
are tha same as dem fo' the
getdriverdir
command\&. The
\fIconfig\fR
parameta is defined as bigs up:
.sp
.if n \{\
.RS 4
.\}
.nf
Long Driver Name:\e
Driver File Name:\e
Data File Name:\e
Config File Name:\e
Help File Name:\e
Language Monitor Name:\e
Default Data Type:\e
Comma Separated list of Files
.fi
.if n \{\
.RE
.\}
.sp
Any empty fieldz should be enta as tha strang "NULL"\&.
.sp
Samba do not need ta support tha concept of Print Monitors since these only apply ta local printas whose driver can make use of a funky-ass bi\-directionizzle link fo' communication\&. This field should be "NULL"\&. On a remote NT print server, tha Print Monitor fo' a thugged-out driver must already be installed prior ta addin tha driver or else tha RPC will fail\&.
.sp
The
\fIversion\fR
parameta lets you specify tha printa driver version number\&. If omitted, tha default driver version fo' tha specified architecture is ghon be used\&. This option can be used ta upload Windows 2000 (version 3) printa drivers\&.
.RE
.PP
addprinta <printername> <sharename> <drivername> <port>
.RS 4
Add a printa on tha remote server\&. This printa is ghon be automatically shared\&. Be aware dat tha printa driver must already be installed on tha server (see
adddriver) n' the
\fIport\fRmust be a valid port name (see
enumports\&.
.RE
.PP
deldriver <driver>
.RS 4
Delete tha specified printa driver fo' all architectures\&. This do not delete tha actual driver filez from tha server, only tha entry from tha server\*(Aqs list of drivers\&.
.RE
.PP
deldriverex <driver> [architecture] [version] [flags]
.RS 4
Delete tha specified printa driver n' optionally filez associated wit tha driver\&. Yo ass can limit dis action ta a specific architecture n' a specific version\&. If no architecture is given, all driver filez of dat driver is ghon be deleted\&.
\fIflags\fR
correspond ta numeric DPD_* joints, i\&.e\&. a value of 3 requests (DPD_DELETE_UNUSED_FILES | DPD_DELETE_SPECIFIC_VERSION)\&.
.RE
.PP
enumdata
.RS 4
Enumerate all printa settin data stored on tha server\&. On Windows NT clients, these joints is stored up in tha registry, while Samba servers store dem up in tha printas TDB\&. This command correspondz ta tha MS Platform SDK GetPrinterData() function (* This command is currently unimplemented)\&.
.RE
.PP
enumdataex
.RS 4
Enumerate printa data fo' a key
.RE
.PP
enumjobs <printer>
.RS 4
List tha thangs n' statuz of a given printer\&. This command correspondz ta tha MS Platform SDK EnumJobs() function
.RE
.PP
enumkey
.RS 4
Enumerate printa keys
.RE
.PP
enumports [level]
.RS 4
Executes a EnumPorts() call rockin tha specified info level\&. Currently only info levels 1 n' 2 is supported\&.
.RE
.PP
enumdrivers [level]
.RS 4
Execute a EnumPrinterDrivers() call\&. This lists tha various installed printa drivers fo' all architectures\&. Refer ta tha MS Platform SDK documentation fo' mo' detailz of tha various flags n' callin options\&. Currently supported info levels is 1, 2, n' 3\&.
.RE
.PP
enumprintas [level]
.RS 4
Execute a EnumPrinters() call\&. This lists tha various installed n' share printers\&. Refer ta tha MS Platform SDK documentation fo' mo' detailz of tha various flags n' callin options\&. Currently supported info levels is 1, 2 n' 5\&.
.RE
.PP
getdata <printername> <valuename;>
.RS 4
Retrieve tha data fo' a given printa setting\&. Right back up in yo muthafuckin ass. See the
enumdata
command fo' mo' shiznit\&. This command correspondz ta tha GetPrinterData() MS Platform SDK function\&.
.RE
.PP
getdataex
.RS 4
Git printa driver data wit keyname
.RE
.PP
getdriver <printername>
.RS 4
Retrieve tha printa driver shiznit (like fuckin driver file, config file, dependent files, etc\&.\&.\&.) fo' tha given printer\&. This command correspondz ta tha GetPrinterDriver() MS Platform SDK function\&. Currently info level 1, 2, n' 3 is supported\&.
.RE
.PP
getdriverdir <arch>
.RS 4
Execute a GetPrinterDriverDirectory() RPC ta retrieve tha SMB share name n' subdirectory fo' storin printa driver filez fo' a given architecture\&. Possible joints for
\fIarch\fR
are "Windows 4\&.0" (for Windows 95/98), "Windows NT x86", "Windows NT PowerPC", "Windows Alpha_AXP", n' "Windows NT R4000"\&.
.RE
.PP
getprinta <printername>
.RS 4
Retrieve tha current printa shiznit\&. This command correspondz ta tha GetPrinter() MS Platform SDK function\&.
.RE
.PP
getprintprocdir
.RS 4
Git print processor directory
.RE
.PP
openprinta <printername>
.RS 4
Execute a OpenPrinterEx() n' ClosePrinter() RPC against a given printer\&.
.RE
.PP
setdriver <printername> <drivername>
.RS 4
Execute a SetPrinter() command ta update tha printa driver associated wit a installed printer\&. Da printa driver must already be erectly installed on tha print server\&.
.sp
See also the
enumprinters
and
enumdrivers
commandz fo' obtainin a list of installed printas n' drivers\&.
.RE
.PP
addform
.RS 4
Add form
.RE
.PP
setform
.RS 4
Set form
.RE
.PP
getform
.RS 4
Git form
.RE
.PP
deleteform
.RS 4
Delete form
.RE
.PP
enumforms
.RS 4
Enumerate form
.RE
.PP
setprinter
.RS 4
Set printa comment
.RE
.PP
setprinterdata
.RS 4
Set REG_SZ printa data
.RE
.PP
setprintername <printername> <newprintername>
.RS 4
Set printa name
.RE
.PP
rffpcnex
.RS 4
Rffpcnex test
.RE
.SS "NETLOGON"
.PP
logonctrl2
.RS 4
Logon Control 2
.RE
.PP
logonctrl
.RS 4
Logon Control
.RE
.PP
samsync
.RS 4
Sam Synchronisation
.RE
.PP
samdeltas
.RS 4
Query Sam Deltas
.RE
.PP
samlogon
.RS 4
Sam Logon
.RE
.SS "FSRVP"
.PP
fss_is_path_sup <share>
.RS 4
Peep whether a gangbangin' finger-lickin' dirty-ass share supports shadow\-copy requests
.RE
.PP
fss_get_sup_version
.RS 4
Git supported FSRVP version from server
.RE
.PP
fss_create_expose <context> <[ro|rw]> <share1> [share2] \&.\&.\&. [shareN]
.RS 4
Request shadow\-copy creation n' exposure as a freshly smoked up share
.RE
.PP
fss_delete <base_share> <shadow_copy_set_id> <shadow_copy_id>
.RS 4
Request shadow\-copy share deletion
.RE
.PP
fss_has_shadow_copy <base_share>
.RS 4
Peep fo' a associated share shadow\-copy
.RE
.PP
fss_get_mappin <base_share> <shadow_copy_set_id> <shadow_copy_id>
.RS 4
Git shadow\-copy share mappin shiznit
.RE
.PP
fss_recovery_complete <shadow_copy_set_id>
.RS 4
Flag read\-write shadow\-copy as recovery complete, allowin further shadow\-copy requests
.RE
.SS "GENERAL COMMANDS"
.PP
debuglevel
.RS 4
Set tha current debug level used ta log shiznit\&.
.RE
.PP
help (?)
.RS 4
Print a listin of all known commandz or extended help on a particular command\&.
.RE
.PP
quit (exit)
.RS 4
Exit
rpcclient\&.
.RE
.SH "BUGS"
.PP
rpcclient
is designed as a thugged-out pimper testin tool n' may not be robust up in certain areas (like fuckin command line parsing)\&. Well shiiiit, it has been known ta generate a cold-ass lil core dump upon failures when invalid parametas where passed ta tha interpreter\&.
.PP
From Luke Leighton\*(Aqs original gangsta rpcclient playa page:
.PP
\fIWARNING!\fR
Da MSRPC over SMB code has been pimped from examinin Network traces\&. No documentation be available from tha original gangsta creators (Microsoft) on how tha fuck MSRPC over SMB works, or how tha fuck tha individual MSRPC skillz work\&. Microsoft\*(Aqs implementation of these skillz has been demonstrated (and reported) ta be\&.\&.\&. a lil' bit flaky up in places\&.
.PP
Da pimpment of Samba\*(Aqs implementation be also a lil' bit rough, n' as mo' of tha skillz is understood, it can even result up in versions of
\fBsmbd\fR(8)
and
\fBrpcclient\fR(1)
that is incompatible fo' some commandz or skillz\& fo' realz. Additionally, tha pimpers is bustin  reports ta Microsoft, n' problems found or reported ta Microsizzlez is fixed up in Service Packs, which may result up in incompatibilities\&.
.SH "VERSION"
.PP
This playa page is erect fo' version 3 of tha Samba suite\&.
.SH "AUTHOR"
.PP
Da original gangsta Samba software n' related utilitizzles was pimped by Andrew Tridgell\&. Right back up in yo muthafuckin ass. Samba is now pimped by tha Samba Crew as a Open Source project similar ta tha way tha Linux kernel is pimped\&.
.PP
Da original gangsta rpcclient playa page was freestyled by Matthew Geddes, Luke Kenneth Casson Leighton, n' rewritten by Gerald Carter\&. Da conversion ta DocBook fo' Samba 2\&.2 was done by Gerald Carter\&. Da conversion ta DocBook XML 4\&.2 fo' Samba 3\&.0 was done by Alexander Bokovoy\&.
