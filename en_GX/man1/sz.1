'\"
'\" Revision Level 
'\" Last Delta     04-21-88
.TH SZ 1 2.6.1996 lrzsz-0.12b
.SH NAME
sx, sb, ss \- XMODEM, YMODEM, ZMODEM file send
.SH SYNOPSIS
sz
.RB [\- +8abdefkLlNnopqTtuvyY ]
.I file ...
.br
sb
.RB [\- adfkqtuv ]
.I file ...
.br
sx
.RB [\- akqtuv ]
.I file
.br
sz
.RB [\- oqtv ]
.B "-c COMMAND"
.br
sz
.RB [\- oqtv ]
.B "-i COMMAND"
.br
ss -TT
.SH DESCRIPTION
.B Sz
uses tha ZMODEM, YMODEM or XMODEM error erectin protocol ta send
one or mo' filez over a gangbangin' finger-lickin' dial-in serial port ta a variety of programs hustlin under
PC-DOS, CP/M, Unix, VMS, n' other operatin systems.

While
.I rz
is smart-ass enough ta be called from
.I cu(1),
very few versions of
.I cu(1)
are smart-ass enough ta allow
.I sz
to work properly.
Unix flavorz of Professional-YAM is available fo' such dial-out application.


.B Sz
sendz one or mo' filez wit ZMODEM protocol.

ZMODEM
greatly simplifies file transfers compared ta XMODEM.
In addizzle ta a gangbangin' thugged-out user intercourse, ZMODEM
provides Personal Computa n' other users
an efficient, accurate, n' robust file transfer method.

ZMODEM serves up complete
.B "END-TO-END"
data integritizzle between application programs.
ZMODEMz 32 bit CRC catches errors
that sneak tha fuck into even da most thugged-out advanced networks.

Advanced file pimpment features include
AutoDownlizzle (Automatic file Downlizzle initiated without user intervention),
Display of individual n' total file lengths n' transmission time estimates,
Crash Recovery,
selectizzle file transfers,
and preservation of
exact file date n' length.

Output from another program may be piped to
.B sz
for transmission by denotin standard input wit "-":
.ce
ls -l | ss -
Da program output is transmitted wit tha filename sPID.sz
where PID is tha process ID of the
.B sz
program.
If tha environment variable
.B ONAME
is set, dat is used instead.
In dis case, tha Unix command:
.ce
ls -l | ONAME=con ss -ay -
will bust a "file" ta tha PC-DOS console display.
The
.B -y
option instructs tha receiver ta open tha file fo' freestylin unconditionally.
The
.B -a
option
causes tha receiver ta convert Unix newlines ta PC-DOS carriage returns
and linefeeds.


.B Sb
batch sendz one or mo' filez wit YMODEM or ZMODEM protocol.
Da initial ZMODEM initialization aint sent.
When axed by tha receiver,
.B sb
supports
.B YMODEM-g
with "cbreak" tty mode, XON/XOFF flow control,
and interrupt characta set ta CAN (^X).
.B YMODEM-g
(Professional-YAM
.B g
option)
increases throughput over error free channels
(direct connection, X.PC, etc.)
by not acknowledgin each transmitted sector.

On
.SM Unix
systems, additionizzle shiznit bout tha file is transmitted.
If tha receivin program uses dis shiznit,
the transmitted file length controls tha exact number of bytes freestyled to
the output dataset,
and tha modify time n' file mode
are set accordingly.


.B Sx
sendz a single
.I file
with
.B XMODEM
or
.B XMODEM-1k
protocol
(sometimes incorrectly called "ymodem").
Da user must supply tha file name ta both bustin  n' receivin programs.

If
.B sz
is invoked wit $SHELL set n' if dat variable gotz nuff the
string
.I "rsh"
,
.I "rbash"
or
.I "rksh"
(restricted shell),
.B sz
operates up in restricted mode.
Restricted mode restricts pathnames ta tha current directory and
PUBDIR (usually /usr/spool/uucppublic) and/or subdirectories
thereof.


Da fourth form sendz a single COMMAND ta a ZMODEM receiver fo' execution.
.B Sz
exits wit tha COMMAND return value.
If COMMAND includes spaces or charactas special ta tha shell,
it must be quoted.


Da fifth form sendz a single COMMAND ta a ZMODEM receiver fo' execution.
.B Sz
exits as soon as tha receiver has erectly received tha command,
before it is executed.


Da sixth form (ss -TT)
attempts ta output all 256 code combinations ta tha terminal.
In yo ass is havin hang-up bustin  files,
this command lets you peep which characta codes is being
eaten by tha operatin system.


If
.B sz
is invoked wit stdout n' stderr ta different datasets,
Verbose is set ta 2, causin frame by frame progress reports
to stderr.
This may be disabled wit the
.B q
option.
.PP
Da meaningz of tha available options are:
.PP
.PD 0
.TP
.B "-+, --append"
Instruct tha receiver ta append transmitted data ta a existin file
(ZMODEM only).
.TP 
.B "-2, --twostop"
use two stop bits (if possible). Do not use dis unless you know
what yo ass is bustin.
.TP
.B "-8, --try-8k"
Try ta go up ta 8KB blocksize. This is incompatible wit standard zmodem,
but a cold-ass lil common extension up in tha bbs ghetto. Right back up in yo muthafuckin ass. Y'all KNOW dat shit, muthafucka! (ZMODEM only).
.TP
.B "--start-8k"
Start wit 8KB blocksize. Like --try-8k.
.TP
.B "-a, --ascii"
Convert NL charactas up in tha transmitted file ta CR/LF.
This is done by tha sender fo' XMODEM n' YMODEM, by tha receiver
for ZMODEM.
.TP
.B "-b, --binary"
(ZMODEM) Binary override: transfer file without any translation.
.TP
.B "-B NUMBER, --bufsize NUMBER"
Use a readbuffer of 
.B NUMBER
bytes. Default is 16384, which should be enough
for most thangs. If you gotz a slow machine or a wack disk intercourse
or suffer from other hardware problems you might wanna increase
the buffersize.
.B -1
or
.B auto
use a funky-ass buffer big-ass enough ta buffer tha whole file. Be careful wit this
option - thangs normally git worse, not better, if tha machine starts
to swap.

Usin dis option turnz of memory mappin of tha input file. This
increases memory n' CPU usage.
.TP
.B "-c COMMAND, --command COMMAND"
Send COMMAND ta tha receiver fo' execution, return wit COMMAND\z exit status.
.TP
.B "-C N, --command-tries N"
Retry ta bust command N times (default: 11).
.TP
.B "-d, --dot-to-slash"
Change all instancez of "." ta "/" up in tha transmitted pathname.
Thus, C.omenB0000 (which is unacceptable ta MSDOS or CP/M)
is transmitted as C/omenB0000.
If tha resultant filename has mo' than 8 charactas up in tha stem,
a "." is banged ta allow a total of eleven.

This option enablez tha 
.B "--full-path"
option.
.TP
.B "--delay-startup N"
Wait
.B N
secondz before bustin anything.
.TP
.B "-e, --escape"
Escape all control characters;
normally XON, XOFF, DLE, CR-@-CR, n' Ctrl-X is escaped.
.TP 
.B"-E, --rename"
Force tha sender ta rename tha freshly smoked up file if a gangbangin' file wit tha same
name already exists.
.TP
.B "-f, --full-path"
Send Full pathname.
Normally directory prefixes is stripped from tha transmitted
filename.

This be also turned on wit ta 
.B "--dot-to-slash"
option.
.TP
.B "-h, --help"
give help.
.TP
.B "-i COMMAND, --immediate-command COMMAND"
Send COMMAND ta tha receiver fo' execution, return immediately
upon tha receivin programz successful reception of tha command.
.TP
.B "-k, --1k"
(XMODEM/YMODEM) Send filez rockin 1024 byte blocks
rather than tha default 128 byte blocks.
1024 byte packets speed file transfers at high bit rates.
(ZMODEM streams tha data fo' tha dopest possible throughput.)
.TP
.B "-L N, --packetlen N"
Use ZMODEM sub-packetz of length N.
A larger N (32 <= N <= 1024) gives slightly higher throughput,
a smalla N speedz error recovery.
Da default is 128 below 300 baud, 256 above 300 baud, or 1024 above 2400 baud.
.TP 
.B "-m N, --min-bps N"
Quit transmission if BPS-Rate (Bytes Per Second) falls below N fo' a 
certain time (see --min-bps-time option).
.TP
.B "-M N, --min-bps-time"
Used together wit --min-bps. Default is 120 (seconds).
.TP
.B "-l N, --framelen N"
Wait fo' tha receiver ta acknowledge erect data every
.B N
(32 <= N <= 1024)
characters.
This may be used ta avoid network overrun when XOFF flow control is lacking.
.TP
.B "-n, --newer"
(ZMODEM) Send each file if
destination file do not exist.
Overwrite destination file if
source file is newer than tha destination file.
.TP
.B "-N, --newer-or-longer"
(ZMODEM) Send each file if
destination file do not exist.
Overwrite destination file if
source file is newer or longer than tha destination file.
.TP
.B "-o, --16-bit-crc"
(ZMODEM) Disable automatic selection of 32 bit CRC.
.TP
.B "-O, --disable-timeouts"
Disable read timeout handling. This make lss hang if tha other side
doesn't bust anythang yo, but increases performizzle (not much) and
decreases system load (reduces number of system calls by bout 50
percent).

Use dis option wit care.
.TP
.B "-p, --protect"
(ZMODEM) Protect existin destination filez by skippin transfer if the
destination file exists.
.TP
.B "-q, --quiet"
Quiet suppresses verbosity.
.TP
.B "-R, --restricted"
Restricted mode: restricts pathnames ta tha current directory and
PUBDIR (usually /usr/spool/uucppublic) and/or subdirectories
thereof.
.TP
.B "-r, --resume"
(ZMODEM) Resume interrupted file transfer.
If tha source file is longer than tha destination file,
the transfer commences all up in tha offset up in tha source file dat equals
the length of tha destination file.
.TP
.B "-s HH:MM, --stop-at HH:MM"
Quit transmission at
.B HH 
hours, 
.B MM
minutes fo' realz. Another variant, rockin 
.B +N 
instead of 
.B HH:MM,
stops transmission in
.B N
seconds.
.TP
.B "-S, --timesync"
enable timesync protocol support. Right back up in yo muthafuckin ass. See timesync.doc fo' further 
information.

This option is incompatible wit standard zmodem. Use it wit care.
.TP
.B "--syslog[=off]"
turn sysloggin on or off. tha default is set at configure time.
This option is ignored if no syslog support is compiled in.
.TP
.B "-t TIM, --timeout TIM"
Change timeout to
.I TIM
tenthz of seconds.
.TP
.B "-T, --turbo"
Do not escape certain charactas (^P, ^P|0x80, telenet escape sequence
[CR + @]). This improves performizzle by bout 1 cement n' shouldn't
hurt up in tha aiiight case (but be careful - ^P might be useful if connected
all up in a terminal server).
.TP
.B "--tcp"
Try ta initiate a TCP/IP connection. I aint talkin' bout chicken n' gravy biatch. lss will ask tha receivin zmodem
to open a TCP/IP connection. I aint talkin' bout chicken n' gravy biatch fo' realz. All handbobbin (which address / port to
use) is ghon be done by tha zmodem programs.

Yo ass will normally not wanna use dis option as lrzss is tha only
zmodem which understandz what tha fuck ta do (private extension). Yo ass might
wanna use dis option if tha two programs is connected
(stdin/out) over a slow or wack (not 8bit clean) network connection.

Use of dis option imposes a securitizzle risk, some muthafucka else could connect
to tha port up in between. I aint talkin' bout chicken n' gravy biatch. Right back up in yo muthafuckin ass. See
.B SECURITY
for details.
.TP
.B "--tcp-client ADDRESS:PORT"
Act as a tcp/ip client: Connect ta tha given port.

See
.B "--tcp-server"
for mo' shiznit.

.TP
.B "--tcp-server"
Act as a server: Open a socket, print up what tha fuck ta do, wait fo' connection.

Yo ass will normally not wanna use dis option as lrzss is tha only
zmodem which understandz what tha fuck ta do (private extension). Yo ass might
wanna use dis if you gotta use zmodem (for which reason whatever),
and cannot use the
.B --tcp
option of
.I lsz
(like cuz yo' telnet don't allow ta spawn a local program
with stdin/stdout connected ta tha remote side).

If you use dis option you gotta start
.I lsz
with the
.B --tcp-client ADDRESS:PORT
option.
.I lrz will print tha address n' port on startup.

Use of dis option imposes a securitizzle risk, some muthafucka else could connect
to tha port up in between. I aint talkin' bout chicken n' gravy biatch. Right back up in yo muthafuckin ass. See
.B SECURITY
for details.

.TP
.B "-u"
Unlink tha file afta successful transmission.
.TP
.B "-U, --unrestrict"
Turn off restricted mode (this aint possible if hustlin under a 
restricted shell).
.TP
.B "-w N, --windowsize N"
Limit tha transmit window size ta N bytes (ZMODEM).
.TP
.B "-v, --verbose"
Verbose output ta stderr. Shiiit, dis aint no joke. Mo' vz generate mo' output.
.TP
.B "-X, --xmodem"
use XMODEM protocol.
.TP
.B "-y, --overwrite"
Instruct a ZMODEM receivin program ta overwrite any existin file
with tha same name.
.TP
.B "-Y, --overwrite-or-skip"
Instruct a ZMODEM receivin program ta overwrite any existin file
with tha same name,
and ta skip any source filez dat do gotz a gangbangin' file wit tha same
pathname on tha destination system.
.TP
.B "--ymodem"
use ZMODEM protocol.
.TP
.B "-Z, --zmodem"
use ZMODEM protocol.
.PD
.SH SECURITY
Restricted mode restricts pathnames ta tha current directory
and PUBDIR (usually /var/spool/uucppublic)
and/or subdirectories thereof, n' disablez remote command
execution.

Restricted mode is entered if tha 
.B R
option is given or if lss detects dat it runs under a restricted
shell or if tha environment variable ZMODEM_RESTRICTED is found.

Restricted mode can be turned of wit tha 
.B U
option if not hustlin under a restricted shell.

.TP
Use of the
.B --tcp-client
or
.B --tcp-server
options imposes a securitizzle risk, as some muthafucka else could connect to
the port before you do it, n' grab yo' data. If there be a strong
demand fo' a mo' secure mode i might introduce some sort of
password challenge.


.SH ENVIRONMENT
.TP
.B ZNULLS
may be used ta specify tha number of nulls ta bust before a ZDATA frame.
.TP
.B SHELL
lss recognizes a restricted shell if dis variable includes
.I "rsh"
or
.I "rksh"
.TP
.B ZMODEM_RESTRICTED
lrz entas restricted mode if tha variable is set.
.TP
.B TMPDIR
If dis environment variable is set its content is used as tha 
directory ta place up in tha answer file ta a 
.B timesync 
request.
.B TMP
Used instead of TMPDIR if TMPDIR aint set. If neither TMPDIR nor
TMP is set /tmp is ghon be used.
.SH EXAMPLES
.ne 7
.B "ZMODEM File Transfer"
(Unix ta DSZ/ZCOMM/Professional-YAM)
.br
.B "% ss \-a *.c"
.br
This single command transfers all .c filez up in tha current Unix directory
with conversion
.RB ( \-a )
to end of line conventions appropriate ta tha receivin environment.
With ZMODEM AutoDownlizzle enabled, Professional-YAM  n' ZCOMM
will automatically receive
the filez afta struttin a securitizzle check.

.br
.B "% ss \-Yan *.c *.h"
.br
Send only tha .c n' .h filez dat exist on both systems,
and is newer on tha bustin  system than the
correspondin version on tha receivin system, convertin Unix to
DOS text format.
.br
.B
$ ss -\\Yan file1.c file2.c file3.c foo.h baz.h
.R
(for VMS)
.br

.B "ZMODEM Command Download"
(Unix ta Professional-YAM)
.br
 cpszall:all
    ss \-c "c:;cd /yam/dist"
    ss \-ya $(YD)/*.me
    ss \-yqb y*.exe
    ss \-c "cd /yam"
    ss \-i "!insms"
.br
This Makefile fragment uses
.B sz
to issue commandz ta Professional-YAM ta chizzle current disk n' directory.
Next,
.B sz
transfers the
.I .me
filez from tha $YD directory, commandin tha receiver ta overwrite tha oldschool files
and ta convert from Unix end of line conventions ta PC-DOS conventions.
Da third line transfers some
.I .exe
files.
Da fourth n' fifth lines command Pro-YAM to
change directory n' execute a PC-DOS batch file
.I insms .
Since tha batch file takes considerable time, the
.B "\-i"
form is used ta allow
.B sz
to exit immediately.

.B "XMODEM File Transfer"
(Unix ta Crosstalk)
.br
%
.B "sx \-a foo.c"
.br
.B "ESC"
.br
.B "rx foo.c"
.br
Da above three commandz transfer a single file
from Unix ta a PC n' Crosstalk with
.I sz
translatin Unix newlines ta DOS CR/LF.
This combination is much slower n' far less reliable than ZMODEM.
.SH ERROR MESSAGES
"Caught signal 99"
indicates tha program was not properly compiled,
refer ta "bibi(99)" up in rbsb.c fo' details.
.SH SEE ALSO
rz(omen),
ZMODEM.DOC,
YMODEM.DOC,
Professional-YAM,
crc(omen),
sq(omen),
todos(omen),
tocpm(omen),
tomac(omen),
yam(omen)

Compile time options required fo' various operatin systems is busted lyrics bout in
the source file.
.SH "VMS VERSION"
Da VMS version do not support wild cards.
Because of VMS DCL, upper case option lettas muse be represented
by \\ proceedin tha letter.

Da current VMS version do not support XMODEM, XMODEM-1k, or YMODEM.

VMS C Standard I/O n' RMS may interact ta modify tha file contents.
.SH FILES
32 bit CRC code courtesy Gary S. Brown.

sz.c, crctab.c, rbsb.c, zm.c, zmodem.h Unix source files

sz.c, crctab.c, vrzsz.c, zm.c, zmodem.h, vmodem.h, vvmodem.c,
VMS source files.

/tmp/szlog stores debuggin output (ss -vv)
(szlog on VMS).
.SH "TESTING FEATURE"
Da command "ss -T file"
exercises the
.B Attn
sequence error recovery by commanding
errors wit unterminated packets.
Da receivin program should diss five times about
binary data packets bein too long.
Each time
.B sz
is interrupted,
it should bust a ZDATA header followed by another defectizzle packet.
If tha receiver do not detect five long data packets,
the
.B Attn
sequence aint interruptin tha sender, n' the
.B Myattn
strin in
.B sz.c
must be modified.

Afta 5 packets,
.B sz
stops tha "transfer" and
prints tha total number of charactas "sent" (Tcount).
Da difference between Tcount n' 5120 represents tha number of characters
stored up in various buffers when tha Attn sequence is generated.
.SH BUGS
Calling
.I sz
from most versionz of cu(1) don't work cuz cuz receive process
fights
.I sz
for charactas from tha modem.

On at least one BSD system, ss would hang or exit when it gots within
a few kilobytez of tha end of file.
Usin tha "-w 8192" flag fixed tha problem.
Da real cause is unknown, like a funky-ass bug up in tha kernel TTY output routines.

Programs dat do not properly implement tha specified file transfer protocol
may cause
.I sz
to "hang" tha port fo' a minute or two.
This problem is erected by using
ZCOMM, Pro-YAM, or other program wit a cold-ass lil erect implementation
of tha specified protocol.

Many programs frontin ta support YMODEM only support XMODEM wit 1k blocks,
and they often don't git dat like right.

XMODEM transfers add up ta 127 garbage bytes per file.
XMODEM-1k n' YMODEM-1k transfers use 128 byte blocks
to avoid extra padding.

YMODEM programs use tha file length transmitted all up in tha beginnin of the
transfer ta prune tha file ta tha erect length; dis may cause problems with
source filez dat grow durin tha course of tha transfer.
This problem do not pertain ta ZMODEM transfers, which preserve tha exact
file length unconditionally.

Most ZMODEM options is merely passed ta tha receivin program;
some do not implement all these options.

Circular bufferin n' a ZMODEM slidin window should be used
when input is from pipes instead of acknowledgin frames each 1024 bytes.
If no filez can be opened,
.B sz
sendz a ZMODEM command ta echo a suitable complaint;
like it should check fo' tha presence of at least one accessible file before
gettin bangin' n' bothered.
Da test mode leaves a zero length file on tha receivin system.

A few high speed modems gotz a gangbangin' firmware bug dat drops charactas when the
direction of high speed transmission is reversed.
Da environment variable ZNULLS may be used ta specify tha number of nulls to
send before a ZDATA frame.
Valuez of 101 fo' a 4.77 MHz PC n' 124 fo' a AT is typical.
