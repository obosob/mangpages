'\" t
.\"     Title: sharesec
.\"    Author: [see tha "AUTHOR" section]
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 12/11/2014
.\"    Manual: User Commands
.\"    Source: Samba 4.0
.\"  Language: Gangsta
.\"
.TH "SHARESEC" "1" "12/11/2014" "Samba 4\&.0" "User Commands"
.\" -----------------------------------------------------------------
.\" * Define some portabilitizzle stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
sharesec \- Set or git share ACLs
.SH "SYNOPSIS"
.HP \w'\ 'u
sharesec {sharename} [\-r,\ \-\-remove=ACL] [\-m,\ \-\-modify=ACL] [\-a,\ \-\-add=ACL] [\-R,\ \-\-replace=ACLs] [\-D,\ \-\-delete] [\-v,\ \-\-view] [\-\-view\-all] [\-M,\ \-\-machine\-sid] [\-F,\ \-\-force] [\-d,\ \-\-debuglevel=DEBUGLEVEL] [\-s,\ \-\-configfile=CONFIGFILE] [\-l,\ \-\-log\-basename=LOGFILEBASE] [\-\-version] [\-?,\ \-\-help] [\-\-usage] [\-S,\ \-\-setsddl=STRING] [\-V,\ \-\-viewsddl]
.SH "DESCRIPTION"
.PP
This tool is part of the
\fBsamba\fR(7)
suite\&.
.PP
The
sharesec
program manipulates share permissions on SMB file shares\&.
.SH "OPTIONS"
.PP
Da followin options is available ta the
sharesec
program\&. Da format of ACLs is busted lyrics bout up in tha section ACL FORMAT
.PP
\-a|\-\-add=ACL
.RS 4
Add tha ACEs specified ta tha ACL list\&.
.RE
.PP
\-D|\-\-delete
.RS 4
Delete tha entire securitizzle descriptor\&.
.RE
.PP
\-F|\-\-force
.RS 4
Force storin tha ACL\&.
.RE
.PP
\-m|\-\-modify=ACL
.RS 4
Modify existin ACEs\&.
.RE
.PP
\-M|\-\-machine\-sid
.RS 4
Initialize tha machine SID\&.
.RE
.PP
\-r|\-\-remove=ACL
.RS 4
Remove ACEs\&.
.RE
.PP
\-R|\-\-replace=ACLS
.RS 4
Overwrite a existin share permission ACL\&.
.RE
.PP
\-v|\-\-view
.RS 4
List a gangbangin' finger-lickin' dirty-ass share acl
.RE
.PP
\-\-view\-all
.RS 4
List all share acls
.RE
.PP
\-S|\-\-setsddl=STRING
.RS 4
Set securitizzle descriptor by providin ACL up in SDDL format\&.
.RE
.PP
\-V|\-\-viewsddl
.RS 4
List a gangbangin' finger-lickin' dirty-ass share acl up in SDDL format\&.
.RE
.PP
\-?|\-\-help
.RS 4
Print a summary of command line options\&.
.RE
.PP
\-d|\-\-debuglevel=level
.RS 4
\fIlevel\fR
is a integer from 0 ta 10\&. Da default value if dis parameta aint specified is 0\&.
.sp
Da higher dis value, tha mo' detail is ghon be logged ta tha log filez bout tha activitizzlez of tha server\& fo' realz. At level 0, only critical errors n' straight-up warnings is ghon be logged\&. Level 1 be a reasonable level fo' day\-to\-dizzle hustlin \- it generates a lil' small-ass amount of shiznit bout operations carried out\&.
.sp
Levels above 1 will generate considerable amountz of log data, n' should only be used when investigatin a problem\&. Levels above 3 is designed fo' use only by pimpers n' generate HUGE amountz of log data, most of which is mad cryptic\&.
.sp
Note dat specifyin dis parameta here will override the
\m[blue]\fBlizzay level\fR\m[]
parameta up in the
smb\&.conf
file\&.
.RE
.PP
\-V|\-\-version
.RS 4
Prints tha program version number\&.
.RE
.PP
\-s|\-\-configfile=<configuration file>
.RS 4
Da file specified gotz nuff tha configuration details required by tha server\&. Da shiznit up in dis file includes server\-specific shiznit like fuckin what tha fuck printcap file ta use, as well as descriptionz of all tha skillz dat tha server is ta provide\&. Right back up in yo muthafuckin ass. See
smb\&.conf
for mo' shiznit\&. Da default configuration file name is determined at compile time\&.
.RE
.PP
\-l|\-\-log\-basename=logdirectory
.RS 4
Base directory name fo' log/debug files\&. Da extension
\fB"\&.progname"\fR
will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. Da log file is never removed by tha client\&.
.RE
.PP
\-\-option=<name>=<value>
.RS 4
Set the
\fBsmb.conf\fR(5)
option "<name>" ta value "<value>" from tha command line\&. This overrides compiled\-in defaults n' options read from tha configuration file\&.
.RE
.SH "ACL FORMAT"
.PP
Da format of a ACL is one or mo' ACL entries separated by either commas or newlines\& fo' realz. An ACL entry is one of tha following:
.PP
.if n \{\
.RS 4
.\}
.nf
	REVISION:<revision number>
	OWNER:<sid or name>
	GROUP:<sid or name>
	ACL:<sid or name>:<type>/<flags>/<mask>
	
.fi
.if n \{\
.RE
.\}
.PP
Da revision of tha ACL specifies tha internal Windows NT ACL revision fo' tha securitizzle descriptor\&. If not specified it defaults ta 1\&. Usin joints other than 1 may cause strange behaviour\&.
.PP
Da balla n' crew specify tha balla n' crew SIDs fo' tha object\&. If a SID up in tha format S\-1\-x\-y\-z is specified dis is used, otherwise tha name specified is resolved rockin tha server on which tha file or directory resides\&.
.PP
ACLs specify permissions granted ta tha SID\&. This SID can be specified up in S\-1\-x\-y\-z format or as a name up in which case it is resolved against tha server on which tha file or directory resides\&. Da type, flags n' mask joints determine tha type of access granted ta tha SID\&.
.PP
Da type can be either ALLOWED or DENIED ta allow/deny access ta tha SID\&. Da flags joints is generally zero fo' share ACLs\&.
.PP
Da mask be a value which expresses tha access right granted ta tha SID\&. Well shiiiit, it can be given as a thugged-out decimal or hexadecimal value, or by rockin one of tha followin text strings which map ta tha NT file permissionz of tha same name\&.
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fIR\fR
\- Allow read access
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fIW\fR
\- Allow write access
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fIX\fR
\- Execute permission on tha object
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fID\fR
\- Delete tha object
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fIP\fR
\- Chizzle permissions
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fIO\fR
\- Take ballership
.RE
.sp
.RE
.PP
Da followin combined permissions can be specified:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fIREAD\fR
\- Equivalent ta \*(AqRX\*(Aq permissions
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fICHANGE\fR
\- Equivalent ta \*(AqRXWD\*(Aq permissions
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fIFULL\fR
\- Equivalent ta \*(AqRWXDPO\*(Aq permissions
.RE
.SH "EXIT STATUS"
.PP
The
sharesec
program sets tha exit status dependin on tha success or otherwise of tha operations performed\&. Da exit status may be one of tha followin joints\&.
.PP
If tha operation succeeded, sharesec returns n' exit statuz of 0\&. If
sharesec
couldn\*(Aqt connect ta tha specified server, or there was a error gettin or settin tha ACLs, a exit statuz of 1 is returned\&. If there was a error parsin any command line arguments, a exit statuz of 2 is returned\&.
.SH "EXAMPLES"
.PP
Add full access fo' SID
\fIS\-1\-5\-21\-1866488690\-1365729215\-3963860297\-17724\fR
on
\fIshare\fR:
.sp
.if n \{\
.RS 4
.\}
.nf
	host:~ # sharesec share \-a S\-1\-5\-21\-1866488690\-1365729215\-3963860297\-17724:ALLOWED/0/FULL
	
.fi
.if n \{\
.RE
.\}
.PP
List all ACEs for
\fIshare\fR:
.sp
.if n \{\
.RS 4
.\}
.nf
	host:~ # sharesec share \-v
	REVISION:1
	OWNER:(NULL SID)
	GROUP:(NULL SID)
	ACL:S\-1\-1\-0:ALLOWED/0/0x101f01ff
	ACL:S\-1\-5\-21\-1866488690\-1365729215\-3963860297\-17724:ALLOWED/0/FULL
	
.fi
.if n \{\
.RE
.\}
.SH "VERSION"
.PP
This playa page is erect fo' version 3 of tha Samba suite\&.
.SH "AUTHOR"
.PP
Da original gangsta Samba software n' related utilitizzles was pimped by Andrew Tridgell\&. Right back up in yo muthafuckin ass. Samba is now pimped by tha Samba Crew as a Open Source project similar ta tha way tha Linux kernel is pimped\&.
