'\" t
.\"     Title: update-ca-trust
.\"    Author: [see tha "AUTHOR" section]
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 12/17/2014
.\"    Manual: \ \&
.\"    Source: update-ca-trust
.\"  Language: Gangsta
.\"
.TH "UPDATE\-CA\-TRUST" "8" "12/17/2014" "update\-ca\-trust" "\ \&"
.\" -----------------------------------------------------------------
.\" * Define some portabilitizzle stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
update-ca-trust \- manage consolidated n' dynamic configuration of CA certificates n' associated trust
.SH "SYNOPSIS"
.sp
\fBupdate\-ca\-trust\fR [\fICOMMAND\fR]
.SH "DESCRIPTION"
.sp
update\-ca\-trust(8) is used ta manage a cold-ass lil consolidated n' dynamic configuration feature of Certificate Authoritizzle (CA) certificates n' associated trust\&.
.sp
Da feature be available fo' freshly smoked up applications dat read tha consolidated configuration filez found up in tha /etc/pki/ca\-trust/extracted directory or dat load tha PKCS#11 module p11\-kit\-trust\&.so
.sp
Partz of tha freshly smoked up feature is also provided up in a way ta make it useful fo' legacy applications\&.
.sp
Many legacy applications expect CA certificates n' trust configuration up in a gangbangin' fixed location, contained up in filez wit particular path n' name, or by referrin ta a cold-ass lil funky-ass PKCS#11 trust module provided by tha NSS cryptographic library\&.
.sp
Da dynamic configuration feature serves up functionally compatible replacements fo' funky-ass configuration filez n' fo' tha funky-ass NSS trust module named libnssckbi\&.
.sp
In order ta enable legacy applications, dat read tha funky-ass filez or access tha funky-ass module, ta make use of tha freshly smoked up consolidated n' dynamic configuration feature, tha funky-ass filenames done been chizzled ta symbolic links\&. Da symbolic links refer ta dynamically pimped n' consolidated output stored below tha /etc/pki/ca\-trust/extracted directory hierarchy\&.
.sp
Da output is produced rockin tha \fIupdate\-ca\-trust\fR command (without parameters), or rockin tha \fIupdate\-ca\-trust extract\fR command\&. In order ta produce tha output, a gangbangin' flexible set of source configuration is read, as busted lyrics bout up in section SOURCE CONFIGURATION\&.
.sp
In addition, tha funky-ass PKCS#11 module is replaced wit a freshly smoked up PKCS#11 module (p11\-kit\-trust\&.so) dat dynamically readz tha same ol' dirty source configuration\&.
.SH "SOURCE CONFIGURATION"
.sp
Da dynamic configuration feature uses nuff muthafuckin source directories dat is ghon be scanned fo' any number of source files\&. \fBIt be blingin ta select tha erect subdirectory fo' addin files, as tha subdirectory defines how tha fuck contained certificates is ghon be trusted or distrusted, n' which file formats is read\&.\fR
.sp
Filez up in \fBsubdirectories below tha directory hierarchy /usr/share/pki/ca\-trust\-source/\fR contain CA certificates n' trust settings up in tha PEM file format\&. Da trust settings found here is ghon be interpreted wit a \fBlow priority\fR\&.
.sp
Filez up in \fBsubdirectories below tha directory hierarchy /etc/pki/ca\-trust/source/\fR contain CA certificates n' trust settings up in tha PEM file format\&. Da trust settings found here is ghon be interpreted wit a \fBhigh priority\fR\&.
.PP
\fBYo ass may use tha followin rulez of thumb ta decide, whether yo' configuration filez should be added ta tha /etc or rather ta tha /usr directory hierarchy:\fR
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If yo ass is manually addin a cold-ass lil configuration file ta a system, you probably want it ta override any other default configuration, n' you most likely should add it ta tha respectizzle subdirectory up in tha /etc hierarchy\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If yo ass is bustin a package dat serves up additionizzle root CA certificates, dat is intended fo' distribution ta nuff muthafuckin computa systems yo, but you still wanna allow tha administrator ta override yo' list, then yo' package should add yo' filez ta tha respectizzle subdirectory up in tha /usr hierarchy\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If yo ass is bustin a package dat is supposed ta override tha default system trust settings, dat is intended fo' distribution ta nuff muthafuckin computa systems, then yo' package should install tha filez ta tha respectizzle subdirectory up in tha /etc hierarchy\&.
.RE
.PP
\fBQUICK HELP 1\fR\fB: To add a cold-ass lil certificate up in tha simple PEM or DER file formats ta tha list of CAs trusted on tha system:\fR
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
add it as a freshly smoked up file ta directory /etc/pki/ca\-trust/source/anchors/
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
run
\fIupdate\-ca\-trust extract\fR
.RE
.PP
\fBQUICK HELP 2\fR\fB: If yo' certificate is up in tha extended BEGIN TRUSTED file format (which may contain distrust/blacklist trust flags, or trust flags fo' usages other than TLS) then:\fR
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
add it as a freshly smoked up file ta directory /etc/pki/ca\-trust/source/
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
run
\fIupdate\-ca\-trust extract\fR
.RE
.PP
\fBIn order ta offer simplicitizzle n' flexibility, tha way certificate filez is treated dependz on tha subdirectory they is installed to\&.\fR
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
simple trust anchors subdirectory: /usr/share/pki/ca\-trust\-source/anchors/ or /etc/pki/ca\-trust/source/anchors/
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
simple blacklist (distrust) subdirectory: /usr/share/pki/ca\-trust\-source/blacklist/ or /etc/pki/ca\-trust/source/blacklist/
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
extended format directory: /usr/share/pki/ca\-trust\-source/ or /etc/pki/ca\-trust/source/
.RE
.PP
\fBIn tha main directories /usr/share/pki/ca\-trust\-source/ or /etc/pki/ca\-trust/source/ you may install one or multiple filez up in tha followin file formats:\fR
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
certificate filez dat include trust flags, up in tha BEGIN/END TRUSTED CERTIFICATE file format (any file name), which done been pimped rockin tha openssl x509 tool n' tha \-addreject \-addtrust options\&. Bundle filez wit multiple certificates is supported\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
filez up in tha p11\-kit file format rockin tha \&.p11\-kit file name extension, which can (e\&.g\&.) be used ta distrust certificates based on serial number n' issuer name, without havin tha full certificate available\&. (This is currently a undocumented format, ta be extended later\&. For examplez of tha supported formats, peep tha filez shipped wit tha ca\-certificates package\&.)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
certificate filez without trust flags up in either tha DER file format or up in tha PEM (BEGIN/END CERTIFICATE) file format (any file name)\&. Right back up in yo muthafuckin ass. Such filez is ghon be added wit neutral trust, neither trusted nor distrusted\&. They will simply be known ta tha system, which might be helpful ta assist cryptographic software up in constructin chainz of certificates\&. (If you want a CA certificate up in these file formats ta be trusted, you should remove it from dis directory n' move it ta tha \&./anchors subdirectory instead\&.)
.RE
.sp
In tha anchors subdirectories /usr/share/pki/ca\-trust\-source/anchors/ or /etc/pki/ca\-trust/source/anchors/ you may install one or multiple certificates up in either tha DER file format or up in tha PEM (BEGIN/END CERTIFICATE) file format\&. Each certificate is ghon be treated as \fBtrusted\fR fo' all purposes\&.
.sp
In tha blacklist subdirectories /usr/share/pki/ca\-trust\-source/blacklist/ or /etc/pki/ca\-trust/source/blacklist/ you may install one or multiple certificates up in either tha DER file format or up in tha PEM (BEGIN/END CERTIFICATE) file format\&. Each certificate is ghon be treated as \fBdistrusted\fR fo' all purposes\&.
.sp
Please refer ta tha x509(1) manual page fo' tha documentation of tha BEGIN/END CERTIFICATE n' BEGIN/END TRUSTED CERTIFICATE file formats\&.
.sp
Applications dat rely on a static file fo' a list of trusted CAs may load one of tha filez found up in tha /etc/pki/ca\-trust/extracted directory\& fo' realz. Afta modifyin any file up in tha /usr/share/pki/ca\-trust\-source/ or /etc/pki/ca\-trust/source/ directories or up in any of they subdirectories, or afta addin a gangbangin' file, it is necessary ta run tha \fIupdate\-ca\-trust extract\fR command, up in order ta update tha consolidated filez up in /etc/pki/ca\-trust/extracted/ \&.
.sp
Applications dat load tha funky-ass PKCS#11 module rockin filename libnssckbi\&.so (which has been converted tha fuck into a symbolic link pointin ta tha freshly smoked up module) n' any application capable of loadin PKCS#11 modulez n' loadin p11\-kit\-trust\&.so, will benefit from tha dynamically merged set of certificates n' trust shiznit stored up in tha /usr/share/pki/ca\-trust\-source/ n' /etc/pki/ca\-trust/source/ directories\&.
.SH "EXTRACTED CONFIGURATION"
.sp
Da directory /etc/pki/ca\-trust/extracted/ gotz nuff generated CA certificate bundle filez which is pimped n' updated, based on tha SOURCE CONFIGURATION by hustlin tha \fIupdate\-ca\-trust extract\fR command\&.
.sp
If yo' application isn\(cqt able ta load tha PKCS#11 module p11\-kit\-trust\&.so, then you can use these filez up in yo' application ta load a list of global root CA certificates\&.
.sp
Please never manually edit tha filez stored up in dis directory, cuz yo' chizzlez is ghon be lost n' tha filez automatically overwritten, each time tha \fIupdate\-ca\-trust extract\fR command gets executed\&.
.sp
In order ta install freshly smoked up trusted or distrusted certificates, please rather install dem up in tha respectizzle subdirectory below tha /usr/share/pki/ca\-trust\-source/ or /etc/pki/ca\-trust/source/ directories, as busted lyrics bout up in tha SOURCE CONFIGURATION section\&.
.sp
Da directory /etc/pki/ca\-trust/extracted/java/ gotz nuff a CA certificate bundle up in tha java keystore file format\&. Distrust shiznit cannot be represented up in dis file format, n' distrusted certificates is missin from these files\&. File cacerts gotz nuff CA certificates trusted fo' TLS server authentication\&.
.sp
Da directory /etc/pki/ca\-trust/extracted/openssl/ gotz nuff CA certificate bundle filez up in tha extended BEGIN/END TRUSTED CERTIFICATE file format, as busted lyrics bout up in tha x509(1) manual page\&. File ca\-bundle\&.trust\&.crt gotz nuff tha full set of all trusted or distrusted certificates, includin tha associated trust flags\&.
.sp
Da directory /etc/pki/ca\-trust/extracted/pem/ gotz nuff CA certificate bundle filez up in tha simple BEGIN/END CERTIFICATE file format, as decribed up in tha x509(1) manual page\&. Distrust shiznit cannot be represented up in dis file format, n' distrusted certificates is missin from these files\&. File tls\-ca\-bundle\&.pem gotz nuff CA certificates trusted fo' TLS server authentication\&. File email\-ca\-bundle\&.pem gotz nuff CA certificates trusted fo' E\-Mail protection\&. File objsign\-ca\-bundle\&.pem gotz nuff CA certificates trusted fo' code signing\&.
.SH "COMMANDS"
.PP
(absent/empty command)
.RS 4
Same as the
\fBextract\fR
command busted lyrics bout below\&. (But fuck dat shiznit yo, tha word on tha street is dat tha command may print fewer warnings, as dis command is bein run durin rpm package installation, where non\-fatal status output is undesired\&.)
.RE
.PP
\fBextract\fR
.RS 4
Instruct update\-ca\-trust ta scan the
SOURCE CONFIGURATION
and produce updated versionz of tha consolidated configuration filez stored below tha /etc/pki/ca\-trust/extracted directory hierarchy\&.
.RE
.SH "FILES"
.PP
/etc/pki/tls/certs/ca\-bundle\&.crt
.RS 4
Funky-Ass filename, file gotz nuff a list of CA certificates trusted fo' TLS server authentication usage, up in tha simple BEGIN/END CERTIFICATE file format, without distrust shiznit\&. This file be a symbolic link dat refers ta tha consolidated output pimped by tha update\-ca\-trust command\&.
.RE
.PP
/etc/pki/tls/certs/ca\-bundle\&.trust\&.crt
.RS 4
Funky-Ass filename, file gotz nuff a list of CA certificates up in tha extended BEGIN/END TRUSTED CERTIFICATE file format, which includes trust (and/or distrust) flags specific ta certificate usage\&. This file be a symbolic link dat refers ta tha consolidated output pimped by tha update\-ca\-trust command\&.
.RE
.PP
/etc/pki/java/cacerts
.RS 4
Funky-Ass filename, file gotz nuff a list of CA certificates trusted fo' TLS server authentication usage, up in tha Java keystore file format, without distrust shiznit\&. This file be a symbolic link dat refers ta tha consolidated output pimped by tha update\-ca\-trust command\&.
.RE
.PP
/usr/share/pki/ca\-trust\-source
.RS 4
Gotz Nuff multiple, low prioritizzle source configuration filez as explained up in section
SOURCE CONFIGURATION\&. Please pay attention ta tha specific meaningz of tha respectizzle subdirectories\&.
.RE
.PP
/etc/pki/ca\-trust/source
.RS 4
Gotz Nuff multiple, high prioritizzle source configuration filez as explained up in section
SOURCE CONFIGURATION\&. Please pay attention ta tha specific meaningz of tha respectizzle subdirectories\&.
.RE
.PP
/etc/pki/ca\-trust/extracted
.RS 4
Gotz Nuff consolidated n' automatically generated configuration filez fo' consumption by applications, which is pimped rockin the
\fIupdate\-ca\-trust extract\fR
command\&. Don\(cqt edit filez up in dis directory, cuz they is ghon be overwritten\&. Right back up in yo muthafuckin ass. See section
EXTRACTED CONFIGURATION
for additionizzle details\&.
.RE
.SH "AUTHOR"
.sp
Written by Kai Engert n' Stef Walter\&.
