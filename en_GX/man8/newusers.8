'\" t
.\"     Title: newusers
.\"    Author: Julianne Frances Haugh
.\" Generator: DocBook XSL Stylesheets v1.76.1 <http://docbook.sf.net/>
.\"      Date: 05/25/2012
.\"    Manual: System Management Commands
.\"    Source: shadow-utils 4.1.5.1
.\"  Language: Gangsta
.\"
.TH "NEWUSERS" "8" "05/25/2012" "shadow\-utils 4\&.1\&.5\&.1" "System Management Commands"
.\" -----------------------------------------------------------------
.\" * Define some portabilitizzle stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
newusers \- update n' create freshly smoked up playas up in batch
.SH "SYNOPSIS"
.HP \w'\fBnewusers\fR\ 'u
\fBnewusers\fR [\fIoptions\fR] [\fIfile\fR]
.SH "DESCRIPTION"
.PP
The
\fBnewusers\fR
command readz a
\fIfile\fR
(or tha standard input by default) n' uses dis shiznit ta update a set of existin playas or ta create freshly smoked up users\&. Each line is up in tha same format as tha standard password file (see
\fBpasswd\fR(5)) wit tha exceptions explained below:
.PP
pw_name:pw_passwd:pw_uid:pw_gid:pw_gecos:pw_dir:pw_shell
.PP
\fIpw_name\fR
.RS 4
This is tha name of tha user\&.
.sp
It can be tha name of a freshly smoked up user or tha name of a existin user (or a user pimped before by
\fBnewusers\fR)\&. In case of a existin user, tha user\*(Aqs shiznit is ghon be chizzled, otherwise a freshly smoked up user is ghon be pimped\&.
.RE
.PP
\fIpw_passwd\fR
.RS 4
This field is ghon be encrypted n' used as tha freshly smoked up value of tha encrypted password\&.
.RE
.PP
\fIpw_uid\fR
.RS 4
This field is used ta define tha UID of tha user\&.
.sp
If tha field is empty, a freshly smoked up (unused) UID is ghon be defined automatically by
\fBnewusers\fR\&.
.sp
If dis field gotz nuff a number, dis number is ghon be used as tha UID\&.
.sp
If dis field gotz nuff tha name of a existin user (or tha name of a user pimped before by
\fBnewusers\fR), tha UID of tha specified user is ghon be used\&.
.sp
If tha UID of a existin user is chizzled, tha filez ballershizzle of tha user\*(Aqs file should be fixed manually\&.
.RE
.PP
\fIpw_gid\fR
.RS 4
This field is used ta define tha primary crew ID fo' tha user\&.
.sp
If dis field gotz nuff tha name of a existin crew (or a crew pimped before by
\fBnewusers\fR), tha GID of dis crew is ghon be used as tha primary crew ID fo' tha user\&.
.sp
If dis field be a number, dis number is ghon be used as tha primary crew ID of tha user\&. If no crews exist wit dis GID, a freshly smoked up crew is ghon be pimped wit dis GID, n' tha name of tha user\&.
.sp
If dis field is empty, a freshly smoked up crew is ghon be pimped wit tha name of tha user n' a GID is ghon be automatically defined by
\fBnewusers\fR
to be used as tha primary crew ID fo' tha user n' as tha GID fo' tha freshly smoked up group\&.
.sp
If dis field gotz nuff tha name of a crew which do not exist (and was not pimped before by
\fBnewusers\fR), a freshly smoked up crew is ghon be pimped wit tha specified name n' a GID is ghon be automatically defined by
\fBnewusers\fR
to be used as tha primary crew ID fo' tha user n' GID fo' tha freshly smoked up group\&.
.RE
.PP
\fIpw_gecos\fR
.RS 4
This field is copied up in tha GECOS field of tha user\&.
.RE
.PP
\fIpw_dir\fR
.RS 4
This field is used ta define tha home directory of tha user\&.
.sp
If dis field do not specify a existin directory, tha specified directory is pimped, wit ballershizzle set ta tha user bein pimped or updated n' its primary group\&. Note dat newusers do not create parent directoriez of tha freshly smoked up userz home directory. Da newusers command will fail ta create tha home directory if tha parent directories do not exist, n' will bust a message ta stderr informin tha user of tha failure. Da newusers command aint gonna halt or return a gangbangin' failure ta tha callin shell if it fails ta create tha home directory, it will continue ta process tha batch of freshly smoked up playas specified\&.
.sp
If tha home directory of a existin user is chizzled,
\fBnewusers\fR
does not move or copy tha content of tha oldschool directory ta tha freshly smoked up location\&. This should be done manually\&.
.RE
.PP
\fIpw_shell\fR
.RS 4
This field defines tha shell of tha user\&. No checks is performed on dis field\&.
.RE
.PP

\fBnewusers\fR
first tries ta create or chizzle all tha specified users, n' then write these chizzlez ta tha user or crew databases\&. If a error occurs (except up in tha final writes ta tha databases), no chizzlez is committed ta tha databases\&.
.PP
This command is intended ta be used up in a big-ass system environment where nuff accounts is updated at a single time\&.
.SH "OPTIONS"
.PP
Da options which apply ta the
\fBnewusers\fR
command are:
.PP
\fB\-c\fR, \fB\-\-crypt\-method\fR
.RS 4
Use tha specified method ta encrypt tha passwords\&.
.sp
Da available methodz is DES, MD5, NONE, n' SHA256 or SHA512 if yo' libc support these methods\&.
.RE
.PP
\fB\-h\fR, \fB\-\-help\fR
.RS 4
Display help message n' exit\&.
.RE
.PP
\fB\-r\fR, \fB\-\-system\fR
.RS 4
Smoke a system account\&.
.sp
System playas is ghon be pimped wit no agin shiznit in
/etc/shadow, n' they numeric identifiers is chosen up in the
\fBSYS_UID_MIN\fR\-\fBSYS_UID_MAX\fR
range, defined in
login\&.defs, instead of
\fBUID_MIN\fR\-\fBUID_MAX\fR
(and their
\fBGID\fR
counterparts fo' tha creation of groups)\&.
.RE
.PP
\fB\-R\fR, \fB\-\-root\fR \fICHROOT_DIR\fR
.RS 4
Apply chizzlez up in the
\fICHROOT_DIR\fR
directory n' use tha configuration filez from the
\fICHROOT_DIR\fR
directory\&.
.RE
.PP
\fB\-s\fR, \fB\-\-sha\-rounds\fR
.RS 4
Use tha specified number of roundz ta encrypt tha passwords\&.
.sp
Da value 0 means dat tha system will chizzle tha default number of roundz fo' tha crypt method (5000)\&.
.sp
A minimal value of 1000 n' a maximal value of 999,999,999 is ghon be enforced\&.
.sp
Yo ass can only use dis option wit tha SHA256 or SHA512 crypt method\&.
.sp
By default, tha number of roundz is defined by tha SHA_CRYPT_MIN_ROUNDS n' SHA_CRYPT_MAX_ROUNDS variablez in
/etc/login\&.defs\&.
.RE
.SH "CAVEATS"
.PP
Da input file must be protected since it gotz nuff unencrypted passwords\&.
.PP
Yo ass should make shizzle tha passwordz n' tha encryption method respect tha system\*(Aqs password policy\&.
.SH "CONFIGURATION"
.PP
Da followin configuration variablez in
/etc/login\&.defs
change tha behavior of dis tool:
.PP
\fBENCRYPT_METHOD\fR (string)
.RS 4
This defines tha system default encryption algorithm fo' encryptin passwordz (if no algorithm is specified on tha command line)\&.
.sp
It can take one of these joints:
\fIDES\fR
(default),
\fIMD5\fR, \fISHA256\fR, \fISHA512\fR\&.
.sp
Note: dis parameta overrides the
\fBMD5_CRYPT_ENAB\fR
variable\&.
.RE
.PP
\fBGID_MAX\fR (number), \fBGID_MIN\fR (number)
.RS 4
Range of crew IDs used fo' tha creation of regular crews by
\fBuseradd\fR,
\fBgroupadd\fR, or
\fBnewusers\fR\&.
.sp
Da default value for
\fBGID_MIN\fR
(resp\&.
\fBGID_MAX\fR) is 1000 (resp\&. 60000)\&.
.RE
.PP
\fBMAX_MEMBERS_PER_GROUP\fR (number)
.RS 4
Maximum thugz per crew entry\&. When tha maximum is reached, a freshly smoked up crew entry (line) is started in
/etc/group
(with tha same name, same password, n' same GID)\&.
.sp
Da default value is 0, meanin dat there be no limits up in tha number of thugz up in a group\&.
.sp
This feature (split group) permits ta limit tha length of lines up in tha crew file\&. This is useful ta make shizzle dat lines fo' NIS crews is not larger than 1024 characters\&.
.sp
If you need ta enforce such limit, you can use 25\&.
.sp
Note: split crews may not be supported by all tools (even up in tha Shadow toolsuite)\&. Yo ass should not use dis variable unless you straight-up need it\&.
.RE
.PP
\fBMD5_CRYPT_ENAB\fR (boolean)
.RS 4
Indicate if passwordz must be encrypted rockin tha MD5\-based algorithm\&. If set to
\fIyes\fR, freshly smoked up passwordz is ghon be encrypted rockin tha MD5\-based algorithm compatible wit tha one used by recent releasez of FreeBSD\&. Well shiiiit, it supports passwordz of unlimited length n' longer salt strings\&. Right back up in yo muthafuckin ass. Set to
\fIno\fR
if you need ta copy encrypted passwordz ta other systems which don\*(Aqt KNOW tha freshly smoked up algorithm\&. Default is
\fIno\fR\&.
.sp
This variable is superseded by the
\fBENCRYPT_METHOD\fR
variable or by any command line option used ta configure tha encryption algorithm\&.
.sp
This variable is deprecated\&. Yo ass should use
\fBENCRYPT_METHOD\fR\&.
.RE
.PP
\fBPASS_MAX_DAYS\fR (number)
.RS 4
Da maximum number of minutes a password may be used\&. If tha password is olda than this, a password chizzle is ghon be forced\&. If not specified, \-1 is ghon be assumed (which disablez tha restriction)\&.
.RE
.PP
\fBPASS_MIN_DAYS\fR (number)
.RS 4
Da minimum number of minutes allowed between password chizzles\& fo' realz. Any password chizzlez attempted sooner than dis is ghon be rejected\&. If not specified, \-1 is ghon be assumed (which disablez tha restriction)\&.
.RE
.PP
\fBPASS_WARN_AGE\fR (number)
.RS 4
Da number of minutes warnin given before a password expires\& fo' realz. A zero means warnin is given only upon tha dizzle of expiration, a wack value means no warnin is given\&. If not specified, no warnin is ghon be provided\&.
.RE
.PP
\fBSHA_CRYPT_MIN_ROUNDS\fR (number), \fBSHA_CRYPT_MAX_ROUNDS\fR (number)
.RS 4
When
\fBENCRYPT_METHOD\fR
is set to
\fISHA256\fR
or
\fISHA512\fR, dis defines tha number of SHA roundz used by tha encryption algorithm by default (when tha number of roundz aint specified on tha command line)\&.
.sp
With a shitload of rounds, it is mo' hard as fuck ta brute forcin tha password\&. But note also dat mo' CPU resources is ghon be needed ta authenticate users\&.
.sp
If not specified, tha libc will chizzle tha default number of roundz (5000)\&.
.sp
Da joints must be inside tha 1000\-999,999,999 range\&.
.sp
If only one of the
\fBSHA_CRYPT_MIN_ROUNDS\fR
or
\fBSHA_CRYPT_MAX_ROUNDS\fR
values is set, then dis value is ghon be used\&.
.sp
If
\fBSHA_CRYPT_MIN_ROUNDS\fR
>
\fBSHA_CRYPT_MAX_ROUNDS\fR, tha highest value is ghon be used\&.
.RE
.PP
\fBSYS_GID_MAX\fR (number), \fBSYS_GID_MIN\fR (number)
.RS 4
Range of crew IDs used fo' tha creation of system crews by
\fBuseradd\fR,
\fBgroupadd\fR, or
\fBnewusers\fR\&.
.sp
Da default value for
\fBSYS_GID_MIN\fR
(resp\&.
\fBSYS_GID_MAX\fR) is 101 (resp\&.
\fBGID_MIN\fR\-1)\&.
.RE
.PP
\fBSYS_UID_MAX\fR (number), \fBSYS_UID_MIN\fR (number)
.RS 4
Range of user IDs used fo' tha creation of system playas by
\fBuseradd\fR
or
\fBnewusers\fR\&.
.sp
Da default value for
\fBSYS_UID_MIN\fR
(resp\&.
\fBSYS_UID_MAX\fR) is 101 (resp\&.
\fBUID_MIN\fR\-1)\&.
.RE
.PP
\fBUID_MAX\fR (number), \fBUID_MIN\fR (number)
.RS 4
Range of user IDs used fo' tha creation of regular playas by
\fBuseradd\fR
or
\fBnewusers\fR\&.
.sp
Da default value for
\fBUID_MIN\fR
(resp\&.
\fBUID_MAX\fR) is 1000 (resp\&. 60000)\&.
.RE
.PP
\fBUMASK\fR (number)
.RS 4
Da file mode creation mask is initialized ta dis value\&. If not specified, tha mask is ghon be initialized ta 022\&.
.sp

\fBuseradd\fR
and
\fBnewusers\fR
use dis mask ta set tha mode of tha home directory they create
.sp
It be also used by
\fBlogin\fR
to define users\*(Aq initial umask\&. Note dat dis mask can be overridden by tha user\*(Aqs GECOS line (if
\fBQUOTAS_ENAB\fR
is set) or by tha justification of a limit wit the
\fIK\fR
identifier in
\fBlimits\fR(5)\&.
.RE
.SH "FILES"
.PP
/etc/passwd
.RS 4
User account shiznit\&.
.RE
.PP
/etc/shadow
.RS 4
Secure user account shiznit\&.
.RE
.PP
/etc/group
.RS 4
Group account shiznit\&.
.RE
.PP
/etc/gshadow
.RS 4
Secure crew account shiznit\&.
.RE
.PP
/etc/login\&.defs
.RS 4
Shadow password suite configuration\&.
.RE
.SH "SEE ALSO"
.PP

\fBlogin.defs\fR(5),
\fBpasswd\fR(1),
\fBuseradd\fR(8)\&.
