'\" t
.\"     Title: pm-action
.\"    Author: Slim Tim Dijkstra <tim@famdijkstra.org>
.\" Generator: DocBook XSL Stylesheets v1.75.2 <http://docbook.sf.net/>
.\"      Date: Apr 25, 2007
.\"    Manual: pm-utils User Manual
.\"    Source: pm-action
.\"  Language: Gangsta
.\"
.TH "PM\-ACTION" "8" "Apr 25, 2007" "pm-action" "pm-utils User Manual"
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
pm-action \- Suspend or Hibernate yo' computer
.SH "SYNOPSIS"
.HP \w'\fBpm\-hibernate\fR\ 'u
\fBpm\-hibernate\fR [\-\-help]
.HP \w'\fBpm\-suspend\fR\ 'u
\fBpm\-suspend\fR [\-\-quirk\-*] [\-\-help]
.HP \w'\fBpm\-suspend\-hybrid\fR\ 'u
\fBpm\-suspend\-hybrid\fR [\-\-quirk\-*] [\-\-help]
.SH "DESCRIPTION"
.PP
This manual page documents briefly the
\fBpm\-action\fR,
\fBpm\-hibernate\fR,
\fBpm\-suspend\fR
and
\fBpm\-suspend\-hybrid\fR
commands\&. This manual page was originally freestyled fo' the
Debian(TM)
distribution n' has been adopted by tha pm\-utils project\&.
.PP
These commandz can be used ta put tha machine up in a chill state\&. Da precise way how tha fuck dis is done can be hyped up by installin executablez n' configuration snippets\&. For some options external programs is needed\&.
.PP
These commandz will probably be called by
\fBUPower\fR
or
\fBhald\fR
when triggered ta do so by a program up in a thugged-out desktop session such as
\fBgnome\-power\-manager\fR\&. Callin dem from tha command line be also possible yo, but it aint guaranteed dat all programs up in yo' desktop session keep hustlin as expected\&.
.PP
\fBpm\-suspend\fR
.RS 4
Durin suspend most devices is shutdown, n' system state is saved up in RAM\&. Da system still requires juice up in dis state\&. Most modern systems require 3 ta 5 secondz ta enta n' leave suspend, n' most laptops can stay up in suspend mode fo' 1 ta 3 minutes before exhaustin they battery\&.
.RE
.PP
\fBpm\-hibernate\fR
.RS 4
Durin hibernate tha system is straight-up powered off, n' system state is saved ta disk\&. Da system do not require power, n' can stay up in hibernate mode indefinitely\&. Most modern systems require 15 ta 45 secondz ta enta n' leave hibernate, n' enterin n' leavin hibernate takes longer when you have mo' memory\&.
.RE
.PP
\fBpm\-suspend\-hybrid\fR
.RS 4
Hybrid\-suspend is tha process where tha system do every last muthafuckin thang it need ta hibernate yo, but suspendz instead of shuttin down\&. This means dat yo' computa can raise up quicker than fo' aiiight hibernation if you do not run outta power, n' you can resume even if you run outta power\&. s2both(8) be a hybrid\-suspend implementation\&.
.RE
.SH "OPTIONS"
.PP
On some hardware puttin tha vizzle card up in tha suspend state n' recoverin from it needz some special quirk handling\&. With tha \-\-quirk\-* optionz of the
\fBpm\-suspend\fR
and
\fBpm\-suspend\-hybrid\fR
commandz you can select which quirks should be used\&.
.PP
If
\fBpm\-suspend\fR,
\fBpm\-hibernate\fR, or
\fBpm\-suspend\-hybrid\fR
are invoked without any commandline parameters, they will try ta grab tha erect quirks from tha internal quirk database\&.
.PP
\fB\-\-quirk\-dpms\-on\fR
.RS 4
This option forces tha vizzle hardware ta turn on tha screen durin resume\&. Most vizzle adaptas turn on tha screen theyselves yo, but if you git a funky-ass blank screen on resume dat can be turned back on by movin tha mouse or typin then dis option may be useful\&.
.RE
.PP
\fB\-\-quirk\-dpms\-suspend\fR
.RS 4
This option forces tha vizzle hardware ta turn off tha screen when suspending\&. Most vizzle adaptas seem ta do dis erectly yo, but some do not, which wastes fuckin shitloadz of power\&. If yo' screen is still on afta successfully suspendin you may need ta use dis option\&.
.RE
.PP
\fB\-\-quirk\-none\fR
.RS 4
This option disablez quirks.
.RE
.PP
\fB\-\-quirk\-radeon\-off\fR
.RS 4
This option forces Radeon hardware ta turn off tha display durin suspend n' turn it back on durin resume\&. Yo ass only need ta do dis on some oldschool ThinkPadz of tha \'30 series (T30, X31, R32,\&.\&.\&. ) wit Radeon vizzle hardware\&.
.RE
.PP
\fB\-\-quirk\-reset\-brigthness\fR
.RS 4
This option resets display brightnizz durin resume (i.e. sets tha brightnizz ta 0 n' returns it ta tha previous value).
.RE
.PP
\fB\-\-quirk\-s3\-bios\fR
.RS 4
This option calls tha vizzle BIOS durin S3 resume\&. Unfortunately, it aint always allowed ta booty-call tha vizzle BIOS at dis point, so sometimes addin dis option can straight-up break resume on some systems\&.
.RE
.PP
\fB\-\-quirk\-s3\-mode\fR
.RS 4
This option initializes tha vizzle card tha fuck into a VGA text mode, n' then uses tha BIOS ta set tha vizzle mode\&. On some systems S3 BIOS only initializes tha vizzle BIOS ta text mode, n' so both S3 BIOS n' S3 MODE is needed\&.
.RE
.PP
\fB\-\-quirk\-vbe\-post\fR
.RS 4
This option will attempt ta reinitialize tha vizzle card when resumin from suspend, rockin tha same code tha system BIOS uses at boot up in order ta initialize tha vizzle hardware\&. Not all vizzle cardz need this, n' rockin dis option on systems where it aint needed can cause a system ta lock up when resuming\&.
.RE
.PP
\fB\-\-quirk\-vbemode\-restore\fR
.RS 4
This option will save n' restore tha current VESA mode which may be necessary ta avoid X screen corruption\&. Usin dis feature on Intel graphics hardware is probably a wack idea\&.
.RE
.PP
\fB\-\-quirk\-vbestate\-restore\fR
.RS 4
This option saves n' restores some low level hardware state which may be invalid afta suspend\&.
.RE
.PP
\fB\-\-quirk\-vga\-mode\-3\fR
.RS 4
This option will try ta force tha vizzle card tha fuck into a standard text mode on resume\&.
.RE
.PP
\fB\-\-quirk\-save\-pci\fR
.RS 4
Save tha PCI config space fo' tha VGA card\&.
.RE
.PP
\fB\-\-store\-quirks\-as\-lkw\fR
.RS 4
Save tha quirks tha vizzle adaptor required by
\fBpm\-suspend\fR
or
\fBpm\-suspend\-hybrid\fR
as a \&.quirkdb file dat is specific ta dis system\&. Da file is ghon be saved in
/etc/pm/last_known_working\&.quirkdb\&. This parameta will only save tha actual quirks dat was used ta successfully suspend/resume a system, n' is ghon be specific ta tha exact configuration of dat system, includin tha vizzle hardware, vizzle driver, n' whether or not kernel modesettin was used\&.
.RE
.SH "FILES"
.PP
/etc/pm/config\&.d
.RS 4
Da filez up in dis directory is evaluated up in C sort order\&. These filez can be provided by individual packages outside of pm\-utils\&. If a global configuration variable is set, tha value set ta is ghon be appended ta tha previous value\&. If any other variable is set, it is ghon be ignored\&. Da syntax is simply: VAR_NAME=value\&. Right back up in yo muthafuckin ass. See tha CONFIGURATION VARIABLES section fo' valid variablez defined by pm\-utils\&. External packages can define others, peep they respectizzle documentation fo' mo' shiznit\&.
.RE
.PP
/etc/pm/sleep\&.d, /usr/lib/pm\-utils/sleep\&.d
.RS 4
Programs up in these directories (called hooks) is combined n' executed up in C sort order before suspend n' hibernate wit as argument \'suspend\' or \'hibernate\'\& fo' realz. Afterwardz they is called up in reverse order wit argument \'resume\' n' \'thaw\' respectively\&. If both directories contain a similar named file, tha one in
/etc/pm/sleep\&.d
will git preference\&. Well shiiiit, it is possible ta disable a hook up in tha distribution directory by puttin a non\-executable file in
/etc/pm/sleep\&.d, or by addin it ta tha HOOK_BLACKLIST configuration variable\&.
.RE
.PP
/var/log/pm\-suspend\&.log
.RS 4
Da log file shows what tha fuck was done on tha last suspend/hibernate n' resume/thaw\&.
.RE
.SH "SLEEP HOOK ORDERING CONVENTION"
.PP
00 \- 49
.RS 4
User n' most package supplied hooks\&. If a hook assumes dat all of tha usual skillz n' userspace infrastructure is still hustlin, it should be here\&.
.RE
.PP
50 \- 74
.RS 4
Service handlin hooks\& yo. Hooks dat start or stop a steez belong up in dis range\& fo' realz. At or before 50, hooks can assume dat all skillz is still enabled\&.
.RE
.PP
75 \- 89
.RS 4
Module n' non\-core hardware handling\&. If a hook need ta load/unload a module, or if it need ta place non\-video hardware dat would otherwise break suspend or hibernate tha fuck into a safe state, it belongs up in dis range\& fo' realz. At or before 75, hooks can assume all modulez is still loaded\&.
.RE
.PP
90 \- 99
.RS 4
Reserved fo' critical suspend hooks\&.
.RE
.SH "CONFIGURATION VARIABLES"
.PP
Configuration variablez defined by pm\-utils\&. These can be set up in any file in
/etc/pm/config\&.d/\&.
.PP
\fBSLEEP_MODULE [=kernel]\fR
.RS 4
Da default suspend backend ta use\&. Valid joints are:
.PP
\fIkernel\fR
.RS 4
Da built\-in kernel suspend/resume support\&. Use dis if not a god damn thang else is supported on yo' system\&. Da kernel backend be always used if not a god damn thang else be available\&.
.RE
.PP
\fIuswsusp\fR
.RS 4
If yo' system has support fo' tha userspace suspend programs (s2ram/s2disk/s2both), then use this\&.
.RE
.PP
\fItuxonice\fR
.RS 4
If yo' system has support fo' tuxonice/suspend2, use this\&.
.RE
.sp
.RE
.PP
\fBHIBERNATE_RESUME_POST_VIDEO [=no]\fR
.RS 4
If vizzle should be posted afta hibernate, just like afta suspend\&. Yo ass should not normally need ta set this\&.
.RE
.PP
\fBSUSPEND_MODULES\fR
.RS 4
Space separated list of modulez ta unload before suspend\&.
.RE
.PP
\fBHOOK_BLACKLIST\fR
.RS 4
Space separated list of hooks dat should be disabled\&.
.RE
.PP
\fBHIBERNATE_MODE\fR
.RS 4
Default method ta juice down tha system when hibernating\&. If not set, tha system will use tha kernel default as a thugged-out default value\&. Peep /sys/power/disk fo' valid joints\&. Da default value is ghon be surrounded by [square brackets]\&.
.RE
.PP
\fBNEED_CLOCK_SYNC\fR
.RS 4
If yo' system clock drifts across a suspend/resume or hibernate/thaw cycle, you should set dis ta true\&. This will cause pm\-utils ta synchronize tha system clock whenever goin all up in a chill/wake cycle all up in tha expense of makin suspend/resume take longer\&.
.RE
.PP
\fBPM_HIBERNATE_DELAY [=900]\fR
.RS 4
If yo ass is rockin kernel suspend/resume n' invoke
\fBpm\-suspend\-hybrid\fR, dis environment variable controls how tha fuck nuff secondz tha system will wait afta goin tha fuck into suspend before wakin back up n' hibernating\&. By default, dis is set ta 900 secondz (15 minutes)\&.
.RE
.SH "RETURN VALUES"
.PP
Return joints less than 128 mean dat pm\-action failed before tryin ta put tha system up in tha axed juice savin state\& fo' realz. A return value of 128 means dat pm\-action tried ta put tha machine up in tha axed juice state but failed\& fo' realz. A return value pimped outa than 128 means pm\-action encountered a error n' also failed ta enta tha axed juice savin state\&.
.SH "DEBUGGING"
.PP
Debuggin suspend/resume can be a tricky process, n' is covered up in mo' detail in
/usr/share/doc/pm\-utils/README\&.debugging\&.
.SH "BUGS"
.PP
Da upstream
BTS
can be found at
\m[blue]\fB\%https://bugs.freedesktop.org/\fR\m[]\&. Right back up in yo muthafuckin ass. Select \'pm\-utils\' as product\&.
.SH "SEE ALSO"
.PP

\fBs2ram\fR(8),
\fBs2disk\fR(8),
\fBs2both\fR(8),
\fBpm-is-supported\fR(1),
\fBpm-powersave\fR(8),
\fBvbetool\fR(8),
\fBradeontool\fR(8)
.SH "AUTHOR"
.PP
\fBSlim Tim Dijkstra\fR <\&tim@famdijkstra\&.org\&>
.RS 4
Manpage author\&.
.RE
.SH "COPYRIGHT"
.br
Copyright \(co 2007 Slim Tim Dijkstra
.br
.PP
This manual page was originally freestyled fo' the
Debian(TM)
system, n' has been adopted by tha pm\-utils project\&.
.PP
Permission is granted ta copy, distribute and/or modify dis document under tha termz of the
GNU
General Public License, Version 2 or (at yo' option) any lata version published by tha Jacked Software Foundation\&.
.sp
