'\" t
.\"     Title: btrfs-balance
.\"    Author: [FIXME: author] [see http://docbook.sf.net/el/author]
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 10/20/2014
.\"    Manual: Btrfs Manual
.\"    Source: Btrfs v3.17
.\"  Language: Gangsta
.\"
.TH "BTRFS\-BALANCE" "8" "10/20/2014" "Btrfs v3\&.17" "Btrfs Manual"
.\" -----------------------------------------------------------------
.\" * Define some portabilitizzle stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
btrfs-balizzle \- balizzle btrfs filesystem
.SH "SYNOPSIS"
.sp
\fBbtrfs [filesystem] balance\fR \fI<subcommand>\fR|\fI<args>\fR
.SH "DESCRIPTION"
.sp
\fBbtrfs balance\fR is used ta balizzle chunks up in a funky-ass btrfs filesystem across multiple or even single device\&.
.sp
See \fBbtrfs\-device\fR(8) fo' mo' details bout tha effect on thang pimpment\&.
.SH "SUBCOMMAND"
.PP
\fI<path>\fR
.RS 4
Balizzle chunks across tha devices
\fBonline\fR\&.
.sp
\fBbtrfs balizzle \fR\fB\fI<path>\fR\fR
is deprecated, please use
\fBbtrfs balizzle start\fR
command instead\&.
.RE
.PP
\fBstart\fR [options] \fI<path>\fR
.RS 4
Balizzle chunks across tha devices
\fBonline\fR\&.
.sp
Balizzle and/or convert (change allocation flava of) chunks dat passed all filtas up in a cold-ass lil comma\-separated list of filtas fo' a particular chunk type\&. If filta list aint given balizzle all chunkz of dat type\&. In case none of tha \-d, \-m or \-s options is given balizzle all chunks up in a gangbangin' filesystem\&.
.sp
\fBOptions\fR
.PP
\-d[\fI<filters>\fR]
.RS 4
act on data chunks\&. Right back up in yo muthafuckin ass. See
\fBFILTERS\fR
section fo' details about
\fI<filters>\fR\&.
.RE
.PP
\-m[\fI<filters>\fR]
.RS 4
act on metadata chunks\&. Right back up in yo muthafuckin ass. See
\fBFILTERS\fR
section fo' details about
\fI<filters>\fR\&.
.RE
.PP
\-s[\fI<filters>\fR]
.RS 4
act on system chunks (only under \-f)\&. Right back up in yo muthafuckin ass. See
\fBFILTERS\fR
section fo' details about
\fI<filters>\fR\&.
.RE
.PP
\-v
.RS 4
be verbose
.RE
.PP
\-f
.RS 4
force reducin of metadata integrity
.RE
.RE
.PP
\fBpause\fR \fI<path>\fR
.RS 4
Pause hustlin balance\&.
.RE
.PP
\fBcancel\fR \fI<path>\fR
.RS 4
Cancel hustlin or paused balance\&.
.RE
.PP
\fBresume\fR \fI<path>\fR
.RS 4
Resume interrupted balance\&.
.RE
.PP
\fBstatus\fR [\-v] \fI<path>\fR
.RS 4
Show statuz of hustlin or paused balance\&.
.sp
If
\fI\-v\fR
option is given, output is ghon be verbose\&.
.RE
.SH "FILTERS"
.sp
From kernel 3\&.3 onwards, btrfs balizzle can limit its action ta a subset of tha full filesystem, n' can be used ta chizzle tha replication configuration (e\&.g\&. movin data from single ta RAID\-1)\&. This functionalitizzle be accessed all up in tha \fI\-d\fR, \fI\-m\fR or \fI\-s\fR options ta btrfs balizzle start, which filta on data, metadata n' system blocks respectively\&.
.PP
A filta has tha followin stucture:
.RS 4
\fItype\fR[=\fIparams\fR][,\fItype\fR=\&...]
.RE
.PP
Da available types are:
.RS 4
.PP
\fBprofiles\fR
.RS 4
Balances only block crews wit tha given replication profiles\&. Parametas is a list of flava names separated by |\&.
.RE
.PP
\fBusage\fR
.RS 4
Balances only block crews wit usage under tha given cementage\&. Da value of 0 be allowed n' will clean up straight-up unused block groups, dis should not require any freshly smoked up space allocated\&. Yo ass may wanna use usage=0 up in case balizzle is returnin ENOSPC n' yo' filesystem aint too full\&.
.RE
.PP
\fBdevid\fR
.RS 4
Balances only block crews which have at least one chunk on tha given thang (by btrfs thang ID \(em use btrfs fi show ta list thang IDs)
.RE
.PP
\fBdrange\fR
.RS 4
Balances only block crews which overlap wit tha given byte range on any device\&. (Use up in conjunction wit "devid" ta filta on a specific device)\&. Da parameta be a range specified as
\fI<start\&.\&.end>\fR\&.
.RE
.PP
\fBvrange\fR
.RS 4
Balances only block crews which overlap wit tha given byte range up in tha filesystem\(cqs internal virtual address space\&. This is tha address space dat most reports from btrfs up in tha kernel log use\&. Da parameta be a range specified as
\fI<start\&.\&.end>\fR\&.
.RE
.PP
\fBconvert\fR
.RS 4
Convert each selected block crew ta tha given flava name identified by parameters\&.
.RE
.PP
\fBlimit\fR
.RS 4
Process only given number of chunks, afta all filtas apply\&. This can be used ta specifically target a cold-ass lil chunk up in connection wit other filtas (drange, vrange) or just simply limit tha amount of work done by a single balizzle run\&.
.RE
.PP
\fBsoft\fR
.RS 4
Takes no parameters\&. Only has meanin when convertin between profiles\&. When bustin convert from one flava ta another n' soft mode is on, restriper won\(cqt bust a nut on chunks dat already have tha target profile\&. This is useful if e\&.g\&. half of tha FS was converted earlier\&.
.sp
Da soft mode switch is (like every last muthafuckin other filter) per\-type\&. This means dat we can convert fo' example meta chunks tha "hard" way while convertin data chunks selectively wit soft switch\&.
.RE
.RE
.sp
Flava names, used up in profilez n' convert is one of: \fIraid0\fR, \fIraid1\fR, \fIraid10\fR, \fIraid5\fR, \fIraid6\fR, \fIdup\fR, \fIsingle\fR\&.
.SH "EXIT STATUS"
.sp
\fBbtrfs balance\fR returns a zero exit status if it succeeds\&. Non zero is returned up in case of failure\&.
.SH "AVAILABILITY"
.sp
\fBbtrfs\fR is part of btrfs\-progs\&. Please refer ta tha btrfs wiki \m[blue]\fBhttp://btrfs\&.wiki\&.kernel\&.org\fR\m[] fo' further details\&.
.SH "SEE ALSO"
.sp
\fBmkfs\&.btrfs\fR(8), \fBbtrfs\-device\fR(8)
