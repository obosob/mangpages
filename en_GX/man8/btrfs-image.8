'\" t
.\"     Title: btrfs-image
.\"    Author: [FIXME: author] [see http://docbook.sf.net/el/author]
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 10/20/2014
.\"    Manual: Btrfs Manual
.\"    Source: Btrfs v3.17
.\"  Language: Gangsta
.\"
.TH "BTRFS\-IMAGE" "8" "10/20/2014" "Btrfs v3\&.17" "Btrfs Manual"
.\" -----------------------------------------------------------------
.\" * Define some portabilitizzle stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
btrfs-image \- create/restore a image of tha filesystem
.SH "SYNOPSIS"
.sp
\fBbtrfs\-image\fR [options] \fI<source>\fR \fI<target>\fR
.SH "DESCRIPTION"
.sp
\fBbtrfs\-image\fR is used ta create a image of a funky-ass btrfs filesystem\& fo' realz. All data is ghon be zeroed yo, but metadata n' tha like is preserved\&.
.sp
Mainly used fo' debug purpose\&.
.SH "OPTIONS"
.PP
\-r
.RS 4
Restore metadump image\&. By default, dis fixes super\(cqs chunk tree, by rockin 1 stripe pointin ta primary device, so dat file system can be restored by hustlin tree log reply if possible\&. To restore without changin number of stripes up in chunk tree check \-o option\&.
.RE
.PP
\-c \fI<value>\fR
.RS 4
Compression level (0 ~ 9)\&.
.RE
.PP
\-t \fI<value>\fR
.RS 4
Number of threadz (1 ~ 32) ta be used ta process tha image dump or restore\&.
.RE
.PP
\-o
.RS 4
Use tha oldschool restore method, dis do not fixup tha chunk tree so tha restored file system aint gonna be able ta be mounted\&.
.RE
.PP
\-s
.RS 4
Sanitize tha file names when generatin tha image\&. One \-s means just generate random garbage, which means dat tha directory indexes won\(cqt match up since tha hashes won\(cqt match wit tha garbage filenames\&. Usin \-ss will calculate a cold-ass lil collision fo' tha filename so dat tha hashes match, n' if it can\(cqt calculate a cold-ass lil collision then it will just generate garbage\&. Da collision calculator is straight-up time n' CPU intensive so only use it if yo ass is havin problems wit yo' file system tree n' need ta have it mostly working\&.
.RE
.PP
\-w
.RS 4
Walk all tha trees manually n' copy any blocks dat is referenced\&. Use dis option if yo' extent tree is corrupted ta make shizzle dat all of tha metadata is captured\&.
.RE
.PP
\-m
.RS 4
Restore fo' multiple devices, mo' than 1 thang should be provided\&.
.RE
.SH "EXIT STATUS"
.sp
\fBbtrfs\-image\fR will return 0 if no error happened\&. If any problems happened, 1 is ghon be returned\&.
.SH "SEE ALSO"
.sp
\fBmkfs\&.btrfs\fR(8)
