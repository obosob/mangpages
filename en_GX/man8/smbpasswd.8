'\" t
.\"     Title: smbpasswd
.\"    Author: [see tha "AUTHOR" section]
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 12/11/2014
.\"    Manual: System Administration tools
.\"    Source: Samba 4.0
.\"  Language: Gangsta
.\"
.TH "SMBPASSWD" "8" "12/11/2014" "Samba 4\&.0" "System Administration tools"
.\" -----------------------------------------------------------------
.\" * Define some portabilitizzle stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
smbpasswd \- chizzle a user\*(Aqs SMB password
.SH "SYNOPSIS"
.HP \w'\ 'u
smbpasswd [\-a] [\-c\ <config\ file>] [\-x] [\-d] [\-e] [\-D\ debuglevel] [\-n] [\-r\ <remote\ machine>] [\-R\ <name\ resolve\ order>] [\-m] [\-U\ username[%password]] [\-h] [\-s] [\-w\ pass] [\-W] [\-i] [\-L] [username]
.SH "DESCRIPTION"
.PP
This tool is part of the
\fBsamba\fR(7)
suite\&.
.PP
Da smbpasswd program has nuff muthafuckin different functions, dependin on whether it is run by the
\fIroot\fR
user or not\&. When run as a aiiight user it allows tha user ta chizzle tha password used fo' they SMB sessions on any machines dat store SMB passwords\&.
.PP
By default (when run wit no arguments) it will attempt ta chizzle tha current user\*(Aqs SMB password on tha local machine\&. This is similar ta tha way the
passwd(1)
program works\&.
smbpasswd
differs from how tha fuck tha passwd program works however up in dat it is not
\fIsetuid root\fR
but works up in a cold-ass lil client\-server mode n' communicates wit a locally hustlin
\fBsmbd\fR(8)\& fo' realz. As a cold-ass lil consequence up in order fo' dis ta succeed tha smbd daemon must be hustlin on tha local machine\&. On a UNIX machine tha encrypted SMB passwordz is probably stored up in the
\fBsmbpasswd\fR(5)
file\&.
.PP
When run by a ordinary user wit no options, smbpasswd will prompt dem fo' they oldschool SMB password n' then ask dem fo' they freshly smoked up password twice, ta ensure dat tha freshly smoked up password was typed erectly\&. No passwordz is ghon be echoed on tha screen whilst bein typed\&. If you gotz a funky-ass blank SMB password (specified by tha strang "NO PASSWORD" up in tha smbpasswd file) then just press tha <Enter> key when axed fo' yo' oldschool password\&.
.PP
smbpasswd can also be used by a aiiight user ta chizzle they SMB password on remote machines, like fuckin Windows NT Primary Domain Controllers\&. Right back up in yo muthafuckin ass. See tha (\fI\-r\fR) and
\fI\-U\fR
options below\&.
.PP
When run by root, smbpasswd allows freshly smoked up playas ta be added n' deleted up in tha smbpasswd file, as well as allows chizzlez ta tha attributez of tha user up in dis file ta be made\&. When run by root,
smbpasswd
accesses tha local smbpasswd file directly, thus enablin chizzlez ta be made even if smbd aint hustlin\&.
.SH "OPTIONS"
.PP
\-a
.RS 4
This option specifies dat tha username followin should be added ta tha local smbpasswd file, wit tha freshly smoked up password typed (type <Enter> fo' tha oldschool password)\&. This option is ignored if tha username followin already exists up in tha smbpasswd file n' it is treated like a regular chizzle password command\&. Note dat tha default passdb backendz require tha user ta already exist up in tha system password file (usually
/etc/passwd), else tha request ta add tha user will fail\&.
.sp
This option is only available when hustlin smbpasswd as root\&.
.RE
.PP
\-c
.RS 4
This option can be used ta specify tha path n' file name of the
smb\&.conf
configuration file when it is blingin ta use other than tha default file n' / or location\&.
.RE
.PP
\-x
.RS 4
This option specifies dat tha username followin should be deleted from tha local smbpasswd file\&.
.sp
This option is only available when hustlin smbpasswd as root\&.
.RE
.PP
\-d
.RS 4
This option specifies dat tha username followin should be
\fBdisabled\fR
in tha local smbpasswd file\&. This is done by freestylin a
\fB\*(AqD\*(Aq\fR
flag tha fuck into tha account control space up in tha smbpasswd file\&. Once dis is done all attempts ta authenticate via SMB rockin dis username will fail\&.
.sp
If tha smbpasswd file is up in tha \*(Aqold\*(Aq format (pre\-Samba 2\&.0 format) there is no space up in tha user\*(Aqs password entry ta write dis shiznit n' tha command will FAIL\&. Right back up in yo muthafuckin ass. See
\fBsmbpasswd\fR(5)
for details on tha \*(Aqold\*(Aq n' freshly smoked up password file formats\&.
.sp
This option is only available when hustlin smbpasswd as root\&.
.RE
.PP
\-e
.RS 4
This option specifies dat tha username followin should be
\fBenabled\fR
in tha local smbpasswd file, if tha account was previously disabled\&. If tha account was not disabled dis option has no effect\&. Once tha account is enabled then tha user is ghon be able ta authenticate via SMB once again\&.
.sp
If tha smbpasswd file is up in tha \*(Aqold\*(Aq format, then
smbpasswd
will FAIL ta enable tha account\&. Right back up in yo muthafuckin ass. See
\fBsmbpasswd\fR(5)
for details on tha \*(Aqold\*(Aq n' freshly smoked up password file formats\&.
.sp
This option is only available when hustlin smbpasswd as root\&.
.RE
.PP
\-D debuglevel
.RS 4
\fIdebuglevel\fR
is a integer from 0 ta 10\&. Da default value if dis parameta aint specified is zero\&.
.sp
Da higher dis value, tha mo' detail is ghon be logged ta tha log filez bout tha activitizzlez of smbpasswd\& fo' realz. At level 0, only critical errors n' straight-up warnings is ghon be logged\&.
.sp
Levels above 1 will generate considerable amountz of log data, n' should only be used when investigatin a problem\&. Levels above 3 is designed fo' use only by pimpers n' generate HUGE amountz of log data, most of which is mad cryptic\&.
.RE
.PP
\-n
.RS 4
This option specifies dat tha username followin should have they password set ta null (i\&.e\&. a funky-ass blank password) up in tha local smbpasswd file\&. This is done by freestylin tha strang "NO PASSWORD" as tha straight-up original gangsta part of tha straight-up original gangsta password stored up in tha smbpasswd file\&.
.sp
Note dat ta allow playas ta logon ta a Samba server once tha password has been set ta "NO PASSWORD" up in tha smbpasswd file tha administrator must set tha followin parameta up in tha [global] section of the
smb\&.conf
file :
.sp
null passwordz = yes
.sp
This option is only available when hustlin smbpasswd as root\&.
.RE
.PP
\-r remote machine name
.RS 4
This option allows a user ta specify what tha fuck machine they wish ta chizzle they password on\&. Without dis parameta smbpasswd defaults ta tha local host\&. The
\fIremote machine name\fR
is tha NetBIOS name of tha SMB/CIFS server ta contact ta attempt tha password chizzle\&. This name is resolved tha fuck into a IP address rockin tha standard name resolution mechanizzle up in all programz of tha Samba suite\&. Right back up in yo muthafuckin ass. See the
\fI\-R name resolve order\fR
parameta fo' details on changin dis resolvin mechanism\&.
.sp
Da username whose password is chizzled is dat of tha current UNIX logged on user\&. Right back up in yo muthafuckin ass. See the
\fI\-U username\fR
parameta fo' details on changin tha password fo' a gangbangin' finger-lickin' different username\&.
.sp
Note dat if changin a Windows NT Domain password tha remote machine specified must be tha Primary Domain Controlla fo' tha domain (Backup Domain Controllaz only gotz a read\-only copy of tha user account database n' aint gonna allow tha password chizzle)\&.
.sp
\fINote\fR
that Windows 95/98 aint gots a real password database so it aint possible ta chizzle passwordz specifyin a Win95/98 machine as remote machine target\&.
.RE
.PP
\-R name resolve order
.RS 4
This option allows tha user of smbpasswd ta determine what tha fuck name resolution skillz ta use when lookin up tha NetBIOS name of tha host bein connected to\&.
.sp
Da options is :"lmhosts", "host", "wins" n' "bcast"\&. They cause names ta be resolved as bigs up:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fBlmhosts\fR: Lookup a IP address up in tha Samba lmhosts file\&. If tha line up in lmhosts has no name type attached ta tha NetBIOS name (see the
\fBlmhosts\fR(5)
for details) then any name type matches fo' lookup\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fBhost\fR: Do a standard host name ta IP address resolution, rockin tha system
/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operatin system depended fo' instizzle on IRIX or Solaris dis may be controlled by the
/etc/nsswitch\&.conf
file)\&. Note dat dis method is only used if tha NetBIOS name type bein queried is tha 0x20 (server) name type, otherwise it is ignored\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fBwins\fR: Query a name wit tha IP address listed up in the
\fIwins server\fR
parameter\&. If no WINS server has been specified dis method is ghon be ignored\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
\fBbcast\fR: Do a funky-ass broadcast on each of tha known local intercourses listed up in the
\fIinterfaces\fR
parameter\&. This is tha least reliable of tha name resolution methodz as it dependz on tha target host bein on a locally connected subnet\&.
.RE
.sp
.RE
Da default order is
lmhosts, host, wins, bcast
and without dis parameta or any entry up in the
\fBsmb.conf\fR(5)
file tha name resolution methodz is ghon be attempted up in dis order\&.
.RE
.PP
\-m
.RS 4
This option  drops some lyrics ta smbpasswd dat tha account bein chizzled be a MACHINE account\&. Currently dis is used when Samba is bein used as a NT Primary Domain Controller\&.
.sp
This option is only available when hustlin smbpasswd as root\&.
.RE
.PP
\-U username
.RS 4
This option may only be used up in conjunction wit the
\fI\-r\fR
option\&. When changin a password on a remote machine it allows tha user ta specify tha user name on dat machine whose password is ghon be chizzled\&. Well shiiiit, it is present ta allow playas whoz ass have different user names on different systems ta chizzle these passwords\&.
.RE
.PP
\-h
.RS 4
This option prints tha help strang for
smbpasswd, selectin tha erect one fo' hustlin as root or as a ordinary user\&.
.RE
.PP
\-s
.RS 4
This option causes smbpasswd ta be silent (i\&.e\&. not issue prompts) n' ta read its oldschool n' freshly smoked up passwordz from standard input, rather than from
/dev/tty
(like the
passwd(1)
program do)\&. This option is ta aid playas freestylin scripts ta drive smbpasswd
.RE
.PP
\-w password
.RS 4
This parameta is only available if Samba has been compiled wit LDAP support\&. The
\fI\-w\fR
switch is used ta specify tha password ta be used wit the
\m[blue]\fBldap admin dn\fR\m[]\&. Note dat tha password is stored up in the
secrets\&.tdb
(or
secrets\&.ntdb) n' is keyed off of tha admin\*(Aqs DN\&. This means dat if tha value of
\fIldap admin dn\fR
ever chizzles, tha password will need ta be manually updated as well\&.
.RE
.PP
\-W
.RS 4
NOTE:
This option is same as "\-w" except dat tha password should be entered rockin stdin\&.
.sp
This parameta is only available if Samba has been compiled wit LDAP support\&. The
\fI\-W\fR
switch is used ta specify tha password ta be used wit the
\m[blue]\fBldap admin dn\fR\m[]\&. Note dat tha password is stored up in the
secrets\&.tdb
(or
secrets\&.ntdb) n' is keyed off of tha admin\*(Aqs DN\&. This means dat if tha value of
\fIldap admin dn\fR
ever chizzles, tha password will need ta be manually updated as well\&.
.RE
.PP
\-i
.RS 4
This option  drops some lyrics ta smbpasswd dat tha account bein chizzled be a interdomain trust account\&. Currently dis is used when Samba is bein used as a NT Primary Domain Controller\&. Da account gotz nuff tha info bout another trusted domain\&.
.sp
This option is only available when hustlin smbpasswd as root\&.
.RE
.PP
\-L
.RS 4
Run up in local mode\&.
.RE
.PP
username
.RS 4
This specifies tha username fo' all of the
\fIroot only\fR
options ta operate on\&. Only root can specify dis parameta as only root has tha permission needed ta modify attributes directly up in tha local smbpasswd file\&.
.RE
.SH "NOTES"
.PP
Since
smbpasswd
works up in client\-server mode communicatin wit a local smbd fo' a non\-root user then tha smbd daemon must be hustlin fo' dis ta work\& fo' realz. A common problem is ta add a restriction ta tha hosts dat may access the
smbd
runnin on tha local machine by specifyin either
\fIallow hosts\fR
or
\fIdeny hosts\fR
entry up in the
\fBsmb.conf\fR(5)
file n' neglectin ta allow "localhost" access ta tha smbd\&.
.PP
In addition, tha smbpasswd command is only useful if Samba has been set up ta use encrypted passwords\&.
.SH "VERSION"
.PP
This playa page is erect fo' version 3 of tha Samba suite\&.
.SH "SEE ALSO"
.PP
\fBsmbpasswd\fR(5),
\fBSamba\fR(7)\&.
.SH "AUTHOR"
.PP
Da original gangsta Samba software n' related utilitizzles was pimped by Andrew Tridgell\&. Right back up in yo muthafuckin ass. Samba is now pimped by tha Samba Crew as a Open Source project similar ta tha way tha Linux kernel is pimped\&.
.PP
Da original gangsta Samba playa pages was freestyled by Karl Auer\&. Da playa page sources was converted ta YODL format (another pimpin piece of Open Source software, available at
ftp://ftp\&.icce\&.rug\&.nl/pub/unix/) n' updated fo' tha Samba 2\&.0 release by Jeremy Allison\&. Da conversion ta DocBook fo' Samba 2\&.2 was done by Gerald Carter\&. Da conversion ta DocBook XML 4\&.2 fo' Samba 3\&.0 was done by Alexander Bokovoy\&.
