.TH ntpq 8
.SH NAME
ntpq - standard NTP query program
.SH \ 

.SH SYNOPSIS
\fBntpq [-46dinp] [-c \fIcommand\fB] [\fIhost\fB] [...]\fR

.SH DESCRIPTION

Da \fBntpq\fR utilitizzle program is used ta monitor NTP daemon \fBntpd\fR operations n' determine performance. Well shiiiit, it uses tha standard NTP mode 6 control message formats defined up in Appendix B of tha NTPv3 justification RFC1305. Da same formats is used up in NTPv4, although a shitload of tha variable names have chizzled n' freshly smoked up ones added. Y'all KNOW dat shit, muthafucka! Da description on dis page is fo' tha NTPv4 variables.

Da program can be run either up in interactizzle mode or controlled rockin command line arguments, n' you can put dat on yo' toast. Requests ta read n' write arbitrary variablez can be assembled, wit raw n' pretty-printed output options bein available. Da \fBntpq\fR can also obtain n' print a list of peers up in a cold-ass lil common format by bustin  multiple queries ta tha server.

If one or mo' request options is included on tha command line when \fBntpq\fR is executed, each of tha requests is ghon be busted ta tha NTP servers hustlin on each of tha hosts given as command line arguments, or on localhost by default. If no request options is given, \fBntpq\fR will attempt ta read commandz from tha standard input n' execute these on tha NTP server hustlin on tha straight-up original gangsta host given on tha command line, again n' again n' again defaultin ta localhost when no other host is specified. Y'all KNOW dat shit, muthafucka! \fBntpq\fR will prompt fo' commandz if tha standard input be a terminal device.

\fBntpq\fR uses NTP mode 6 packets ta rap wit tha NTP server, n' hence can be used ta query any compatible server on tha network which permits dat shit. Note dat since NTP be a UDP protocol dis communication is ghon be somewhat unreliable, especially over big-ass distances up in termz of network topology. \fBntpq\fR make one attempt ta retransmit requests, n' will time requests up if tha remote host aint heard from within a suitable timeout time.

Note dat up in contexts where a host name is expected, a \fB-4\fR qualifier precedin tha host name forces DNS resolution ta tha IPv4 namespace, while a \fB-6\fR qualifier forces DNS resolution ta tha IPv6 namespace.

For examplez n' usage, peep tha NTP Debuggin Techniques page.

Command line options is busted lyrics bout following. Right back up in yo muthafuckin ass. Specifyin a cold-ass lil command line option other than \fB-i\fR or \fB-n\fR will cause tha specified query (queries) ta be busted ta tha indicated host(s) immediately. Otherwise, \fBntpq\fR will attempt ta read interactizzle format commandz from tha standard input.

.RS 0
.TP 8
\fB-4\fR
Force DNS resolution of followin host names on tha command line ta tha IPv4 namespace.
.TP 8
\fB-6\fR
Force DNS resolution of followin host names on tha command line ta tha IPv6 namespace.
.TP 8
\fB-c\fR
Da followin argument is interpreted as a interactizzle format command n' be added ta tha list of commandz ta be executed on tha specified host(s). Multiple \fB-c\fR options may be given.
.TP 8
\fB-d\fR
Turn on debuggin mode.
.TP 8
\fB-i\fR
Force \fBntpq\fR ta operate up in interactizzle mode. Prompts is ghon be freestyled ta tha standard output n' commandz read from tha standard input.
.TP 8
\fB-n\fR
Output all host addresses up in dotted-quad numeric format rather than convertin ta tha canonical host names.
.TP 8
\fB-p\fR
Print a list of tha peers known ta tha server as well as a summary of they state. This is equivalent ta tha \fBpeers\fR interactizzle command.
.RE

.SH INTERNAL COMMANDS

Interactizzle format commandz consist of a keyword followed by zero ta four arguments, n' you can put dat on yo' toast. Only enough charactaz of tha full keyword ta uniquely identify tha command need be typed. Y'all KNOW dat shit, muthafucka! Da output of a cold-ass lil command is normally busted ta tha standard output yo, but optionally tha output of individual commandz may be busted ta a gangbangin' file by appendin a \fB>\fR, followed by a gangbangin' file name, ta tha command line fo' realz. A number of interactizzle format commandz is executed entirely within tha \fBntpq\fR program itself n' do not result up in NTP mode-6 requests bein busted ta a server n' shit. These is busted lyrics bout following.

.RS 0
.TP 8
\fB? [\fIcommand_keyword\fB]\fR
.TP 8
\fBhelp [\fIcommand_keyword\fB]\fR
A \fB?\fR by itself will print a list of all tha command keywordz known ta \fBntpq\fR\[char46] A \fB?\fR followed by a cold-ass lil command keyword will print function n' usage shiznit bout tha command.
.TP 8
\fBaddvars \fIname\fB [ = \fIvalue\fB] [...]\fR
.TP 8
\fBrmvars \fIname\fB [...]\fR
.TP 8
\fBclearvars\fR
Da arguments ta dis command consist of a list of shit of tha form \fB\fIname\fB = \fIvalue\fB\fR, where tha \fB= \fIvalue\fB\fR is ignored, n' can be omitted up in read requests, n' you can put dat on yo' toast. \fBntpq\fR maintains a internal list up in which data ta be included up in control lyrics can be assembled, n' busted rockin tha \fBreadlist\fR n' \fBwritelist\fR commandz busted lyrics bout below. Da \fBaddvars\fR command allows variablez n' optionizzle joints ta be added ta tha list. If mo' than one variable is ta be added, tha list should be comma-separated n' not contain white space. Da \fBrmvars\fR command can be used ta remove individual variablez from tha list, while tha \fBclearlist\fR command removes all variablez from tha list.
.TP 8
\fBcooked\fR
Display server lyrics up in prettyprint format.
.TP 8
\fBdebug mo' | less | off\fR
Turns internal query program debuggin on n' off.
.TP 8
\fBdelay \fImilliseconds\fB\fR
Specify a time interval ta be added ta timestamps included up in requests which require authentication. I aint talkin' bout chicken n' gravy biatch. This is used ta enable (unreliable) server reconfiguration over long delay network paths or between machines whose clocks is unsynchronized. Y'all KNOW dat shit, muthafucka! Actually tha server do not now require timestamps up in authenticated requests, so dis command may be obsolete.
.TP 8
\fBhost \fIname\fB\fR
Set tha host ta which future queries is ghon be sent. Da name may be either a DNS name or a numeric address.
.TP 8
\fBhostnames [yes | no]\fR
If \fByes\fR is specified, host names is printed up in shiznit displays. If \fBno\fR is specified, numeric addresses is printed instead. Y'all KNOW dat shit, muthafucka! Da default is \fByes\fR, unless modified rockin tha command line \fB-n\fR switch.
.TP 8
\fBkeyid \fIkeyid\fB\fR
This command specifies tha key number ta be used ta authenticate configuration requests, n' you can put dat on yo' toast. This must correspond ta a key number tha server has been configured ta use fo' dis purpose.
.TP 8
\fBntpversion 1 | 2 | 3 | 4\fR
Sets tha NTP version number which \fBntpq\fR fronts up in packets, n' you can put dat on yo' toast. Defaults ta 2, Note dat mode-6 control lyrics (and modes, fo' dat matter) didn't exist up in NTP version 1.
.TP 8
\fBpasswd\fR
This command prompts fo' a password ta authenticate configuration requests, n' you can put dat on yo' toast. Da password must correspond ta tha key configured fo' NTP server fo' dis purpose.
.TP 8
\fBquit\fR
Exit \fBntpq\fR\[char46]
.TP 8
\fBraw\fR
Display server lyrics as received n' without reformatting.
.TP 8
\fBtimeout \fImilliseconds\fB\fR
Specify a timeout period fo' responses ta server queries. Put ya muthafuckin choppers up if ya feel dis! Da default be bout 5000 milliseconds. Note dat since \fBntpq\fR retries each query once afta a timeout, tha total waitin time fo' a timeout is ghon be twice tha timeout value set.
.RE

.SH CONTROL MESSAGE COMMANDS

Association IDs is used ta identify system, peer n' clock variables. Right back up in yo muthafuckin ass. System variablez is assigned a association ID of zero n' system name space, while each association be assigned a nonzero association ID n' peer namespace. Most control commandz bust a single mode-6 message ta tha server n' expect a single response message. Da exceptions is tha \fBpeers\fR command, which sendz a seriez of lyrics, n' tha \fBmreadlist\fR n' \fBmreadvar\fR commands, which iterate over a range of associations.

.RS 0
.TP 8
\fBassociations\fR
Display a list of mobilized associations up in tha form
\fBind assid status conf reach auth condizzle last_event cnt\fR

.TS
expand allbox tab(%);
l l.
Variable % Description
\fBind\fR % index on dis list
\fBassid\fR % association ID
\fBstatus\fR % peer status word
\fBconf\fR % \fByes\fR: persistent, \fBno\fR: ephemeral
\fBreach\fR % \fByes\fR: reachable, \fBno\fR: unreachable
\fBauth\fR % \fBok\fR, \fByes\fR, \fBbad\fR n' \fBnone\fR
\fBcondition\fR % selection status (see tha \fBselect\fR field of tha peer status word)
\fBlast_event\fR % event report (see tha \fBevent\fR field of tha peer status word)
\fBcnt\fR % event count (see tha \fBcount\fR field of tha peer status word)
.TE

.TP 8
\fBclockvar \fIassocID\fB [\fIname\fB [ = \fIvalue\fB [...]] [...]\fR
.TP 8
\fBcv \fIassocID\fB [\fIname\fB [ = \fIvalue\fB [...] ][...]\fR
Display a list of clock variablez fo' dem assocations supportin a reference clock.
.TP 8
\fB:config [...]\fR
Send tha remainder of tha command line, includin whitespace, ta tha server as a run-time configuration command up in tha same format as tha configuration file. This command is experimenstrual until further notice n' clarification. I aint talkin' bout chicken n' gravy biatch fo' realz. Authentication iz of course required.
.TP 8
\fBconfig-from-file \fIfilename\fB\fR
Send tha each line of \fIfilename\fR ta tha server as run-time configuration commandz up in tha same format as tha configuration file. This command is experimenstrual until further notice n' clarification. I aint talkin' bout chicken n' gravy biatch fo' realz. Authentication iz of course required.
.TP 8
\fBkeyid\fR
Specify tha key ID ta use fo' write requests.
.TP 8
\fBlassociations\fR
Perform tha same function as tha associations command, execept display mobilized n' unmobilized associations.
.TP 8
\fBmreadvar \fIassocID\fB \fIassocID\fB [ \fIvariable_name\fB [ = \fIvalue\fB[ ... ]\fR
.TP 8
\fBmrv \fIassocID\fB \fIassocID\fB [ \fIvariable_name\fB [ = \fIvalue\fB[ ... ]\fR
Perform tha same function as tha \fBreadvar\fR command, except fo' a range of association IDs. This range is determined from tha association list cached by da most thugged-out recent \fBassociations\fR command.
.TP 8
\fBpassociations\fR
Perform tha same function as tha \fBassociations command\fR, except dat it uses previously stored data rather than bustin a freshly smoked up query.
.TP 8
\fBpasswd\fR
Specify tha password ta use fo' write requests.
.TP 8
\fBpeers\fR
Display a list of peers up in tha form
\fB[tally]remote refid st t when pool reach delay offset jitter\fR

.TS
expand allbox tab(%);
l l.
Variable % Description
\fB[tally]\fR % single-characta code indicatin current value of tha \fBselect\fR field of tha peer status word
\fBremote\fR % host name (or IP number) of peer
\fBrefid\fR % association ID or lick code
\fBst\fR % stratum
\fBt\fR % \fBu\fR: unicast, \fBb\fR: broadcast, \fBl\fR: local
\fBwhen\fR % sec/min/hr since last received packet
\fBpoll\fR % poll interval (log2 s)
\fBreach\fR % reach shift regista (octal)
\fBdelay\fR % roundtrip delay
\fBoffset\fR % offset
\fBjitter\fR % jitter
.TE

.TP 8
\fBreadvar \fIassocID\fB \fIname\fB [ = \fIvalue\fB ] [,...]\fR
.TP 8
\fBrv \fIassocID\fB [ \fIname\fB ] [,...]\fR
Display tha specified variables. If \fB\fIassocID\fB\fR is zero, tha variablez is from tha system variablez name space, otherwise they is from tha peer variablez name space. Da \fB\fIassocID\fB\fR is required, as tha same ol' dirty name can occur up in both spaces. If no \fB\fIname\fB\fR is included, all operatizzle variablez up in tha name space is displayed. Y'all KNOW dat shit, muthafucka! In dis case only, if tha \fB\fIassocID\fB\fR is omitted, it be assumed zero. Multiple names is specified wit comma separators n' without whitespace. Note dat time joints is represented up in millisecondz n' frequency joints up in parts-per-mazillion (PPM). Right back up in yo muthafuckin ass. Some NTP timestamps is represented up in tha format YYYYMMDDTTTT, where YYYY is tha year, MM tha month of year, DD tha dizzle of month n' TTTT tha time of day.
.TP 8
\fBsaveconfig \fIfilename\fB\fR
Write tha current configuration, includin any runtime modifications given wit \fB:config\fR or \fBconfig-from-file\fR, ta tha ntpd hostz file \fIfilename\fR\[char46] This command is ghon be rejected by tha server unless saveconfigdir appears up in tha \fBntpd\fR configuration file. \fIfilename\fR can use strftime() format specifiers ta substitute tha current date n' time, fo' example, \fBsaveconfig ntp-%Y%m%d-%H%M%S.conf\fR\[char46] Da filename used is stored up in system variable \fBsavedconfig\fR\[char46] Authentication is required.
.TP 8
\fBwritevar \fIassocID\fB \fIname\fB = \fIvalue\fB [,...]\fR
Write tha specified variables. If tha \fB\fIassocID\fB\fR is zero, tha variablez is from tha system variablez name space, otherwise they is from tha peer variablez name space. Da \fB\fIassocID\fB\fR is required, as tha same ol' dirty name can occur up in both spaces.
.RE

.SH STATUS WORDS AND KISS CODES

Da current state of tha operatin program is shown up in a set of status lyrics maintained by tha system n' each association separately. These lyrics is displayed up in tha \fBrv\fR n' \fBas\fR commandz both up in hexadecimal n' decoded short tip strings. Da codes, tips n' short explanations is on tha Event Lyrics n' Status Lyrics page. Da page also includes a list of system n' peer lyrics, tha code fo' tha sickest fuckin of which is included up in tha status word.

Hype resultin from protocol machine state transitions is displayed rockin a informal set of ASCII strings called lick codes\[char46] Da original gangsta purpose was fo' kiss-o'-death (KoD) packets busted by tha server ta advise tha client of a unusual condition. I aint talkin' bout chicken n' gravy biatch. They is now displayed, when appropriate, up in tha reference identifier field up in various billboards.

.SH SYSTEM VARIABLES

Da followin system variablez step tha fuck up in tha \fBrv\fR billboard. Y'all KNOW dat shit, muthafucka! Not all variablez is displayed up in some configurations.

.TS
expand allbox tab(%);
l l.
Variable % Description
\fBstatus\fR % system status word
\fBversion\fR % NTP software version n' build time
\fBprocessor\fR % hardware platform n' version
\fBsystem\fR % operatin system n' version
\fBleap\fR % leap warnin indicator (0-3)
\fBstratum\fR % stratum (1-15)
\fBprecision\fR % precision (log2 s)
\fBrootdelay\fR % total roundtrip delay ta tha primary reference clock
\fBrootdisp\fR % total dispersion ta tha primary reference clock
\fBpeer\fR % system peer association ID
\fBtc\fR % time constant n' poll exponent (log2 s) (3-17)
\fBmintc\fR % minimum time constant (log2 s) (3-10)
\fBclock\fR % date n' time of day
\fBrefid\fR % reference ID or lick code
\fBreftime\fR % reference time
\fBoffset\fR % combined time offset
\fBsys_jitter\fR % combined system jitter
\fBfrequency\fR % clock frequency offset (PPM)
\fBclk_wander\fR % clock frequency wander (PPM)
\fBclk_jitter\fR % clock jitter
\fBtai\fR % TAI-UTC offset (s)
\fBleapsec\fR % NTP secondz when tha next leap second is/was inserted
\fBexpire\fR % NTP secondz when tha NIST leapsecondz file expires
.TE

.RS 0
.TP 8
Da jitta n' wander statistics is exponentially-weighted RMS averages. Da system jitta is defined up in tha NTPv4 justification; tha clock jitta statistic is computed by tha clock discipline module.
.TP 8
When tha NTPv4 daemon is compiled wit tha OpenSSL software library, additionizzle system variablez is displayed, includin some or all of tha following, dependin on tha particular Autokey dance:
.RE

.TS
expand allbox tab(%);
l l.
Variable % Description
\fBhost\fR % Autokey host name
\fBgroup\fR % Autokey crew name
\fBflags\fR % host flags (see Autokey justification)
\fBdigest\fR % OpenSSL message digest algorithm
\fBsignature\fR % OpenSSL digest/signature scheme
\fBupdate\fR % NTP secondz at last signature update
\fBcert\fR % certificate subject, issuer n' certificate flags
\fBuntil\fR % NTP secondz when tha certificate expires
.TE

.SH PEER VARIABLES

Da followin system variablez apear up in tha \fBrv\fR billboard fo' each association. I aint talkin' bout chicken n' gravy biatch. Not all variablez is displayed up in some configurations.

.TS
expand allbox tab(%);
l l.
Variable % Description
\fBassocid\fR % association ID
\fBstatus\fR % peer status word
\fBsrcadr srcport\fR % source (remote) IP address n' port
\fBdstadr dstport\fR % destination (local) IP address n' port
\fBleap\fR % leap indicator (0-3)
\fBstratum\fR % stratum (0-15)
\fBprecision\fR % precision (log2 s)
\fBrootdelay\fR % total roundtrip delay ta tha primary reference clock
\fBrootdisp\fR % total root dispersion ta tha primary reference clock
\fBrefid\fR % reference ID or lick code
\fBreftime\fR % reference time
\fBreach\fR % reach regista (octal)
\fBunreach\fR % unreach counter
\fBhmode\fR % host mode (1-6)
\fBpmode\fR % peer mode (1-5)
\fBhpoll\fR % host poll exponent (log2 s) (3-17)
\fBppoll\fR % peer poll exponent (log2 s) (3-17)
\fBheadway\fR % headway (see Rate Management n' tha Kiss-o'-Death Packet)
\fBflash\fR % flash status word
\fBoffset\fR % filta offset
\fBdelay\fR % filta delay
\fBdispersion\fR % filta dispersion
\fBjitter\fR % filta jitter
\fBbias\fR % unicast/broadcast bias
\fBxleave\fR % interleave delay (see NTP Interleaved Modes)
.TE

Da bias vaqriable is calculated when tha straight-up original gangsta broadcast packet is received afta tha calibration volley. Well shiiiit, it represents tha offset of tha broadcast subgraph relatizzle ta tha unicast subgraph. Da xleave variable appears only tha interleaved symmetric n' ingterleaved modes. Well shiiiit, it represents tha internal queueing, bufferin n' transmission delays fo' tha preceedin packet.

When tha NTPv4 daemon is compiled wit tha OpenSSL software library, additionizzle peer variablez is displayed, includin tha following:

.TS
expand allbox tab(%);
l l.
Variable % Description
\fBflags\fR % peer flags (see Autokey justification)
\fBhost\fR % Autokey server name
\fBflags\fR % peer flags (see Autokey justification)
\fBsignature\fR % OpenSSL digest/signature shceme
\fBinitsequence\fR % initial key ID
\fBinitkey\fR % initial key index
\fBtimestamp\fR % Autokey signature timestamp
.TE

.SH CLOCK VARIABLES

Da followin clock variablez apear up in tha \fBcv\fR billboard fo' each association wit a reference clock. Not all variablez is displayed up in some configurations.

.TS
expand allbox tab(%);
l l.
Variable % Description
\fBassocid\fR % association ID
\fBstatus\fR % clock status word
\fBdevice\fR % thang description
\fBtimecode\fR % ASCII timecode strang (specific ta device)
\fBpoll\fR % poll lyrics sent
\fBnoreply\fR % no reply
\fBbadformat\fR % wack format
\fBbaddata\fR % wack date or time
\fBfudgetime1\fR % fudge time 1
\fBfudgetime2\fR % fudge time 2
\fBstratum\fR % driver stratum
\fBrefid\fR % driver reference ID
\fBflags\fR % driver flags
.TE

.SH SEE ALSO

ntp_decode(5), ntpd(8), ntpdc(8)

Da straight-up legit HTML documentation.

This file was automatically generated from HTML source.

