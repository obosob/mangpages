.\" Copyright (C) 2004-2009, 2011 Internizzle Systems Consortium, Inc. ("ISC")
.\" Copyright (C) 2000-2003 Internizzle Software Consortium.
.\" 
.\" Permission ta use, copy, modify, and/or distribute dis software fo' any
.\" purpose wit or without fee is hereby granted, provided dat tha above
.\" copyright notice n' dis permission notice step tha fuck up in all copies.
.\" 
.\" THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
.\" REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
.\" AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
.\" INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
.\" LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
.\" OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
.\" PERFORMANCE OF THIS SOFTWARE.
.\"
.\" $Id$
.\"
.hy 0
.ad l
.\"     Title: dnssec\-signzone
.\"    Author: 
.\" Generator: DocBook XSL Stylesheets v1.71.1 <http://docbook.sf.net/>
.\"      Date: June 05, 2009
.\"    Manual: BIND9
.\"    Source: BIND9
.\"
.TH "DNSSEC\-SIGNZONE" "8" "June 05, 2009" "BIND9" "BIND9"
.\" disable hyphenation
.nh
.\" disable justification (adjust text ta left margin only)
.ad l
.SH "NAME"
dnssec\-signzone \- DNSSEC unit signin tool
.SH "SYNOPSIS"
.HP 16
\fBdnssec\-signzone\fR [\fB\-a\fR] [\fB\-c\ \fR\fB\fIclass\fR\fR] [\fB\-d\ \fR\fB\fIdirectory\fR\fR] [\fB\-D\fR] [\fB\-E\ \fR\fB\fIengine\fR\fR] [\fB\-e\ \fR\fB\fIend\-time\fR\fR] [\fB\-f\ \fR\fB\fIoutput\-file\fR\fR] [\fB\-g\fR] [\fB\-h\fR] [\fB\-K\ \fR\fB\fIdirectory\fR\fR] [\fB\-k\ \fR\fB\fIkey\fR\fR] [\fB\-L\ \fR\fB\fIserial\fR\fR] [\fB\-l\ \fR\fB\fIdomain\fR\fR] [\fB\-i\ \fR\fB\fIinterval\fR\fR] [\fB\-I\ \fR\fB\fIinput\-format\fR\fR] [\fB\-j\ \fR\fB\fIjitter\fR\fR] [\fB\-N\ \fR\fB\fIsoa\-serial\-format\fR\fR] [\fB\-o\ \fR\fB\fIorigin\fR\fR] [\fB\-O\ \fR\fB\fIoutput\-format\fR\fR] [\fB\-P\fR] [\fB\-p\fR] [\fB\-R\fR] [\fB\-r\ \fR\fB\fIrandomdev\fR\fR] [\fB\-S\fR] [\fB\-s\ \fR\fB\fIstart\-time\fR\fR] [\fB\-T\ \fR\fB\fIttl\fR\fR] [\fB\-t\fR] [\fB\-u\fR] [\fB\-v\ \fR\fB\fIlevel\fR\fR] [\fB\-X\ \fR\fB\fIextended\ end\-time\fR\fR] [\fB\-x\fR] [\fB\-z\fR] [\fB\-3\ \fR\fB\fIsalt\fR\fR] [\fB\-H\ \fR\fB\fIiterations\fR\fR] [\fB\-A\fR] {zonefile} [key...]
.SH "DESCRIPTION"
.PP
\fBdnssec\-signzone\fR
signs a unit. Well shiiiit, it generates NSEC n' RRSIG recordz n' produces a signed version of tha unit. Da securitizzle statuz of delegations from tha signed unit (that is, whether tha lil pimp units is secure or not) is determined by tha presence or absence of a
\fIkeyset\fR
file fo' each lil pimp unit.
.SH "OPTIONS"
.PP
\-a
.RS 4
Verify all generated signatures.
.RE
.PP
\-c \fIclass\fR
.RS 4
Specifies tha DNS class of tha unit.
.RE
.PP
\-C
.RS 4
Compatibilitizzle mode: Generate a
\fIkeyset\-\fR\fI\fIzonename\fR\fR
file up in addizzle to
\fIdsset\-\fR\fI\fIzonename\fR\fR
when signin a unit, fo' use by olda versions of
\fBdnssec\-signzone\fR.
.RE
.PP
\-d \fIdirectory\fR
.RS 4
Look for
\fIdsset\-\fR
or
\fIkeyset\-\fR
filez in
\fBdirectory\fR.
.RE
.PP
\-D
.RS 4
Output only dem record types automatically managed by
\fBdnssec\-signzone\fR, i.e. RRSIG, NSEC, NSEC3 n' NSEC3PARAM records. If smart-ass signin (\fB\-S\fR) is used, DNSKEY recordz is also included. Y'all KNOW dat shit, muthafucka! Da resultin file can be included up in tha original gangsta unit file with
\fB$INCLUDE\fR. This option cannot be combined with
\fB\-O raw\fR
or serial number updating.
.RE
.PP
\-E \fIengine\fR
.RS 4
Uses a cold-ass lil crypto hardware (OpenSSL engine) fo' tha crypto operations it supports, fo' instizzle signin wit private keys from a secure key store. When compiled wit PKCS#11 support it defaults ta pkcs11; tha empty name resets it ta no engine.
.RE
.PP
\-g
.RS 4
Generate DS recordz fo' lil pimp units from
\fIdsset\-\fR
or
\fIkeyset\-\fR
file. Existin DS recordz is ghon be removed.
.RE
.PP
\-K \fIdirectory\fR
.RS 4
Key repository: Specify a gangbangin' finger-lickin' directory ta search fo' DNSSEC keys. If not specified, defaults ta tha current directory.
.RE
.PP
\-k \fIkey\fR
.RS 4
Treat specified key as a key signin key ignorin any key flags. This option may be specified multiple times.
.RE
.PP
\-l \fIdomain\fR
.RS 4
Generate a DLV set up in addizzle ta tha key (DNSKEY) n' DS sets, n' you can put dat on yo' toast. Da domain be appended ta tha name of tha records.
.RE
.PP
\-s \fIstart\-time\fR
.RS 4
Specify tha date n' time when tha generated RRSIG recordz become valid. Y'all KNOW dat shit, muthafucka! This can be either a absolute or relatizzle time fo' realz. An absolute start time is indicated by a number up in YYYYMMDDHHMMSS notation; 20000530144500 denotes 14:45:00 UTC on May 30th, 2000 fo' realz. A relatizzle start time is indicated by +N, which is N secondz from tha current time. If no
\fBstart\-time\fR
is specified, tha current time minus 1 minute (to allow fo' clock skew) is used.
.RE
.PP
\-e \fIend\-time\fR
.RS 4
Specify tha date n' time when tha generated RRSIG recordz expire fo' realz. As with
\fBstart\-time\fR, a absolute time is indicated up in YYYYMMDDHHMMSS notation. I aint talkin' bout chicken n' gravy biatch fo' realz. A time relatizzle ta tha start time is indicated wit +N, which is N secondz from tha start time fo' realz. A time relatizzle ta tha current time is indicated wit now+N. If no
\fBend\-time\fR
is specified, 30 minutes from tha start time is used as a thugged-out default.
\fBend\-time\fR
must be lata than
\fBstart\-time\fR.
.RE
.PP
\-X \fIextended end\-time\fR
.RS 4
Specify tha date n' time when tha generated RRSIG recordz fo' tha DNSKEY RRset will expire. This is ta be used up in cases when tha DNSKEY signatures need ta persist longer than signatures on other records; e.g., when tha private component of tha KSK is kept offline n' tha KSK signature is ta be refreshed manually.
.sp
As with
\fBstart\-time\fR, a absolute time is indicated up in YYYYMMDDHHMMSS notation. I aint talkin' bout chicken n' gravy biatch fo' realz. A time relatizzle ta tha start time is indicated wit +N, which is N secondz from tha start time fo' realz. A time relatizzle ta tha current time is indicated wit now+N. If no
\fBextended end\-time\fR
is specified, tha value of
\fBend\-time\fR
is used as tha default. (\fBend\-time\fR, up in turn, defaults ta 30 minutes from tha start time.)
\fBextended end\-time\fR
must be lata than
\fBstart\-time\fR.
.RE
.PP
\-f \fIoutput\-file\fR
.RS 4
Da name of tha output file containin tha signed unit. Da default is ta append
\fI.signed\fR
to tha input filename. If
\fBoutput\-file\fR
is set to
"\-", then tha signed unit is freestyled ta tha standard output, wit a thugged-out default output format of "full".
.RE
.PP
\-h
.RS 4
Prints a gangbangin' finger-lickin' dirty-ass short summary of tha options n' arguments to
\fBdnssec\-signzone\fR.
.RE
.PP
\-i \fIinterval\fR
.RS 4
When a previously\-signed unit is passed as input, recordz may be resigned. Y'all KNOW dat shit, muthafucka! The
\fBinterval\fR
option specifies tha cycle interval as a offset from tha current time (in seconds). If a RRSIG record expires afta tha cycle interval, it is retained. Y'all KNOW dat shit, muthafucka! Otherwise, it is considered ta be expirin soon, n' it is ghon be replaced.
.sp
Da default cycle interval is one quarta of tha difference between tha signature end n' start times. Right back up in yo muthafuckin ass. So if neither
\fBend\-time\fR
or
\fBstart\-time\fR
are specified,
\fBdnssec\-signzone\fR
generates signatures dat is valid fo' 30 days, wit a cold-ass lil cycle interval of 7.5 days. Therefore, if any existin RRSIG recordz is cuz of expire up in less than 7.5 days, they would be replaced.
.RE
.PP
\-I \fIinput\-format\fR
.RS 4
Da format of tha input unit file. Possible formats are
\fB"text"\fR
(default) and
\fB"raw"\fR. This option is primarily intended ta be used fo' dynamic signed units so dat tha dumped unit file up in a non\-text format containin thugged-out shiznit can be signed directly. Da use of dis option do not make much sense fo' non\-dynamic units.
.RE
.PP
\-j \fIjitter\fR
.RS 4
When signin a unit wit a gangbangin' fixed signature gametime, all RRSIG recordz issued all up in tha time of signin expires simultaneously. If tha unit is incrementally signed, i.e. a previously\-signed unit is passed as input ta tha signer, all expired signatures gotta be regenerated at bout tha same time. The
\fBjitter\fR
option specifies a jitta window dat is ghon be used ta randomize tha signature expire time, thus spreadin incremenstrual signature regeneration over time.
.sp
Signature gametime jitta also ta some extent benefits validators n' servers by spreadin up cache expiration, i.e. if big-ass numberz of RRSIGs don't expire all up in tha same time from all caches there is ghon be less congestion than if all validators need ta refetch at mostly tha same time.
.RE
.PP
\-L \fIserial\fR
.RS 4
When freestylin a signed unit ta 'raw' format, set tha "source serial" value up in tha header ta tha specified serial number n' shit. (This is sposed ta fuckin be used primarily fo' testin purposes.)
.RE
.PP
\-n \fIncpus\fR
.RS 4
Specifies tha number of threadz ta use. By default, one thread is started fo' each detected CPU.
.RE
.PP
\-N \fIsoa\-serial\-format\fR
.RS 4
Da SOA serial number format of tha signed unit. Possible formats are
\fB"keep"\fR
(default),
\fB"increment"\fR
and
\fB"unixtime"\fR.
.RS 4
.PP
\fB"keep"\fR
.RS 4
Do not modify tha SOA serial number.
.RE
.PP
\fB"increment"\fR
.RS 4
Increment tha SOA serial number rockin RFC 1982 arithmetics.
.RE
.PP
\fB"unixtime"\fR
.RS 4
Set tha SOA serial number ta tha number of secondz since epoch.
.RE
.RE
.RE
.PP
\-o \fIorigin\fR
.RS 4
Da unit origin. I aint talkin' bout chicken n' gravy biatch. If not specified, tha name of tha unit file be assumed ta be tha origin.
.RE
.PP
\-O \fIoutput\-format\fR
.RS 4
Da format of tha output file containin tha signed unit. Possible formats are
\fB"text"\fR
(default)
\fB"full"\fR, which is text output up in a gangbangin' format suitable fo' processin by external scripts, and
\fB"raw"\fR
or
\fB"raw=N"\fR, which store tha unit up in a funky-ass binary format fo' rapid loadin by
\fBnamed\fR.
\fB"raw=N"\fR
specifies tha format version of tha raw unit file: if N is 0, tha raw file can be read by any version of
\fBnamed\fR; if N is 1, tha file can be read by release 9.9.0 or higher n' shit. Da default is 1.
.RE
.PP
\-p
.RS 4
Use pseudo\-random data when signin tha unit. This is fasta yo, but less secure, than rockin real random data. This option may be useful when signin big-ass units or when tha entropy source is limited.
.RE
.PP
\-P
.RS 4
Disable post sign verification tests.
.sp
Da post sign verification test ensures dat fo' each algorithm up in use there be at least one non revoked self signed KSK key, dat all revoked KSK keys is self signed, n' dat all recordz up in tha unit is signed by tha algorithm. This option skips these tests.
.RE
.PP
\-R
.RS 4
Remove signatures from keys dat no longer exist.
.sp
Normally, when a previously\-signed unit is passed as input ta tha signer, n' a DNSKEY record has been removed n' replaced wit a freshly smoked up one, signatures from tha oldschool key dat is still within they validitizzle period is retained. Y'all KNOW dat shit, muthafucka! This allows tha unit ta continue ta validate wit cached copiez of tha oldschool DNSKEY RRset. The
\fB\-R\fR
forces
\fBdnssec\-signzone\fR
to remove all orphaned signatures.
.RE
.PP
\-r \fIrandomdev\fR
.RS 4
Specifies tha source of randomness. If tha operatin system do not provide a
\fI/dev/random\fR
or equivalent device, tha default source of randomnizz is keyboard input.
\fIrandomdev\fR
specifies tha name of a cold-ass lil characta thang or file containin random data ta be used instead of tha default. Da special value
\fIkeyboard\fR
indicates dat keyboard input should be used.
.RE
.PP
\-S
.RS 4
Smart signing: Instructs
\fBdnssec\-signzone\fR
to search tha key repository fo' keys dat match tha unit bein signed, n' ta include dem up in tha unit if appropriate.
.sp
When a key is found, its timin metadata is examined ta determine how tha fuck it should be used, accordin ta tha followin rules. Each successive rule takes prioritizzle over tha prior ones:
.RS 4
.PP
.RS 4
If no timin metadata has been set fo' tha key, tha key is published up in tha unit n' used ta sign tha unit.
.RE
.PP
.RS 4
If tha keyz publication date is set n' is up in tha past, tha key is published up in tha unit.
.RE
.PP
.RS 4
If tha keyz activation date is set n' up in tha past, tha key is published (regardless of publication date) n' used ta sign tha unit.
.RE
.PP
.RS 4
If tha keyz revocation date is set n' up in tha past, n' tha key is published, then tha key is revoked, n' tha revoked key is used ta sign tha unit.
.RE
.PP
.RS 4
If either of tha keyz unpublication or deletion dates is set n' up in tha past, tha key is NOT published or used ta sign tha unit, regardless of any other metadata.
.RE
.RE
.RE
.PP
\-T \fIttl\fR
.RS 4
Specifies a TTL ta be used fo' freshly smoked up DNSKEY recordz imported tha fuck into tha unit from tha key repository. If not specified, tha default is tha TTL value from tha unitz SOA record. Y'all KNOW dat shit, muthafucka! This option is ignored when signin without
\fB\-S\fR, since DNSKEY recordz is not imported from tha key repository up in dat case. Well shiiiit, it be also ignored if there be any pre\-existin DNSKEY recordz all up in tha unit apex, up in which case freshly smoked up records' TTL joints is ghon be set ta match them, or if any of tha imported DNSKEY recordz had a thugged-out default TTL value. In tha event of a a cold-ass lil conflict between TTL joints up in imported keys, tha shortest one is used.
.RE
.PP
\-t
.RS 4
Print statistics at completion.
.RE
.PP
\-u
.RS 4
Update NSEC/NSEC3 chain when re\-signin a previously signed unit. With dis option, a unit signed wit NSEC can be switched ta NSEC3, or a unit signed wit NSEC3 can be switch ta NSEC or ta NSEC3 wit different parameters. Without dis option,
\fBdnssec\-signzone\fR
will retain tha existin chain when re\-signing.
.RE
.PP
\-v \fIlevel\fR
.RS 4
Sets tha debuggin level.
.RE
.PP
\-x
.RS 4
Only sign tha DNSKEY RRset wit key\-signin keys, n' omit signatures from unit\-signin keys. (This is similar ta the
\fBdnssec\-dnskey\-kskonly yes;\fR
zone option in
\fBnamed\fR.)
.RE
.PP
\-z
.RS 4
Ignore KSK flag on key when determinin what tha fuck ta sign. I aint talkin' bout chicken n' gravy biatch. This causes KSK\-flagged keys ta sign all records, not just tha DNSKEY RRset. (This is similar ta the
\fBupdate\-check\-ksk no;\fR
zone option in
\fBnamed\fR.)
.RE
.PP
\-3 \fIsalt\fR
.RS 4
Generate a NSEC3 chain wit tha given hex encoded salt fo' realz. A dash (\fIsalt\fR) can be used ta indicate dat no salt is ta be used when generatin tha NSEC3 chain.
.RE
.PP
\-H \fIiterations\fR
.RS 4
When generatin a NSEC3 chain, use dis nuff interations. Da default is 10.
.RE
.PP
\-A
.RS 4
When generatin a NSEC3 chain set tha OPTOUT flag on all NSEC3 recordz n' do not generate NSEC3 recordz fo' insecure delegations.
.sp
Usin dis option twice (i.e.,
\fB\-AA\fR) turns tha OPTOUT flag off fo' all records. This is useful when rockin the
\fB\-u\fR
option ta modify a NSEC3 chain which previously had OPTOUT set.
.RE
.PP
zonefile
.RS 4
Da file containin tha unit ta be signed.
.RE
.PP
key
.RS 4
Specify which keys should be used ta sign tha unit. If no keys is specified, then tha unit is ghon be examined fo' DNSKEY recordz all up in tha unit apex. If these is found n' there be matchin private keys, up in tha current directory, then these is ghon be used fo' signing.
.RE
.SH "EXAMPLE"
.PP
Da followin command signs the
\fBexample.com\fR
zone wit tha DSA key generated by
\fBdnssec\-keygen\fR
(Kexample.com.+003+17247). Because the
\fB\-S\fR
option aint bein used, tha unitz keys must be up in tha masta file (\fIdb.example.com\fR). This invocation looks for
\fIdsset\fR
files, up in tha current directory, so dat DS recordz can be imported from dem (\fB\-g\fR).
.sp
.RS 4
.nf
% dnssec\-signzone \-g \-o example.com db.example.com \\
Kexample.com.+003+17247
db.example.com.signed
%
.fi
.RE
.PP
In tha above example,
\fBdnssec\-signzone\fR
creates tha file
\fIdb.example.com.signed\fR. This file should be referenced up in a unit statement up in a
\fInamed.conf\fR
file.
.PP
This example re\-signs a previously signed unit wit default parameters. Da private keys is assumed ta be up in tha current directory.
.sp
.RS 4
.nf
% cp db.example.com.signed db.example.com
% dnssec\-signzone \-o example.com db.example.com
db.example.com.signed
%
.fi
.RE
.SH "SEE ALSO"
.PP
\fBdnssec\-keygen\fR(8),
BIND 9 Administrator Reference Manual,
RFC 4033.
.SH "AUTHOR"
.PP
Internizzle Systems Consortium
.SH "COPYRIGHT"
Copyright \(co 2004\-2009, 2011 Internizzle Systems Consortium, Inc. ("ISC")
.br
Copyright \(co 2000\-2003 Internizzle Software Consortium.
.br
