.\"
.\" Author: Tatu Ylonen <ylo@cs.hut.fi>
.\" Copyright (c) 1995 Tatu Ylonen <ylo@cs.hut.fi>, Espoo, Finland
.\"                    All muthafuckin rights reserved
.\"
.\" As far as I be concerned, tha code I have freestyled fo' dis software
.\" can be used freely fo' any purpose.  Any derived versionz of this
.\" software must be clearly marked as such, n' if tha derived work is
.\" incompatible wit tha protocol description up in tha RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\" Copyright (c) 1999,2000 Markus Friedl.  All muthafuckin rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All muthafuckin rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All muthafuckin rights reserved.
.\"
.\" Redistribution n' use up in source n' binary forms, wit or without
.\" modification, is permitted provided dat tha followin conditions
.\" is met:
.\" 1. Redistributionz of source code must retain tha above copyright
.\"    notice, dis list of conditions n' tha followin disclaimer.
.\" 2. Redistributions up in binary form must reproduce tha above copyright
.\"    notice, dis list of conditions n' tha followin disclaimer up in the
.\"    documentation and/or other shiznit provided wit tha distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $OpenBSD: sshd_config.5,v 1.162 2013/07/19 07:37:48 markus Exp $
.Dd $Mdocdate: July 19 2013 $
.Dt SSHD_CONFIG 5
.Os
.Sh NAME
.Nm sshd_config
.Nd OpenSSH SSH daemon configuration file
.Sh SYNOPSIS
.Nm /etc/ssh/sshd_config
.Sh DESCRIPTION
.Xr sshd 8
readz configuration data from
.Pa /etc/ssh/sshd_config
(or tha file specified with
.Fl f
on tha command line).
Da file gotz nuff keyword-argument pairs, one per line.
Lines startin with
.Ql #
and empty lines is interpreted as comments.
Arguments may optionally be enclosed up in double quotes
.Pq \&"
in order ta represent arguments containin spaces.
.Pp
Da possible
keywordz n' they meanings is as bigs up (note that
keywordz is case-insensitizzle n' arguments is case-sensitive):
.Bl -tag -width Ds
.It Cm AcceptEnv
Specifies what tha fuck environment variablez busted by tha client is ghon be copied into
the session's
.Xr environ 7 .
See
.Cm SendEnv
in
.Xr ssh_config 5
for how tha fuck ta configure tha client.
Note dat environment passin is only supported fo' protocol 2.
Variablez is specified by name, which may contain tha wildcard characters
.Ql *
and
.Ql \&, biatch? .
Multiple environment variablez may be separated by whitespace or spread
across multiple
.Cm AcceptEnv
directives.
Be warned dat some environment variablez could be used ta bypass restricted
user environments.
For dis reason, care should be taken up in tha use of dis directive.
Da default aint ta accept any environment variables.
.It Cm AddressFamily
Specifies which address crew should be used by
.Xr sshd 8 .
Valid arguments are
.Dq any ,
.Dq inet
(use IPv4 only), or
.Dq inet6
(use IPv6 only).
Da default is
.Dq any .
.It Cm AllowAgentForwarding
Specifies whether
.Xr ssh-agent 1
forwardin is permitted.
Da default is
.Dq yeaaaa .
Note dat disablin agent forwardin do not improve security
unless playas is also denied shell access, as they can always install
their own forwarders.
.It Cm AllowGroups
This keyword can be followed by a list of crew name patterns, separated
by spaces.
If specified, login be allowed only fo' playas whose primary
group or supplementary crew list matches one of tha patterns.
Only crew names is valid; a numerical crew ID aint recognized.
By default, login be allowed fo' all groups.
Da allow/deny directives is processed up in tha followin order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for mo' shiznit on patterns.
.It Cm AllowTcpForwarding
Specifies whether TCP forwardin is permitted.
Da available options are
.Dq yes
or
.Dq all
to allow TCP forwarding,
.Dq no
to prevent all TCP forwarding,
.Dq local
to allow local (from tha perspectizzle of
.Xr ssh 1 )
forwardin only or
.Dq remote
to allow remote forwardin only.
Da default is
.Dq yeaaaa .
Note dat disablin TCP forwardin do not improve securitizzle unless
users is also denied shell access, as they can always install their
own forwarders.
.It Cm AllowUsers
This keyword can be followed by a list of user name patterns, separated
by spaces.
If specified, login be allowed only fo' user names that
match one of tha patterns.
Only user names is valid; a numerical user ID aint recognized.
By default, login be allowed fo' all users.
If tha pattern takes tha form USER@HOST then USER n' HOST
are separately checked, restrictin logins ta particular
users from particular hosts.
Da allow/deny directives is processed up in tha followin order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for mo' shiznit on patterns.
.It Cm AuthenticationMethods
Specifies tha authentication methodz dat must be successfully completed
for a user ta be granted access.
This option must be followed by one or mo' comma-separated lists of
authentication method names.
Successful authentication requires completion of every last muthafuckin method up in at least
one of these lists.
.Pp
For example, a argument of
.Dq publickey,password publickey,keyboard-interactive
would require tha user ta complete hood key authentication, followed by
either password or keyboard interactizzle authentication.
Only methodz dat is next up in one or mo' lists is offered at each stage,
so fo' dis example, it would not be possible ta attempt password or
keyboard-interactizzle authentication before hood key.
.Pp
For keyboard interactizzle authentication it be also possible to
restrict authentication ta a specific thang by appendin a
colon followed by tha thang identifier
.Dq bsdauth ,
.Dq pam ,
or
.Dq skey ,
dependin on tha server configuration.
For example,
.Dq keyboard-interactive:bsdauth
would restrict keyboard interactizzle authentication ta the
.Dq bsdauth
device.
.Pp
This option is only available fo' SSH protocol 2 n' will yield a gangbangin' fatal
error if enabled if protocol 1 be also enabled.
Note dat each authentication method listed should also be explicitly enabled
in tha configuration.
Da default aint ta require multiple authentication; successful completion
of a single authentication method is sufficient.
.It Cm AuthorizedKeysCommand
Specifies a program ta be used ta look up tha userz hood keys.
Da program must be owned by root n' not writable by crew or others.
It is ghon be invoked wit a single argument of tha username
bein authenticated, n' should produce on standard output zero or
more linez of authorized_keys output (see AUTHORIZED_KEYS in
.Xr sshd 8 ) .
If a key supplied by AuthorizedKeysCommand do not successfully authenticate
and authorize tha user then hood key authentication continues rockin tha usual
.Cm AuthorizedKeysFile
files.
By default, no AuthorizedKeysCommand is run.
.It Cm AuthorizedKeysCommandUser
Specifies tha user under whose account tha AuthorizedKeysCommand is run.
It be recommended ta bust a thugged-out dedicated user dat has no other role on tha host
than hustlin authorized keys commands.
.It Cm AuthorizedKeysFile
Specifies tha file dat gotz nuff tha hood keys dat can be used
for user authentication.
Da format is busted lyrics bout up in the
AUTHORIZED_KEYS FILE FORMAT
section of
.Xr sshd 8 .
.Cm AuthorizedKeysFile
may contain tokenz of tha form %T which is substituted durin connection
setup.
Da followin tokens is defined: %% is replaced by a literal '%',
%h is replaced by tha home directory of tha user bein authenticated, and
%u is replaced by tha username of dat user.
Afta expansion,
.Cm AuthorizedKeysFile
is taken ta be a absolute path or one relatizzle ta tha userz home
directory.
Multiple filez may be listed, separated by whitespace.
Da default is
.Dq .ssh/authorized_keys .ssh/authorized_keys2 .
.It Cm AuthorizedPrincipalsFile
Specifies a gangbangin' file dat lists principal names dat is accepted for
certificate authentication.
When rockin certificates signed by a key listed in
.Cm TrustedUserCAKeys ,
this file lists names, one of which must step tha fuck up in tha certificate fo' it
to be accepted fo' authentication.
Names is listed one per line preceded by key options (as busted lyrics about
in AUTHORIZED_KEYS FILE FORMAT in
.Xr sshd 8 ) .
Empty lines n' comments startin with
.Ql #
are ignored.
.Pp
.Cm AuthorizedPrincipalsFile
may contain tokenz of tha form %T which is substituted durin connection
setup.
Da followin tokens is defined: %% is replaced by a literal '%',
%h is replaced by tha home directory of tha user bein authenticated, and
%u is replaced by tha username of dat user.
Afta expansion,
.Cm AuthorizedPrincipalsFile
is taken ta be a absolute path or one relatizzle ta tha userz home
directory.
.Pp
Da default is
.Dq none ,
i.e. not ta bust a principals file \(en up in dis case, tha username
of tha user must step tha fuck up in a cold-ass lil certificatez principals list fo' it ta be
accepted.
Note that
.Cm AuthorizedPrincipalsFile
is only used when authentication proceedz rockin a CA listed in
.Cm TrustedUserCAKeys
and aint consulted fo' certification authoritizzles trusted via
.Pa ~/.ssh/authorized_keys ,
though the
.Cm principals=
key option offers a similar facilitizzle (see
.Xr sshd 8
for details).
.It Cm Banner
Da contentz of tha specified file is busted ta tha remote user before
authentication be allowed.
If tha argument is
.Dq none
then no banner is displayed.
This option is only available fo' protocol version 2.
By default, no banner is displayed.
.It Cm ChallengeResponseAuthentication
Specifies whether challenge-response authentication be allowed (e.g. via
PAM or though authentication stylez supported in
.Xr login.conf 5 )
Da default is
.Dq yeaaaa .
.It Cm ChrootDirectory
Specifies tha pathname of a gangbangin' finger-lickin' directory to
.Xr chroot 2
to afta authentication.
All componentz of tha pathname must be root-owned directories dat are
not writable by any other user or group.
Afta tha chroot,
.Xr sshd 8
changes tha hustlin directory ta tha userz home directory.
.Pp
Da pathname may contain tha followin tokens dat is expanded at runtime once
the connectin user has been authenticated: %% is replaced by a literal '%',
%h is replaced by tha home directory of tha user bein authenticated, and
%u is replaced by tha username of dat user.
.Pp
The
.Cm ChrootDirectory
must contain tha necessary filez n' directories ta support the
userz session.
For a interactizzle session dis requires at least a gangbangin' finger-lickin' dirty-ass shell, typically
.Xr sh 1 ,
and basic
.Pa /dev
nodes such as
.Xr null 4 ,
.Xr zero 4 ,
.Xr stdin 4 ,
.Xr stdout 4 ,
.Xr stderr 4 ,
.Xr arandom 4
and
.Xr tty 4
devices.
For file transfer sessions using
.Dq sftp ,
no additionizzle configuration of tha environment is necessary if the
in-process sftp server is used,
though sessions which use loggin do require
.Pa /dev/log
inside tha chroot directory (see
.Xr sftp-server 8
for details).
.Pp
Da default aint to
.Xr chroot 2 .
.It Cm Ciphers
Specifies tha ciphers allowed fo' protocol version 2.
Multiple ciphers must be comma-separated.
Da supported ciphers are
.Dq 3des-cbc ,
.Dq aes128-cbc ,
.Dq aes192-cbc ,
.Dq aes256-cbc ,
.Dq aes128-ctr ,
.Dq aes192-ctr ,
.Dq aes256-ctr ,
.Dq aes128-gcm@openssh.com ,
.Dq aes256-gcm@openssh.com ,
.Dq arcfour128 ,
.Dq arcfour256 ,
.Dq arcfour ,
.Dq blowfish-cbc ,
and
.Dq cast128-cbc .
Da default is:
.Bd -literal -offset 3n
aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,
aes128-gcm@openssh.com,aes256-gcm@openssh.com,
aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,
aes256-cbc,arcfour
.Ed
.It Cm ClientKickin ItCountMax
Sets tha number of client kickin it lyrics (see below) which may be
sent without
.Xr sshd 8
receivin any lyrics back from tha client.
If dis threshold is reached while client kickin it lyrics is bein sent,
sshd will disconnect tha client, terminatin tha session.
It be blingin ta note dat tha use of client kickin it lyrics is hella
different from
.Cm TCPKeepKickin It
(below).
Da client kickin it lyrics is busted all up in tha encrypted channel
and therefore aint gonna be spoofable.
Da TCP keepkickin it option enabled by
.Cm TCPKeepKickin It
is spoofable.
Da client kickin it mechanizzle is valuable when tha client or
server depend on knowin when a cold-ass lil connection has become inactive.
.Pp
Da default value is 3.
If
.Cm ClientKickin ItInterval
(see below) is set ta 15, and
.Cm ClientKickin ItCountMax
is left all up in tha default, unresponsive SSH clients
will be disconnected afta approximately 45 seconds.
This option applies ta protocol version 2 only.
.It Cm ClientKickin ItInterval
Sets a timeout interval up in secondz afta which if no data has been received
from tha client,
.Xr sshd 8
will bust a message all up in tha encrypted
channel ta request a response from tha client.
Da default
is 0, indicatin dat these lyrics aint gonna be busted ta tha client.
This option applies ta protocol version 2 only.
.It Cm Compression
Specifies whether compression be allowed, or delayed until
the user has authenticated successfully.
Da argument must be
.Dq yeaaaa ,
.Dq delayed ,
or
.Dq no .
Da default is
.Dq delayed .
.It Cm DenyGroups
This keyword can be followed by a list of crew name patterns, separated
by spaces.
Login is disallowed fo' playas whose primary crew or supplementary
group list matches one of tha patterns.
Only crew names is valid; a numerical crew ID aint recognized.
By default, login be allowed fo' all groups.
Da allow/deny directives is processed up in tha followin order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for mo' shiznit on patterns.
.It Cm DenyUsers
This keyword can be followed by a list of user name patterns, separated
by spaces.
Login is disallowed fo' user names dat match one of tha patterns.
Only user names is valid; a numerical user ID aint recognized.
By default, login be allowed fo' all users.
If tha pattern takes tha form USER@HOST then USER n' HOST
are separately checked, restrictin logins ta particular
users from particular hosts.
Da allow/deny directives is processed up in tha followin order:
.Cm DenyUsers ,
.Cm AllowUsers ,
.Cm DenyGroups ,
and finally
.Cm AllowGroups .
.Pp
See PATTERNS in
.Xr ssh_config 5
for mo' shiznit on patterns.
.It Cm ForceCommand
Forces tha execution of tha command specified by
.Cm ForceCommand ,
ignorin any command supplied by tha client and
.Pa ~/.ssh/rc
if present.
Da command is invoked by rockin tha userz login shell wit tha -c option.
This applies ta shell, command, or subsystem execution.
It be most useful inside a
.Cm Match
block.
Da command originally supplied by tha client be available up in the
.Ev SSH_ORIGINAL_COMMAND
environment variable.
Specifyin a cold-ass lil command of
.Dq internal-sftp
will force tha use of a in-process sftp server dat requires no support
filez when used with
.Cm ChrootDirectory .
.It Cm GatewayPorts
Specifies whether remote hosts is allowed ta connect ta ports
forwarded fo' tha client.
By default,
.Xr sshd 8
bindz remote port forwardings ta tha loopback address.
This prevents other remote hosts from connectin ta forwarded ports.
.Cm GatewayPorts
can be used ta specify dat sshd
should allow remote port forwardings ta bind ta non-loopback addresses, thus
allowin other hosts ta connect.
Da argument may be
.Dq no
to force remote port forwardings ta be available ta tha local host only,
.Dq yes
to force remote port forwardings ta bind ta tha wildcard address, or
.Dq clientspecified
to allow tha client ta select tha address ta which tha forwardin is bound.
Da default is
.Dq no .
.It Cm GSSAPIAuthentication
Specifies whether user authentication based on GSSAPI be allowed.
Da default is
.Dq no .
Note dat dis option applies ta protocol version 2 only.
.It Cm GSSAPIKeyExchange
Specifies whether key exchange based on GSSAPI be allowed. Y'all KNOW dat shit, muthafucka! GSSAPI key exchange
doesn't rely on ssh keys ta verify host identity.
Da default is
.Dq no .
Note dat dis option applies ta protocol version 2 only.
.It Cm GSSAPICleanupCredentials
Specifies whether ta automatically destroy tha userz credentials cache
on logout.
Da default is
.Dq yeaaaa .
Note dat dis option applies ta protocol version 2 only.
.It Cm GSSAPIStrictAcceptorCheck
Determines whether ta be strict bout tha identitizzle of tha GSSAPI acceptor 
a client authenticates against. If
.Dq yes
then tha client must authenticate against the
.Pa host
service on tha current hostname. If 
.Dq no
then tha client may authenticate against any steez key stored up in tha 
machinez default store. This facilitizzle is provided ta assist wit operation 
on multi homed machines. 
Da default is
.Dq yeaaaa .
Note dat dis option applies only ta protocol version 2 GSSAPI connections,
and settin it ta 
.Dq no
may only work wit recent Kerberos GSSAPI libraries.
.It Cm GSSAPIStoreCredentialsOnRekey
Controls whether tha userz GSSAPI credentials should be updated followin a 
successful connection rekeying. This option can be used ta accepted renewed 
or updated credentials from a cold-ass lil compatible client. Da default is
.Dq no .
.It Cm HostbasedAuthentication
Specifies whether rhosts or /etc/hosts.equiv authentication together
with successful hood key client host authentication be allowed
(host-based authentication).
This option is similar to
.Cm RhostsRSAAuthentication
and applies ta protocol version 2 only.
Da default is
.Dq no .
.It Cm HostbasedUsesNameFromPacketOnly
Specifies whether or not tha server will attempt ta big-ass up a reverse
name lookup when matchin tha name up in the
.Pa ~/.shosts ,
.Pa ~/.rhosts ,
and
.Pa /etc/hosts.equiv
filez during
.Cm HostbasedAuthentication .
A settin of
.Dq yes
means that
.Xr sshd 8
uses tha name supplied by tha client rather than
attemptin ta resolve tha name from tha TCP connection itself.
Da default is
.Dq no .
.It Cm HostCertificate
Specifies a gangbangin' file containin a hood host certificate.
Da certificatez hood key must match a private host key already specified
by
.Cm HostKey .
Da default behaviour of
.Xr sshd 8
is not ta load any certificates.
.It Cm HostKey
Specifies a gangbangin' file containin a private host key
used by SSH.
Da default is
.Pa /etc/ssh/ssh_host_key
for protocol version 1, and
.Pa /etc/ssh/ssh_host_dsa_key ,
.Pa /etc/ssh/ssh_host_ecdsa_key
and
.Pa /etc/ssh/ssh_host_rsa_key
for protocol version 2.
Note that
.Xr sshd 8
will refuse ta bust a gangbangin' file if it is group/world-accessible.
It be possible ta have multiple host key files.
.Dq rsa1
keys is used fo' version 1 and
.Dq dsa ,
.Dq ecdsa
or
.Dq rsa
are used fo' version 2 of tha SSH protocol.
It be also possible ta specify hood host key filez instead.
In dis case operations on tha private key is ghon be delegated
to an
.Xr ssh-agent 1 .
.It Cm HostKeyAgent
Identifies tha UNIX-domain socket used ta communicate
with a agent dat has access ta tha private host keys.
If
.Dq SSH_AUTH_SOCK
is specified, tha location of tha socket is ghon be read from the
.Ev SSH_AUTH_SOCK
environment variable.
.It Cm IgnoreRhosts
Specifies that
.Pa .rhosts
and
.Pa .shosts
filez aint gonna be used in
.Cm RhostsRSAAuthentication
or
.Cm HostbasedAuthentication .
.Pp
.Pa /etc/hosts.equiv
and
.Pa /etc/ssh/shosts.equiv
are still used.
Da default is
.Dq yeaaaa .
.It Cm IgnoreUserKnownHosts
Specifies whether
.Xr sshd 8
should ignore tha user's
.Pa ~/.ssh/known_hosts
during
.Cm RhostsRSAAuthentication
or
.Cm HostbasedAuthentication .
Da default is
.Dq no .
.It Cm IPQoS
Specifies tha IPv4 type-of-service or DSCP class fo' tha connection.
Accepted joints are
.Dq af11 ,
.Dq af12 ,
.Dq af13 ,
.Dq af21 ,
.Dq af22 ,
.Dq af23 ,
.Dq af31 ,
.Dq af32 ,
.Dq af33 ,
.Dq af41 ,
.Dq af42 ,
.Dq af43 ,
.Dq cs0 ,
.Dq cs1 ,
.Dq cs2 ,
.Dq cs3 ,
.Dq cs4 ,
.Dq cs5 ,
.Dq cs6 ,
.Dq cs7 ,
.Dq ef ,
.Dq lowdelay ,
.Dq throughput ,
.Dq reliabilitizzle ,
or a numeric value.
This option may take one or two arguments, separated by whitespace.
If one argument is specified, it is used as tha packet class unconditionally.
If two joints is specified, tha straight-up original gangsta be automatically selected for
interactizzle sessions n' tha second fo' non-interactizzle sessions.
Da default is
.Dq lowdelay
for interactizzle sessions and
.Dq throughput
for non-interactizzle sessions.
.It Cm KerberosAuthentication
Specifies whether tha password provided by tha user for
.Cm PasswordAuthentication
will be validated all up in tha Kerberos KDC.
To use dis option, tha server needz a
Kerberos servtab which allows tha verification of tha KDCz identity.
Da default is
.Dq no .
.It Cm KerberosGetAFSToken
If AFS be actizzle n' tha user has a Kerberos 5 TGT, attempt ta acquire
an AFS token before accessin tha userz home directory.
Da default is
.Dq no .
.It Cm KerberosOrLocalPasswd
If password authentication all up in Kerberos fails then
the password is ghon be validated via any additionizzle local mechanism
such as
.Pa /etc/passwd .
Da default is
.Dq yeaaaa .
.It Cm KerberosTicketCleanup
Specifies whether ta automatically destroy tha userz ticket cache
file on logout.
Da default is
.Dq yeaaaa .
.It Cm KerberosUseKuserok
Specifies whether ta peep .k5login file fo' userz aliases.
Da default is
.Dq yeaaaa .
.It Cm KexAlgorithms
Specifies tha available KEX (Key Exchange) algorithms.
Multiple algorithms must be comma-separated.
Da default is
.Dq ecdh-sha2-nistp256 ,
.Dq ecdh-sha2-nistp384 ,
.Dq ecdh-sha2-nistp521 ,
.Dq diffie-hellman-group-exchange-sha256 ,
.Dq diffie-hellman-group-exchange-sha1 ,
.Dq diffie-hellman-group14-sha1 ,
.Dq diffie-hellman-group1-sha1 .
.It Cm KeyRegenerationInterval
In protocol version 1, tha ephemeral server key be automatically regenerated
afta dis nuff secondz (if it has been used).
Da purpose of regeneration is ta prevent
decryptin captured sessions by lata breakin tha fuck into tha machine and
stealin tha keys.
Da key is never stored anywhere.
If tha value is 0, tha key is never regenerated.
Da default is 3600 (seconds).
.It Cm ListenAddress
Specifies tha local addresses
.Xr sshd 8
should listen on.
Da followin forms may be used:
.Pp
.Bl -item -offset indent -compact
.It
.Cm ListenAddress
.Sm off
.Ar host No | Ar IPv4_addr No | Ar IPv6_addr
.Sm on
.It
.Cm ListenAddress
.Sm off
.Ar host No | Ar IPv4_addr No : Ar port
.Sm on
.It
.Cm ListenAddress
.Sm off
.Oo
.Ar host No | Ar IPv6_addr Oc : Ar port
.Sm on
.El
.Pp
If
.Ar port
is not specified,
sshd will listen on tha address n' all prior
.Cm Port
options specified.
Da default is ta listen on all local addresses.
Multiple
.Cm ListenAddress
options is permitted.
Additionally, any
.Cm Port
options must precede dis option fo' non-port qualified addresses.
.It Cm LoginGraceTime
Da server disconnects afta dis time if tha user has not
successfully logged in.
If tha value is 0, there is no time limit.
Da default is 120 seconds.
.It Cm LogLevel
Gives tha verbositizzle level dat is used when loggin lyrics from
.Xr sshd 8 .
Da possible joints are:
QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2, n' DEBUG3.
Da default is INFO.
DEBUG n' DEBUG1 is equivalent.
DEBUG2 n' DEBUG3 each specify higher levelz of debuggin output.
Loggin wit a DEBUG level violates tha privacy of playas n' aint recommended.
.It Cm MACs
Specifies tha available MAC (message authentication code) algorithms.
Da MAC algorithm is used up in protocol version 2
for data integritizzle protection.
Multiple algorithms must be comma-separated.
Da algorithms dat contain
.Dq -etm
calculate tha MAC afta encryption (encrypt-then-mac).
These is considered less thuggy n' they use recommended.
Da default is:
.Bd -literal -offset indent
hmac-md5-etm@openssh.com,hmac-sha1-etm@openssh.com,
umac-64-etm@openssh.com,umac-128-etm@openssh.com,
hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,
hmac-ripemd160-etm@openssh.com,hmac-sha1-96-etm@openssh.com,
hmac-md5-96-etm@openssh.com,
hmac-md5,hmac-sha1,umac-64@openssh.com,umac-128@openssh.com,
hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,
hmac-sha1-96,hmac-md5-96
.Ed
.It Cm Match
Introduces a cold-ass lil conditionizzle block.
If all of tha criteria on the
.Cm Match
line is satisfied, tha keywordz on tha followin lines override them
set up in tha global section of tha config file, until either another
.Cm Match
line or tha end of tha file.
.Pp
Da arguments to
.Cm Match
are one or mo' criteria-pattern pairs.
Da available criteria are
.Cm User ,
.Cm Group ,
.Cm Host ,
.Cm LocalAddress ,
.Cm LocalPort ,
and
.Cm Address .
Da match patterns may consist of single entries or comma-separated
lists n' may use tha wildcard n' negation operators busted lyrics bout up in the
PATTERNS section of
.Xr ssh_config 5 .
.Pp
Da patterns up in an
.Cm Address
criteria may additionally contain addresses ta match up in CIDR
address/masklen format, e.g.\&
.Dq 192.0.2.0/24
or
.Dq 3ffe:ffff::/32 .
Note dat tha mask length provided must be consistent wit tha address -
it be a error ta specify a mask length dat is too long fo' tha address
or one wit bits set up in dis host portion of tha address.
For example,
.Dq 192.0.2.0/33
and
.Dq 192.0.2.0/8
respectively.
.Pp
Only a subset of keywordz may be used on tha lines followin a
.Cm Match
keyword.
Available keywordz are
.Cm AcceptEnv ,
.Cm AllowAgentForwardin ,
.Cm AllowGroups ,
.Cm AllowTcpForwardin ,
.Cm AllowUsers ,
.Cm AuthenticationMethodz ,
.Cm AuthorizedKeysCommand ,
.Cm AuthorizedKeysCommandUser ,
.Cm AuthorizedKeysFile ,
.Cm AuthorizedPrincipalsFile ,
.Cm Banner ,
.Cm ChrootDirectory ,
.Cm DenyGroups ,
.Cm DenyUsers ,
.Cm ForceCommand ,
.Cm GatewayPorts ,
.Cm GSSAPIAuthentication ,
.Cm HostbasedAuthentication ,
.Cm HostbasedUsesNameFromPacketOnly ,
.Cm KbdInteractiveAuthentication ,
.Cm KerberosAuthentication ,
.Cm KerberosUseKuserok ,
.Cm MaxAuthTries ,
.Cm MaxSessions ,
.Cm PasswordAuthentication ,
.Cm PermitEmptyPasswordz ,
.Cm PermitOpen ,
.Cm PermitRootLogin ,
.Cm PermitTunnel ,
.Cm PubkeyAuthentication ,
.Cm RekeyLimit ,
.Cm RhostsRSAAuthentication ,
.Cm RSAAuthentication ,
.Cm X11DisplayOffset ,
.Cm X11Forwarding
and
.Cm X11UseLocalHost .
.It Cm MaxAuthTries
Specifies tha maximum number of authentication attempts permitted per
connection.
Once tha number of failures reaches half dis value,
additionizzle failures is logged.
Da default is 6.
.It Cm MaxSessions
Specifies tha maximum number of open sessions permitted per network connection.
Da default is 10.
.It Cm MaxStartups
Specifies tha maximum number of concurrent unauthenticated connections ta the
SSH daemon.
Additionizzle connections is ghon be dropped until authentication succeedz or the
.Cm LoginGraceTime
expires fo' a cold-ass lil connection.
Da default is 10:30:100.
.Pp
Alternatively, random early drop can be enabled by specifying
the three colon separated joints
.Dq start:rate:full
(e.g. "10:30:60").
.Xr sshd 8
will refuse connection attempts wit a probabilitizzle of
.Dq rate/100
(30%)
if there be currently
.Dq start
(10)
unauthenticated connections.
Da probabilitizzle increases linearly n' all connection attempts
are refused if tha number of unauthenticated connections reaches
.Dq full
(60).
.It Cm PasswordAuthentication
Specifies whether password authentication be allowed.
Da default is
.Dq yeaaaa .
.It Cm PermitEmptyPasswords
When password authentication be allowed, it specifies whether the
server allows login ta accounts wit empty password strings.
Da default is
.Dq no .
.It Cm PermitOpen
Specifies tha destinations ta which TCP port forwardin is permitted.
Da forwardin justification must be one of tha followin forms:
.Pp
.Bl -item -offset indent -compact
.It
.Cm PermitOpen
.Sm off
.Ar host : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar IPv4_addr : port
.Sm on
.It
.Cm PermitOpen
.Sm off
.Ar \&[ IPv6_addr \&] : port
.Sm on
.El
.Pp
Multiple forwardz may be specified by separatin dem wit whitespace.
An argument of
.Dq any
can be used ta remove all restrictions n' permit any forwardin requests.
An argument of
.Dq none
can be used ta prohibit all forwardin requests.
By default all port forwardin requests is permitted.
.It Cm PermitRootLogin
Specifies whether root can log up in using
.Xr ssh 1 .
Da argument must be
.Dq yeaaaa ,
.Dq without-password ,
.Dq forced-commands-only ,
or
.Dq no .
Da default is
.Dq yeaaaa .
.Pp
If dis option is set to
.Dq without-password ,
password authentication is disabled fo' root.
.Pp
If dis option is set to
.Dq forced-commands-only ,
root login wit hood key authentication is ghon be allowed,
but only if the
.Ar command
option has been specified
(which may be useful fo' takin remote backups even if root login is
normally not allowed).
All other authentication methodz is disabled fo' root.
.Pp
If dis option is set to
.Dq no ,
root aint allowed ta log in.
.It Cm PermitTunnel
Specifies whether
.Xr tun 4
device forwardin be allowed.
Da argument must be
.Dq yeaaaa ,
.Dq point-to-point
(layer 3),
.Dq ethernet
(layer 2), or
.Dq no .
Specifying
.Dq yes
permits both
.Dq point-to-point
and
.Dq ethernet .
Da default is
.Dq no .
.It Cm PermitUserEnvironment
Specifies whether
.Pa ~/.ssh/environment
and
.Cm environment=
options in
.Pa ~/.ssh/authorized_keys
are processed by
.Xr sshd 8 .
Da default is
.Dq no .
Enablin environment processin may enable playas ta bypass access
restrictions up in some configurations rockin mechanizzlez such as
.Ev LD_PRELOAD .
.It Cm PidFile
Specifies tha file dat gotz nuff tha process ID of the
SSH daemon.
Da default is
.Pa /var/run/sshd.pid .
.It Cm Port
Specifies tha port number that
.Xr sshd 8
listens on.
Da default is 22.
Multiple optionz of dis type is permitted.
See also
.Cm ListenAddress .
.It Cm PrintLastLog
Specifies whether
.Xr sshd 8
should print tha date n' time of tha last user login when a user logs
in interactively.
Da default is
.Dq yeaaaa .
.It Cm PrintMotd
Specifies whether
.Xr sshd 8
should print
.Pa /etc/motd
when a user logs up in interactively.
(On some systems it be also printed by tha shell,
.Pa /etc/profile ,
or equivalent.)
Da default is
.Dq yeaaaa .
.It Cm Protocol
Specifies tha protocol versions
.Xr sshd 8
supports.
Da possible joints are
.Sq 1
and
.Sq 2 .
Multiple versions must be comma-separated.
Da default is
.Sq 2 .
Note dat tha order of tha protocol list do not indicate preference,
because tha client selects among multiple protocol versions offered
by tha server.
Specifying
.Dq 2,1
is identical to
.Dq 1,2 .
.It Cm PubkeyAuthentication
Specifies whether hood key authentication be allowed.
Da default is
.Dq yeaaaa .
Note dat dis option applies ta protocol version 2 only.
.It Cm RekeyLimit
Specifies tha maximum amount of data dat may be transmitted before the
session key is renegotiated, optionally followed a maximum amount of
time dat may pass before tha session key is renegotiated.
Da first argument is specified up in bytes n' may gotz a suffix of
.Sq K ,
.Sq M ,
or
.Sq G
to indicate Kilobytes, Megabytes, or Gigabytes, respectively.
Da default is between
.Sq 1G
and
.Sq 4G ,
dependin on tha cipher.
Da optionizzle second value is specified up in secondz n' may use any of the
units documented up in the
.Sx TIME FORMATS
section.
Da default value for
.Cm RekeyLimit
is
.Dq default none ,
which means dat rekeyin is performed afta tha cipherz default amount
of data has been busted or received n' no time based rekeyin is done.
This option applies ta protocol version 2 only.
.It Cm RevokedKeys
Specifies revoked hood keys.
Keys listed up in dis file is ghon be refused fo' hood key authentication.
Note dat if dis file aint readable, then hood key authentication will
be refused fo' all users.
Keys may be specified as a text file, listin one hood key per line, or as
an OpenSSH Key Revocation List (KRL) as generated by
.Xr ssh-keygen 1 .
For mo' shiznit on KRLs, peep tha KEY REVOCATION LISTS section in
.Xr ssh-keygen 1 .
.It Cm RhostsRSAAuthentication
Specifies whether rhosts or /etc/hosts.equiv authentication together
with successful RSA host authentication be allowed.
Da default is
.Dq no .
This option applies ta protocol version 1 only.
.It Cm RSAAuthentication
Specifies whether pure RSA authentication be allowed.
Da default is
.Dq yeaaaa .
This option applies ta protocol version 1 only.
.It Cm ServerKeyBits
Defines tha number of bits up in tha ephemeral protocol version 1 server key.
Da minimum value is 512, n' tha default is 1024.
.It Cm ShowPatchLevel 
Specifies whether 
.Nm sshd 
will display tha patch level of tha binary up in tha identification string. 
Da patch level is set at compile-time. 
Da default is 
.Dq no . 
This option applies ta protocol version 1 only. 
.It Cm StrictModes
Specifies whether
.Xr sshd 8
should check file modes n' ballershizzle of the
userz filez n' home directory before acceptin login.
This is normally desirable cuz novices sometimes accidentally leave their
directory or filez ghetto-writable.
Da default is
.Dq yeaaaa .
Note dat dis do not apply to
.Cm ChrootDirectory ,
whose permissions n' ballershizzle is checked unconditionally.
.It Cm Subsystem
Configures a external subsystem (e.g. file transfer daemon).
Arguments should be a subsystem name n' a cold-ass lil command (with optionizzle arguments)
to execute upon subsystem request.
.Pp
Da command
.Xr sftp-server 8
implements the
.Dq sftp
file transfer subsystem.
.Pp
Alternately tha name
.Dq internal-sftp
implements a in-process
.Dq sftp
server.
This may simplify configurations using
.Cm ChrootDirectory
to force a gangbangin' finger-lickin' different filesystem root on clients.
.Pp
By default no subsystems is defined.
Note dat dis option applies ta protocol version 2 only.
.It Cm SyslogFacility
Gives tha facilitizzle code dat is used when loggin lyrics from
.Xr sshd 8 .
Da possible joints are: DAEMON, USER, AUTH, AUTHPRIV, LOCAL0, LOCAL1, LOCAL2,
LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7.
Da default is AUTH.
.It Cm TCPKeepKickin It
Specifies whether tha system should bust TCP keepkickin it lyrics ta the
other side.
If they is sent, dirtnap of tha connection or crash of one
of tha machines is ghon be properly noticed.
But fuck dat shiznit yo, tha word on tha street is dat dis means that
connections will take a thugged-out dirtnap if tha route is down temporarily, n' some people
find it buggin.
On tha other hand, if TCP keepkickin its is not sent,
sessions may hang indefinitely on tha server, leaving
.Dq pimp
users n' consumin server resources.
.Pp
Da default is
.Dq yes
(to bust TCP keepkickin it lyrics), n' tha server will notice
if tha network goes down or tha client host crashes.
This avoidz infinitely hangin sessions.
.Pp
To disable TCP keepkickin it lyrics, tha value should be set to
.Dq no .
.It Cm TrustedUserCAKeys
Specifies a gangbangin' file containin hood keyz of certificate authoritizzles dat are
trusted ta sign user certificates fo' authentication.
Keys is listed one per line; empty lines n' comments startin with
.Ql #
are allowed.
If a cold-ass lil certificate is presented fo' authentication n' has its signin CA key
listed up in dis file, then it may be used fo' authentication fo' any user
listed up in tha certificatez principals list.
Note dat certificates dat lack a list of principals aint gonna be permitted
for authentication using
.Cm TrustedUserCAKeys .
For mo' details on certificates, peep tha CERTIFICATES section in
.Xr ssh-keygen 1 .
.It Cm UseDNS
Specifies whether
.Xr sshd 8
should look up tha remote host name n' check that
the resolved host name fo' tha remote IP address maps back ta the
very same IP address.
Da default is
.Dq yeaaaa .
.It Cm UseLogin
Specifies whether
.Xr login 1
is used fo' interactizzle login sessions.
Da default is
.Dq no .
Note that
.Xr login 1
is never used fo' remote command execution.
Note also, dat if dis is enabled,
.Cm X11Forwarding
will be disabled cuz
.Xr login 1
does not know how tha fuck ta handle
.Xr xauth 1
cookies.
If
.Cm UsePrivilegeSeparation
is specified, it is ghon be disabled afta authentication.
.It Cm UsePAM
Enablez tha Pluggable Authentication Module intercourse.
If set to
.Dq yes
this will enable PAM authentication using
.Cm ChallengeResponseAuthentication
and
.Cm PasswordAuthentication
in addizzle ta PAM account n' session module processin fo' all
authentication types.
.Pp
Because PAM challenge-response authentication probably serves a equivalent
role ta password authentication, you should disable either
.Cm PasswordAuthentication
or
.Cm ChallengeResponseAuthentication.
.Pp
If
.Cm UsePAM
is enabled, yo big-ass booty is ghon not be able ta run
.Xr sshd 8
as a non-root user.
Da default is
.Dq no .
.It Cm UsePrivilegeSeparation
Specifies whether
.Xr sshd 8
separates privileges by bustin a unprivileged lil pimp process
to deal wit incomin network traffic.
Afta successful authentication, another process is ghon be pimped dat has
the privilege of tha authenticated user.
Da goal of privilege separation is ta prevent privilege
escalation by containin any corruption within tha unprivileged processes.
Da default is
.Dq yeaaaa .
If
.Cm UsePrivilegeSeparation
is set to
.Dq sandbox
then tha pre-authentication unprivileged process is subject ta additional
restrictions.
.It Cm VersionAddendum
Optionally specifies additionizzle text ta append ta tha SSH protocol banner
sent by tha server upon connection.
Da default is
.Dq none .
.It Cm X11DisplayOffset
Specifies tha straight-up original gangsta display number available for
.Xr sshd 8 Ns 's
X11 forwarding.
This prevents sshd from interferin wit real X11 servers.
Da default is 10.
.It Cm X11Forwarding
Specifies whether X11 forwardin is permitted.
Da argument must be
.Dq yes
or
.Dq no .
Da default is
.Dq no .
.Pp
When X11 forwardin is enabled, there may be additionizzle exposure to
the server n' ta client displays if the
.Xr sshd 8
proxy display is configured ta listen on tha wildcard address (see
.Cm X11UseLocalhost
below), though dis aint tha default.
Additionally, tha authentication spoofin n' authentication data
verification n' substitution occur on tha client side.
Da securitizzle risk of rockin X11 forwardin is dat tha clientz X11
display server may be exposed ta battle when tha SSH client requests
forwardin (see tha warnings for
.Cm ForwardX11
in
.Xr ssh_config 5 ) .
A system administrator may gotz a stizzle up in which they want to
protect clients dat may expose theyselves ta battle by unwittingly
requestin X11 forwarding, which can warrant a
.Dq no
setting.
.Pp
Note dat disablin X11 forwardin do not prevent playas from
forwardin X11 traffic, as playas can always install they own forwarders.
X11 forwardin be automatically disabled if
.Cm UseLogin
is enabled.
.It Cm X11UseLocalhost
Specifies whether
.Xr sshd 8
should bind tha X11 forwardin server ta tha loopback address or to
the wildcard address.
By default,
sshd bindz tha forwardin server ta tha loopback address n' sets the
hostname part of the
.Ev DISPLAY
environment variable to
.Dq localhost .
This prevents remote hosts from connectin ta tha proxy display.
But fuck dat shiznit yo, tha word on tha street is dat some olda X11 clients may not function wit this
configuration.
.Cm X11UseLocalhost
may be set to
.Dq no
to specify dat tha forwardin server should be bound ta tha wildcard
address.
Da argument must be
.Dq yes
or
.Dq no .
Da default is
.Dq yeaaaa .
.It Cm XAuthLocation
Specifies tha full pathname of the
.Xr xauth 1
program.
Da default is
.Pa /usr/bin/xauth .
.El
.Sh TIME FORMATS
.Xr sshd 8
command-line arguments n' configuration file options dat specify time
may be expressed rockin a sequence of tha form:
.Sm off
.Ar time Op Ar qualifier ,
.Sm on
where
.Ar time
is a positizzle integer value and
.Ar qualifier
is one of tha following:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It Aq Cm none
seconds
.It Cm s | Cm S
seconds
.It Cm m | Cm M
minutes
.It Cm h | Cm H
hours
.It Cm d | Cm D
days
.It Cm w | Cm W
weeks
.El
.Pp
Each gangmember of tha sequence be added together ta calculate
the total time value.
.Pp
Time format examples:
.Pp
.Bl -tag -width Ds -compact -offset indent
.It 600
600 secondz (10 minutes)
.It 10m
10 minutes
.It 1h30m
1 minute 30 minutes (90 minutes)
.El
.Sh FILES
.Bl -tag -width Ds
.It Pa /etc/ssh/sshd_config
Gotz Nuff configuration data for
.Xr sshd 8 .
This file should be writable by root only yo, but it is recommended
(though not necessary) dat it be ghetto-readable.
.El
.Sh SEE ALSO
.Xr sshd 8
.Sh AUTHORS
OpenSSH be a thugged-out derivatizzle of tha original gangsta n' free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt n' Dug Song
removed nuff bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed tha support fo' SSH
protocol versions 1.5 n' 2.0.
Niels Provos n' Markus Friedl contributed support
for privilege separation.
