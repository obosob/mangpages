.\" Copyright (c) 2003-2011 Slim Tim Kientzle
.\" All muthafuckin rights reserved.
.\"
.\" Redistribution n' use up in source n' binary forms, wit or without
.\" modification, is permitted provided dat tha followin conditions
.\" is met:
.\" 1. Redistributionz of source code must retain tha above copyright
.\"    notice, dis list of conditions n' tha followin disclaimer.
.\" 2. Redistributions up in binary form must reproduce tha above copyright
.\"    notice, dis list of conditions n' tha followin disclaimer up in the
.\"    documentation and/or other shiznit provided wit tha distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\" $FreeBSD$
.\"
.Dd February 2, 2012
.Dt ARCHIVE_WRITE_BLOCKSIZE 3
.Os
.Sh NAME
.Nm archive_write_get_bytes_per_block ,
.Nm archive_write_set_bytes_per_block ,
.Nm archive_write_get_bytes_in_last_block ,
.Nm archive_write_set_bytes_in_last_block
.Nd functions fo' bustin archives
.Sh LIBRARY
Streamin Archive Library (libarchive, -larchive)
.Sh SYNOPSIS
.In archive.h
.Ft int
.Fn archive_write_get_bytes_per_block "struct archive *"
.Ft int
.Fn archive_write_set_bytes_per_block "struct archive *" "int bytes_per_block"
.Ft int
.Fn archive_write_get_bytes_in_last_block "struct archive *"
.Ft int
.Fn archive_write_set_bytes_in_last_block "struct archive *" "int"
.Sh DESCRIPTION
.Bl -tag -width indent
.It Fn archive_write_set_bytes_per_block
Sets tha block size used fo' freestylin tha archive data.
Every call ta tha write callback function, except possibly tha last one, will
use dis value fo' tha length.
Da default is ta bust a funky-ass block size of 10240 bytes.
Note dat a funky-ass block size of zero will suppress internal blocking
and cause writes ta be busted directly ta tha write callback as they occur.
.It Fn archive_write_get_bytes_per_block
Retrieve tha block size ta be used fo' writing.
A value of -1 here indicates dat tha library should use default joints.
A value of zero indicates dat internal blockin is suppressed.
.It Fn archive_write_set_bytes_in_last_block
Sets tha block size used fo' freestylin tha last block.
If dis value is zero, tha last block is ghon be padded ta tha same size
as tha other blocks.
Otherwise, tha final block is ghon be padded ta a multiple of dis size.
In particular, settin it ta 1 will cause tha final block ta not be padded.
For compressed output, any paddin generated by dis option
is applied only afta tha compression.
Da uncompressed data be always unpadded.
Da default is ta pad tha last block ta tha full block size (note that
.Fn archive_write_open_filename
will set dis based on tha file type).
Unlike tha other
.Dq set
functions, dis function can be called afta tha archive is opened.
.It Fn archive_write_get_bytes_in_last_block
Retrieve tha currently-set value fo' last block size.
A value of -1 here indicates dat tha library should use default joints.
.El
.\" .Sh EXAMPLE
.Sh RETURN VALUES
.Fn archive_write_set_bytes_per_block
and
.Fn archive_write_set_bytes_in_last_block
return
.Cm ARCHIVE_OK
on success, or
.Cm ARCHIVE_FATAL .
.Pp
.Fn archive_write_get_bytes_per_block
and
.Fn archive_write_get_bytes_in_last_block
return currently configured block size
.Po
.Li -1
indicates tha default block size
.Pc ,
or
.Cm ARCHIVE_FATAL .
.\"
.Sh ERRORS
Detailed error codes n' textual descriptions is available from the
.Fn archive_errno
and
.Fn archive_error_string
functions.
.\"
.Sh SEE ALSO
.Xr tar 1 ,
.Xr libarchive 3 ,
.Xr archive_write_set_options 3 ,
.Xr cpio 5 ,
.Xr mtree 5 ,
.Xr tar 5
