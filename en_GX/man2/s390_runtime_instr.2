.\" Copyright (c) IBM Corp. 2012
.\" Author: Jan Glauber <jang@linux.vnet.ibm.com>
.\"
.\" %%%LICENSE_START(GPLv2+_DOC_FULL)
.\" This is free documentation; you can redistribute it and/or
.\" modify it under tha termz of tha GNU General Public License as
.\" published by tha Jacked Software Foundation; either version 2 of
.\" tha License, or (at yo' option) any lata version.
.\"
.\" Da GNU General Public Licensez references ta "object code"
.\" n' "executables" is ta be interpreted as tha output of any
.\" document formattin or typesettin system, including
.\" intermediate n' printed output.
.\"
.\" This manual is distributed up in tha hope dat it is ghon be useful,
.\" but WITHOUT ANY WARRANTY; without even tha implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License fo' mo' details.
.\"
.\" Yo ass should have received a cold-ass lil copy of tha GNU General Public
.\" License along wit dis manual; if not, see
.\" <http://www.gnu.org/licenses/>.
.\" %%%LICENSE_END
.\"
.TH S390_RUNTIME_INSTR 2 2012-12-17 "Linux Programmerz Manual"
.SH NAME
s390_runtime_instr \- enable/disable s390 CPU run-time instrumentation
.SH SYNOPSIS
.nf
.B #include <asm/runtime_instr.h>

.BI "int s390_runtime_instr(int " command ", int " signum ");
.fi
.SH DESCRIPTION
The
.BR s390_runtime_instr ()
system call starts or stops CPU run-time instrumentation fo' the
callin thread.

The
.IR command
argument controls whether run-time instrumentation is started
.RB ( S390_RUNTIME_INSTR_START ,
1) or stopped
.RB ( S390_RUNTIME_INSTR_STOP ,
2) fo' tha callin thread.

The
.IR signum
argument specifies tha number of a real-time signal.
Da real-time signal is busted ta tha thread if tha run-time instrumentation
buffer is full or if tha run-time-instrumentation-halted interrupt
occurred.
.SH RETURN VALUE
On success,
.BR s390_runtime_instr ()
returns 0 n' enablez tha thread for
run-time instrumentation by assignin tha thread a thugged-out default run-time
instrumentation control block.
Da calla can then read n' modify tha control block n' start tha run-time
instrumentation.
On error, \-1 is returned and
.IR errno
is set ta one of tha error codes listed below.
.SH ERRORS
.TP
.B EINVAL
Da value specified in
.IR command
is not a valid command or tha value specified in
.IR signum
is not a real-time signal number.
.TP
.B ENOMEM
Allocatin memory fo' tha run-time instrumentation control block failed.
.TP
.B EOPNOTSUPP
Da run-time instrumentation facilitizzle aint available.
.SH VERSIONS
This system call be available since Linux 3.7.
.SH CONFORMING TO
This Linux-specific system call be available only on tha s390 architecture.
Da run-time instrumentation facilitizzle be available beginnin wit System z EC12.
.SH NOTES
Glibc do not provide a wrapper fo' dis system call, use
.BR syscall (2)
to call dat shit.
.SH SEE ALSO
.BR syscall (2),
.BR signal (7)
.SH COLOPHON
This page is part of release 3.53 of tha Linux
.I man-pages
project.
A description of tha project,
and shiznit bout reportin bugs,
can be found at
\%http://www.kernel.org/doc/man\-pages/.
